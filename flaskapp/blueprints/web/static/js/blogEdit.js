webpackJsonp([9],{337:function(t,e,a){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}var r=a(1),i=l(r),n=a(10),o=a(7);a(16),a(88),a(17);var s=a(8),u=a(339),c=l(u),d=a(18),f=l(d),p=a(340),b=l(p),h=a(19),g=(0,h.configureStore)({auth:f.default,blogEdit:b.default}),m=(0,s.layout)({comp:c.default,forAuth:!0});(0,n.render)(i.default.createElement(o.Provider,{store:g},i.default.createElement(m,null)),document.getElementById("root"))},339:function(t,e,a){"use strict";function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t},o=function(){function t(t,e){for(var a=0;a<e.length;a++){var l=e[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}return function(e,a,l){return a&&t(e.prototype,a),l&&t(e,l),e}}(),s=a(1),u=function(t){return t&&t.__esModule?t:{default:t}}(s),c=a(7),d=a(21),f=a(8),p=function(t){function e(t){l(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.state=n({},t.blogEdit),a}return i(e,t),o(e,[{key:"componentWillMount",value:function(){-1!==this.state.id&&this.props.dispatch((0,d.graphql)({type:"BLOG_GET",id:this.state.id}))}},{key:"componentWillReceiveProps",value:function(t){"success_get"==t.blogEdit.status&&this.setState({title:t.blogEdit.title,text:t.blogEdit.text,public:t.blogEdit.public,date:t.blogEdit.date})}},{key:"fieldChange",value:function(t){var e={},a="public"==t.target.id?t.target.checked:t.target.value;e[t.target.id]=a,this.setState(e)}},{key:"formSubmit",value:function(t){if(t.preventDefault(),text&&text.length>512)return this.props.dispatch({type:"BLOG_EDIT_ERROR",error:"Text is too long!"});this.props.dispatch((0,d.graphql)({type:"BLOG_EDIT",id:this.state.id,title:this.state.title,text:this.state.text,public:this.state.public}))}},{key:"render",value:function(){var t=this,e=null;return"error"===this.props.blogEdit.status?e={className:"danger",text:this.props.blogEdit.error||"Error, wrong blog data"}:"send"===this.props.blogEdit.status?e={className:"info",text:"Loading, please wait"}:"success_edit"===this.props.blogEdit.status&&(e={className:"success",text:"Blog saved successfully"},setTimeout(function(){window.location="/blog-edit/"+t.props.blogEdit.id},1e3)),u.default.createElement("div",null,u.default.createElement("ol",{className:"breadcrumb"},u.default.createElement("li",null,u.default.createElement("a",{href:"/my-blogs"},"My Blogs")),u.default.createElement("li",{className:"active"},this.state.title?this.state.title:null)),u.default.createElement("form",{onSubmit:this.formSubmit.bind(this)},u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{htmlFor:"title"},"Title"),u.default.createElement("input",{required:!0,type:"text",className:"form-control",id:"title",placeholder:"Title",onChange:this.fieldChange.bind(this),value:this.state.title})),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{htmlFor:"text"},"Text"),u.default.createElement("textarea",{required:!0,className:"form-control",id:"text",placeholder:"Text",onChange:this.fieldChange.bind(this),value:this.state.text})),u.default.createElement("div",{className:"checkbox"},u.default.createElement("label",null,u.default.createElement("input",{type:"checkbox",id:"public",onChange:this.fieldChange.bind(this),checked:!!this.state.public})," Public")),u.default.createElement(f.AlertMessage,{opts:e}),u.default.createElement("hr",null),u.default.createElement("div",null,u.default.createElement("button",{type:"submit",className:"btn btn-primary"},u.default.createElement("span",{className:"glyphicon glyphicon-floppy-disk"}),"Â  Save")),u.default.createElement("br",null)))}}]),e}(u.default.Component),b=function(t){return n({},t)};p=(0,c.connect)(b)(p),e.default=p},340:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t},r=window.localParams.blogId||"-1",i={id:parseInt(r),user_id:0,user_name:"",title:"",text:"",date:"",public:!1,status:null},n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments[1],a=null;switch(e.type){case"BLOG_GET_SEND":return l({status:"send"},t);case"BLOG_GET_SUCCESS":return a=l({},t),a.status="success_get",a.id=e.data.getBlog.id,a.user_id=e.data.getBlog.userId,a.user_name=e.data.getBlog.userName,a.text=e.data.getBlog.text,a.title=e.data.getBlog.title,a.date=e.data.getBlog.date,a.public=!!e.data.getBlog.public,a;case"BLOG_GET_ERROR":return l({status:"error",error:e.error},t);case"BLOG_EDIT_SEND":return a=l({},t),a.status="send",a.id=e.id,a.text=e.text,a.title=e.title,a.public=e.public,a;case"BLOG_EDIT_SUCCESS":return a=l({},t),a.status="success_edit",a.id=e.data.editBlog.id,a.text=e.data.editBlog.text,a.title=e.data.editBlog.title,a.public=e.data.editBlog.public,a;case"BLOG_EDIT_ERROR":return a=l({},t),a.status="error",a.error=e.error,a;default:return t}};e.default=n}},[337]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYmxvZ0VkaXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljX3NyYy9ibG9nRWRpdC5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWNfc3JjL2Jsb2cvRWRpdENvbXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljX3NyYy9ibG9nL0VkaXRSZWQuanMiXSwibmFtZXMiOlsid2VicGFja0pzb25wIiwiMzM3IiwibW9kdWxlIiwiZXhwb3J0cyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfcmVhY3QiLCJfcmVhY3QyIiwiX3JlYWN0RG9tIiwiX3JlYWN0UmVkdXgiLCJfY29tcG9uZW50IiwiX0VkaXRDb21wIiwiX0VkaXRDb21wMiIsIl9Mb2dpblJlZCIsIl9Mb2dpblJlZDIiLCJfRWRpdFJlZCIsIl9FZGl0UmVkMiIsIl9jb25maWd1cmVTdG9yZSIsInN0b3JlIiwiY29uZmlndXJlU3RvcmUiLCJhdXRoIiwiYmxvZ0VkaXQiLCJDb21wIiwibGF5b3V0IiwiY29tcCIsIkVkaXRDb21wIiwiZm9yQXV0aCIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJQcm92aWRlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCIzMzkiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJzZWxmIiwiY2FsbCIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwicHJvdG90eXBlIiwiT2JqZWN0IiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJ2YWx1ZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGVmaW5lUHJvcGVydHkiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfYWN0aW9uIiwiX1JlYWN0JENvbXBvbmVudCIsInRoaXMiLCJfdGhpcyIsImdldFByb3RvdHlwZU9mIiwic3RhdGUiLCJpZCIsImRpc3BhdGNoIiwiZ3JhcGhxbCIsInR5cGUiLCJuZXh0UHJvcHMiLCJzdGF0dXMiLCJzZXRTdGF0ZSIsInRpdGxlIiwidGV4dCIsInB1YmxpYyIsImRhdGUiLCJlIiwic3RhdGVPYmoiLCJ2YWwiLCJjaGVja2VkIiwicHJldmVudERlZmF1bHQiLCJlcnJvciIsIl90aGlzMiIsImFsZXJ0T3B0cyIsImNsYXNzTmFtZSIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJvblN1Ym1pdCIsImZvcm1TdWJtaXQiLCJiaW5kIiwiaHRtbEZvciIsInJlcXVpcmVkIiwicGxhY2Vob2xkZXIiLCJvbkNoYW5nZSIsImZpZWxkQ2hhbmdlIiwiQWxlcnRNZXNzYWdlIiwib3B0cyIsIlJlYWN0IiwiQ29tcG9uZW50IiwibWFwU3RhdGVUb1Byb3BzIiwiY29ubmVjdCIsIjM0MCIsImJsb2dJZCIsImxvY2FsUGFyYW1zIiwiaW5pdFN0YXRlIiwicGFyc2VJbnQiLCJ1c2VyX2lkIiwidXNlcl9uYW1lIiwidW5kZWZpbmVkIiwiYWN0aW9uIiwiZGF0YSIsImdldEJsb2ciLCJ1c2VySWQiLCJ1c2VyTmFtZSIsImVkaXRCbG9nIl0sIm1hcHBpbmdzIjoiQUFBQUEsY0FBYyxJQUVSQyxJQUNBLFNBQVVDLEVBQVFDLEVBQVNDLEdBRWpDLFlBaUNBLFNBQVNDLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLEdDdEN2RixHQUFBRyxHQUFBTCxFQUFB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QUtJLFNBQVNuRCxHQUMvQitDLEVBQUt2QyxLQUFPc0MsRUFBT0MsS0FBS0ksU0FBUzNDLEtBQ2pDdUMsRUFBS3hDLE1BQVF1QyxFQUFPQyxLQUFLSSxTQUFTNUMsTUFDbEN3QyxFQUFLdEMsT0FBU3FDLEVBQU9DLEtBQUtJLFNBQVMxQyxPQUM1QnNDLENBQ1gsS0FBSyxrQkFJRCxNQUhBQSxRQUFXaEQsR0FDWGdELEVBQUsxQyxPQUFTLFFBQ2QwQyxFQUFLL0IsTUFBUThCLEVBQU85QixNQUNiK0IsQ0FHWCxTQUNJLE1BQU9oRCxJSHdTbkIzRSxHQUFRSyxRR3BTT2dCLEtId1NaIiwiZmlsZSI6ImJsb2dFZGl0LmpzIiwic291cmNlc0NvbnRlbnQiOlsid2VicGFja0pzb25wKFs5XSx7XG5cbi8qKiovIDMzNzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cbnZhciBfcmVhY3RSZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbl9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDg4KTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cbnZhciBfY29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxudmFyIF9FZGl0Q29tcCA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblxudmFyIF9FZGl0Q29tcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9FZGl0Q29tcCk7XG5cbnZhciBfTG9naW5SZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblxudmFyIF9Mb2dpblJlZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Mb2dpblJlZCk7XG5cbnZhciBfRWRpdFJlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzQwKTtcblxudmFyIF9FZGl0UmVkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0VkaXRSZWQpO1xuXG52YXIgX2NvbmZpZ3VyZVN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBzdG9yZSA9ICgwLCBfY29uZmlndXJlU3RvcmUuY29uZmlndXJlU3RvcmUpKHtcblx0YXV0aDogX0xvZ2luUmVkMi5kZWZhdWx0LFxuXHRibG9nRWRpdDogX0VkaXRSZWQyLmRlZmF1bHRcbn0pO1xuXG52YXIgQ29tcCA9ICgwLCBfY29tcG9uZW50LmxheW91dCkoeyBjb21wOiBfRWRpdENvbXAyLmRlZmF1bHQsIGZvckF1dGg6IHRydWUgfSk7XG4oMCwgX3JlYWN0RG9tLnJlbmRlcikoX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdF9yZWFjdFJlZHV4LlByb3ZpZGVyLFxuXHR7IHN0b3JlOiBzdG9yZSB9LFxuXHRfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChDb21wLCBudWxsKVxuKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMzk6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0UmVkdXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG52YXIgX2FjdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXG52YXIgX2NvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIEVkaXRDb21wID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoRWRpdENvbXAsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gRWRpdENvbXAocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVkaXRDb21wKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRWRpdENvbXAuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihFZGl0Q29tcCkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5zdGF0ZSA9IF9leHRlbmRzKHt9LCBwcm9wcy5ibG9nRWRpdCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoRWRpdENvbXAsIFt7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudFdpbGxNb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5pZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goKDAsIF9hY3Rpb24uZ3JhcGhxbCkoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdCTE9HX0dFVCcsXG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuc3RhdGUuaWRcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgICAgICAgaWYgKG5leHRQcm9wcy5ibG9nRWRpdC5zdGF0dXMgPT0gJ3N1Y2Nlc3NfZ2V0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogbmV4dFByb3BzLmJsb2dFZGl0LnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBuZXh0UHJvcHMuYmxvZ0VkaXQudGV4dCxcbiAgICAgICAgICAgICAgICAgICAgcHVibGljOiBuZXh0UHJvcHMuYmxvZ0VkaXQucHVibGljLFxuICAgICAgICAgICAgICAgICAgICBkYXRlOiBuZXh0UHJvcHMuYmxvZ0VkaXQuZGF0ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdmaWVsZENoYW5nZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaWVsZENoYW5nZShlKSB7XG4gICAgICAgICAgICB2YXIgc3RhdGVPYmogPSB7fTtcbiAgICAgICAgICAgIHZhciB2YWwgPSBlLnRhcmdldC5pZCA9PSAncHVibGljJyA/IGUudGFyZ2V0LmNoZWNrZWQgOiBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgIHN0YXRlT2JqW2UudGFyZ2V0LmlkXSA9IHZhbDtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGVPYmopO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdmb3JtU3VibWl0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1TdWJtaXQoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBpZiAodGV4dCAmJiB0ZXh0Lmxlbmd0aCA+IDUxMikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0JMT0dfRURJVF9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnVGV4dCBpcyB0b28gbG9uZyEnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goKDAsIF9hY3Rpb24uZ3JhcGhxbCkoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdCTE9HX0VESVQnLFxuICAgICAgICAgICAgICAgIGlkOiB0aGlzLnN0YXRlLmlkLFxuICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnN0YXRlLnRpdGxlLFxuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuc3RhdGUudGV4dCxcbiAgICAgICAgICAgICAgICBwdWJsaWM6IHRoaXMuc3RhdGUucHVibGljXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGFsZXJ0T3B0cyA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmJsb2dFZGl0LnN0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgICAgIGFsZXJ0T3B0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZGFuZ2VyJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5wcm9wcy5ibG9nRWRpdC5lcnJvciB8fCAnRXJyb3IsIHdyb25nIGJsb2cgZGF0YSdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmJsb2dFZGl0LnN0YXR1cyA9PT0gJ3NlbmQnKSB7XG4gICAgICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdpbmZvJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0xvYWRpbmcsIHBsZWFzZSB3YWl0J1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuYmxvZ0VkaXQuc3RhdHVzID09PSAnc3VjY2Vzc19lZGl0Jykge1xuICAgICAgICAgICAgICAgIGFsZXJ0T3B0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdCbG9nIHNhdmVkIHN1Y2Nlc3NmdWxseSdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnL2Jsb2ctZWRpdC8nICsgX3RoaXMyLnByb3BzLmJsb2dFZGl0LmlkO1xuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ29sJyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdicmVhZGNydW1iJyB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHJlZjogJy9teS1ibG9ncycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTXkgQmxvZ3MnXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2xpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnYWN0aXZlJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS50aXRsZSA/IHRoaXMuc3RhdGUudGl0bGUgOiBudWxsXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZm9ybScsXG4gICAgICAgICAgICAgICAgICAgIHsgb25TdWJtaXQ6IHRoaXMuZm9ybVN1Ym1pdC5iaW5kKHRoaXMpIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Zvcm0tZ3JvdXAnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHRtbEZvcjogJ3RpdGxlJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdUaXRsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2Zvcm0tY29udHJvbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICd0aXRsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdUaXRsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuZmllbGRDaGFuZ2UuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS50aXRsZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZm9ybS1ncm91cCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBodG1sRm9yOiAndGV4dCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVGV4dCdcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZm9ybS1jb250cm9sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnVGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuZmllbGRDaGFuZ2UuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS50ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjaGVja2JveCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAncHVibGljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuZmllbGRDaGFuZ2UuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogISF0aGlzLnN0YXRlLnB1YmxpY1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgUHVibGljJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY29tcG9uZW50LkFsZXJ0TWVzc2FnZSwgeyBvcHRzOiBhbGVydE9wdHMgfSksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdocicsIG51bGwpLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ3N1Ym1pdCcsIGNsYXNzTmFtZTogJ2J0biBidG4tcHJpbWFyeScgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1mbG9wcHktZGlzaycgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwIFNhdmUnXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBFZGl0Q29tcDtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbnZhciBtYXBTdGF0ZVRvUHJvcHMgPSBmdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUpIHtcbiAgICByZXR1cm4gX2V4dGVuZHMoe30sIHN0YXRlKTtcbn07XG5FZGl0Q29tcCA9ICgwLCBfcmVhY3RSZWR1eC5jb25uZWN0KShtYXBTdGF0ZVRvUHJvcHMpKEVkaXRDb21wKTtcbmV4cG9ydHMuZGVmYXVsdCA9IEVkaXRDb21wO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMzQwOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBibG9nSWQgPSB3aW5kb3cubG9jYWxQYXJhbXMuYmxvZ0lkIHx8ICctMSc7XG52YXIgaW5pdFN0YXRlID0ge1xuICAgIGlkOiBwYXJzZUludChibG9nSWQpLFxuICAgIHVzZXJfaWQ6IDAsXG4gICAgdXNlcl9uYW1lOiAnJyxcbiAgICB0aXRsZTogJycsXG4gICAgdGV4dDogJycsXG4gICAgZGF0ZTogJycsXG4gICAgcHVibGljOiBmYWxzZSxcbiAgICBzdGF0dXM6IG51bGxcbn07XG5cbnZhciBibG9nRWRpdCA9IGZ1bmN0aW9uIGJsb2dFZGl0KCkge1xuICAgIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogaW5pdFN0YXRlO1xuICAgIHZhciBhY3Rpb24gPSBhcmd1bWVudHNbMV07XG5cbiAgICB2YXIgZGF0YSA9IG51bGw7XG5cbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ0JMT0dfR0VUX1NFTkQnOlxuICAgICAgICAgICAgcmV0dXJuIF9leHRlbmRzKHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdzZW5kJ1xuICAgICAgICAgICAgfSwgc3RhdGUpO1xuICAgICAgICBjYXNlICdCTE9HX0dFVF9TVUNDRVNTJzpcbiAgICAgICAgICAgIGRhdGEgPSBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnc3VjY2Vzc19nZXQnO1xuICAgICAgICAgICAgZGF0YS5pZCA9IGFjdGlvbi5kYXRhLmdldEJsb2cuaWQ7XG4gICAgICAgICAgICBkYXRhLnVzZXJfaWQgPSBhY3Rpb24uZGF0YS5nZXRCbG9nLnVzZXJJZDtcbiAgICAgICAgICAgIGRhdGEudXNlcl9uYW1lID0gYWN0aW9uLmRhdGEuZ2V0QmxvZy51c2VyTmFtZTtcbiAgICAgICAgICAgIGRhdGEudGV4dCA9IGFjdGlvbi5kYXRhLmdldEJsb2cudGV4dDtcbiAgICAgICAgICAgIGRhdGEudGl0bGUgPSBhY3Rpb24uZGF0YS5nZXRCbG9nLnRpdGxlO1xuICAgICAgICAgICAgZGF0YS5kYXRlID0gYWN0aW9uLmRhdGEuZ2V0QmxvZy5kYXRlO1xuICAgICAgICAgICAgZGF0YS5wdWJsaWMgPSAhIWFjdGlvbi5kYXRhLmdldEJsb2cucHVibGljO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIGNhc2UgJ0JMT0dfR0VUX0VSUk9SJzpcbiAgICAgICAgICAgIHJldHVybiBfZXh0ZW5kcyh7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgIGVycm9yOiBhY3Rpb24uZXJyb3JcbiAgICAgICAgICAgIH0sIHN0YXRlKTtcblxuICAgICAgICBjYXNlICdCTE9HX0VESVRfU0VORCc6XG4gICAgICAgICAgICBkYXRhID0gX2V4dGVuZHMoe30sIHN0YXRlKTtcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3NlbmQnO1xuICAgICAgICAgICAgZGF0YS5pZCA9IGFjdGlvbi5pZDtcbiAgICAgICAgICAgIGRhdGEudGV4dCA9IGFjdGlvbi50ZXh0O1xuICAgICAgICAgICAgZGF0YS50aXRsZSA9IGFjdGlvbi50aXRsZTtcbiAgICAgICAgICAgIGRhdGEucHVibGljID0gYWN0aW9uLnB1YmxpYztcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBjYXNlICdCTE9HX0VESVRfU1VDQ0VTUyc6XG4gICAgICAgICAgICBkYXRhID0gX2V4dGVuZHMoe30sIHN0YXRlKTtcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3N1Y2Nlc3NfZWRpdCc7XG4gICAgICAgICAgICBkYXRhLmlkID0gYWN0aW9uLmRhdGEuZWRpdEJsb2cuaWQ7XG4gICAgICAgICAgICBkYXRhLnRleHQgPSBhY3Rpb24uZGF0YS5lZGl0QmxvZy50ZXh0O1xuICAgICAgICAgICAgZGF0YS50aXRsZSA9IGFjdGlvbi5kYXRhLmVkaXRCbG9nLnRpdGxlO1xuICAgICAgICAgICAgZGF0YS5wdWJsaWMgPSBhY3Rpb24uZGF0YS5lZGl0QmxvZy5wdWJsaWM7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgY2FzZSAnQkxPR19FRElUX0VSUk9SJzpcbiAgICAgICAgICAgIGRhdGEgPSBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnZXJyb3InO1xuICAgICAgICAgICAgZGF0YS5lcnJvciA9IGFjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gYmxvZ0VkaXQ7XG5cbi8qKiovIH0pXG5cbn0sWzMzN10pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBibG9nRWRpdC5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHJlbmRlciB9IGZyb20gJ3JlYWN0LWRvbSdcbmltcG9ydCB7IFByb3ZpZGVyIH0gZnJvbSAncmVhY3QtcmVkdXgnXG5cbmltcG9ydCAnYm9vdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5jc3MnO1xuaW1wb3J0ICdyZWFjdC1kcmFmdC13eXNpd3lnL2Rpc3QvcmVhY3QtZHJhZnQtd3lzaXd5Zy5jc3MnO1xuaW1wb3J0ICcuL3N0eWxlcy9pbmRleC5zY3NzJ1xuXG5pbXBvcnQge2xheW91dH0gZnJvbSAnLi9oZWxwZXJzL2NvbXBvbmVudCdcbmltcG9ydCBFZGl0Q29tcCBmcm9tICcuL2Jsb2cvRWRpdENvbXAnXG5cbmltcG9ydCBhdXRoIGZyb20gJy4vYXV0aC9Mb2dpblJlZCdcbmltcG9ydCBibG9nRWRpdCBmcm9tICcuL2Jsb2cvRWRpdFJlZCdcblxuaW1wb3J0IHtjb25maWd1cmVTdG9yZX0gZnJvbSAnLi9oZWxwZXJzL2NvbmZpZ3VyZVN0b3JlJ1xuXG5cbmxldCBzdG9yZSA9IGNvbmZpZ3VyZVN0b3JlKHtcblx0YXV0aDogYXV0aCxcblx0YmxvZ0VkaXQ6IGJsb2dFZGl0LFxufSk7XG5cbmxldCBDb21wID0gbGF5b3V0KHtjb21wOiBFZGl0Q29tcCwgZm9yQXV0aDogdHJ1ZX0pO1xucmVuZGVyKFxuXHQ8UHJvdmlkZXIgc3RvcmU9e3N0b3JlfT5cblx0XHQ8Q29tcCAvPlxuXHQ8L1Byb3ZpZGVyPixcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKVxuKVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3RhdGljX3NyYy9ibG9nRWRpdC5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCdcbmltcG9ydCB7YXBpLCBncmFwaHFsfSBmcm9tICcuLi9oZWxwZXJzL2FjdGlvbidcbmltcG9ydCB7QWxlcnRNZXNzYWdlfSBmcm9tICcuLi9oZWxwZXJzL2NvbXBvbmVudCdcblxuXG5jbGFzcyBFZGl0Q29tcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0gey4uLnByb3BzLmJsb2dFZGl0fTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQgKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pZCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5wcm9wcy5kaXNwYXRjaChncmFwaHFsKHtcbiAgICAgICAgICAgIHR5cGU6ICdCTE9HX0dFVCcsXG4gICAgICAgICAgICBpZDogdGhpcy5zdGF0ZS5pZCxcbiAgICAgICAgfSkpO1xuXG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICAgIGlmIChuZXh0UHJvcHMuYmxvZ0VkaXQuc3RhdHVzID09ICdzdWNjZXNzX2dldCcpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHRpdGxlOiBuZXh0UHJvcHMuYmxvZ0VkaXQudGl0bGUsXG4gICAgICAgICAgICAgICAgdGV4dDogbmV4dFByb3BzLmJsb2dFZGl0LnRleHQsXG4gICAgICAgICAgICAgICAgcHVibGljOiBuZXh0UHJvcHMuYmxvZ0VkaXQucHVibGljLFxuICAgICAgICAgICAgICAgIGRhdGU6IG5leHRQcm9wcy5ibG9nRWRpdC5kYXRlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuXG4gICAgZmllbGRDaGFuZ2UgKGUpIHtcbiAgICAgICAgbGV0IHN0YXRlT2JqID0ge307XG4gICAgICAgIGxldCB2YWwgPSAoZS50YXJnZXQuaWQgPT0gJ3B1YmxpYycpID8gZS50YXJnZXQuY2hlY2tlZCA6IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICBzdGF0ZU9ialtlLnRhcmdldC5pZF0gPSB2YWw7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGVPYmopO1xuICAgIH1cbiAgICBcbiAgICBmb3JtU3VibWl0IChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAodGV4dCAmJiAodGV4dC5sZW5ndGggPiA1MTIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ0JMT0dfRURJVF9FUlJPUicsXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdUZXh0IGlzIHRvbyBsb25nIScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goZ3JhcGhxbCh7XG4gICAgICAgICAgICB0eXBlOiAnQkxPR19FRElUJyxcbiAgICAgICAgICAgIGlkOiB0aGlzLnN0YXRlLmlkLFxuICAgICAgICAgICAgdGl0bGU6IHRoaXMuc3RhdGUudGl0bGUsXG4gICAgICAgICAgICB0ZXh0OiB0aGlzLnN0YXRlLnRleHQsXG4gICAgICAgICAgICBwdWJsaWM6IHRoaXMuc3RhdGUucHVibGljLFxuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgcmVuZGVyICgpIHtcbiAgICAgICAgbGV0IGFsZXJ0T3B0cyA9IG51bGw7XG4gICAgXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmJsb2dFZGl0LnN0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2RhbmdlcicsXG4gICAgICAgICAgICAgICAgdGV4dDogdGhpcy5wcm9wcy5ibG9nRWRpdC5lcnJvciB8fCAnRXJyb3IsIHdyb25nIGJsb2cgZGF0YSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmJsb2dFZGl0LnN0YXR1cyA9PT0gJ3NlbmQnKSB7XG4gICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnaW5mbycsXG4gICAgICAgICAgICAgICAgdGV4dDogJ0xvYWRpbmcsIHBsZWFzZSB3YWl0JyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmJsb2dFZGl0LnN0YXR1cyA9PT0gJ3N1Y2Nlc3NfZWRpdCcpIHtcbiAgICAgICAgICAgIGFsZXJ0T3B0cyA9IHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiAnQmxvZyBzYXZlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gJy9ibG9nLWVkaXQvJyArIHRoaXMucHJvcHMuYmxvZ0VkaXQuaWQ7XG4gICAgICAgICAgICB9LCAxMDAwKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIDxkaXY+XG4gICAgICAgICAgICAgPG9sIGNsYXNzTmFtZT1cImJyZWFkY3J1bWJcIj5cbiAgICAgICAgICAgICAgICA8bGk+PGEgaHJlZj1cIi9teS1ibG9nc1wiPk15IEJsb2dzPC9hPjwvbGk+XG4gICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT1cImFjdGl2ZVwiPnt0aGlzLnN0YXRlLnRpdGxlID8gdGhpcy5zdGF0ZS50aXRsZSA6IG51bGx9PC9saT5cbiAgICAgICAgICAgIDwvb2w+XG5cbiAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXs6OnRoaXMuZm9ybVN1Ym1pdH0gPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInRpdGxlXCI+VGl0bGU8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIiBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZvcm0tY29udHJvbFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJ0aXRsZVwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJUaXRsZVwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9ezo6dGhpcy5maWVsZENoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnRpdGxlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInRleHRcIj5UZXh0PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZvcm0tY29udHJvbFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3RleHQnXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nVGV4dCdcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXs6OnRoaXMuZmllbGRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS50ZXh0fVxuICAgICAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaGVja2JveFwiPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3B1YmxpYycgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9ezo6dGhpcy5maWVsZENoYW5nZX0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZCA9IHshISB0aGlzLnN0YXRlLnB1YmxpY31cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+IFB1YmxpY1xuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPEFsZXJ0TWVzc2FnZSBvcHRzPXthbGVydE9wdHN9IC8+XG5cbiAgICAgICAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICAgICAgICA8ZGl2ID5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1wcmltYXJ5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2dseXBoaWNvbiBnbHlwaGljb24tZmxvcHB5LWRpc2snPjwvc3Bhbj4mbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIFNhdmVcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGJyIC8+XG4gICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICB9XG59XG5cbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IChzdGF0ZSkgPT4ge1xuICAgIHJldHVybiB7Li4uc3RhdGV9XG59XG5FZGl0Q29tcCA9IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzKShFZGl0Q29tcClcbmV4cG9ydCBkZWZhdWx0IEVkaXRDb21wXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zdGF0aWNfc3JjL2Jsb2cvRWRpdENvbXAuanMiLCJsZXQgYmxvZ0lkID0gd2luZG93LmxvY2FsUGFyYW1zLmJsb2dJZCB8fCAnLTEnO1xubGV0IGluaXRTdGF0ZSA9IHtcbiAgICBpZDogcGFyc2VJbnQoYmxvZ0lkKSxcbiAgICB1c2VyX2lkOiAwLFxuICAgIHVzZXJfbmFtZTogJycsXG4gICAgdGl0bGU6ICcnLFxuICAgIHRleHQ6ICcnLFxuICAgIGRhdGU6ICcnLFxuICAgIHB1YmxpYzogZmFsc2UsXG4gICAgc3RhdHVzOiBudWxsLFxufTtcblxuY29uc3QgYmxvZ0VkaXQgPSAoc3RhdGUgPSBpbml0U3RhdGUsIGFjdGlvbikgPT4ge1xuICAgIGxldCBkYXRhID0gbnVsbDtcblxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnQkxPR19HRVRfU0VORCc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ3NlbmQnLFxuICAgICAgICAgICAgICAgIC4uLnN0YXRlXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdCTE9HX0dFVF9TVUNDRVNTJzpcbiAgICAgICAgICAgIGRhdGEgPSB7Li4uc3RhdGV9O1xuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnc3VjY2Vzc19nZXQnO1xuICAgICAgICAgICAgZGF0YS5pZCA9IGFjdGlvbi5kYXRhLmdldEJsb2cuaWQ7XG4gICAgICAgICAgICBkYXRhLnVzZXJfaWQgPSBhY3Rpb24uZGF0YS5nZXRCbG9nLnVzZXJJZDtcbiAgICAgICAgICAgIGRhdGEudXNlcl9uYW1lID0gYWN0aW9uLmRhdGEuZ2V0QmxvZy51c2VyTmFtZTtcbiAgICAgICAgICAgIGRhdGEudGV4dCA9IGFjdGlvbi5kYXRhLmdldEJsb2cudGV4dDtcbiAgICAgICAgICAgIGRhdGEudGl0bGUgPSBhY3Rpb24uZGF0YS5nZXRCbG9nLnRpdGxlO1xuICAgICAgICAgICAgZGF0YS5kYXRlID0gYWN0aW9uLmRhdGEuZ2V0QmxvZy5kYXRlO1xuICAgICAgICAgICAgZGF0YS5wdWJsaWMgPSAhISBhY3Rpb24uZGF0YS5nZXRCbG9nLnB1YmxpYztcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBjYXNlICdCTE9HX0dFVF9FUlJPUic6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICBlcnJvcjogYWN0aW9uLmVycm9yLFxuICAgICAgICAgICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICBjYXNlICdCTE9HX0VESVRfU0VORCc6XG4gICAgICAgICAgICBkYXRhID0gey4uLnN0YXRlfTtcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3NlbmQnO1xuICAgICAgICAgICAgZGF0YS5pZCA9IGFjdGlvbi5pZDtcbiAgICAgICAgICAgIGRhdGEudGV4dCA9IGFjdGlvbi50ZXh0O1xuICAgICAgICAgICAgZGF0YS50aXRsZSA9IGFjdGlvbi50aXRsZTtcbiAgICAgICAgICAgIGRhdGEucHVibGljID0gYWN0aW9uLnB1YmxpYztcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBjYXNlICdCTE9HX0VESVRfU1VDQ0VTUyc6XG4gICAgICAgICAgICBkYXRhID0gey4uLnN0YXRlfTtcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3N1Y2Nlc3NfZWRpdCc7XG4gICAgICAgICAgICBkYXRhLmlkID0gYWN0aW9uLmRhdGEuZWRpdEJsb2cuaWQ7XG4gICAgICAgICAgICBkYXRhLnRleHQgPSBhY3Rpb24uZGF0YS5lZGl0QmxvZy50ZXh0O1xuICAgICAgICAgICAgZGF0YS50aXRsZSA9IGFjdGlvbi5kYXRhLmVkaXRCbG9nLnRpdGxlO1xuICAgICAgICAgICAgZGF0YS5wdWJsaWMgPSBhY3Rpb24uZGF0YS5lZGl0QmxvZy5wdWJsaWM7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgY2FzZSAnQkxPR19FRElUX0VSUk9SJzpcbiAgICAgICAgICAgIGRhdGEgPSB7Li4uc3RhdGV9O1xuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnZXJyb3InO1xuICAgICAgICAgICAgZGF0YS5lcnJvciA9IGFjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgYmxvZ0VkaXRcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zdGF0aWNfc3JjL2Jsb2cvRWRpdFJlZC5qcyJdLCJzb3VyY2VSb290IjoiIn0=
webpackJsonp([6],{328:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=a(1),l=r(s),n=a(10),o=a(7);a(16),a(17);var p=a(8),i=a(329),u=r(i),c=a(18),f=r(c),d=a(330),m=r(d),g=a(19),h=(0,g.configureStore)({auth:f.default,postList:m.default}),b=(0,p.layout)({comp:u.default,forAuth:!1});(0,n.render)(l.default.createElement(o.Provider,{store:h},l.default.createElement(b,null)),document.getElementById("root"))},329:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),p=a(1),i=function(e){return e&&e.__esModule?e:{default:e}}(p),u=a(7),c=a(21),f=a(29),d=a(8),m=function(e){function t(){return r(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"render",value:function(){var e=null;return this.props.blog&&(e=i.default.createElement("div",{className:"panel panel-default"},i.default.createElement("div",{className:"panel-heading"},i.default.createElement("h4",{className:"panel-title"},this.props.blog.title)),i.default.createElement("div",{className:"panel-body"},this.props.blog.text),i.default.createElement("div",{className:"panel-footer"},i.default.createElement("p",null,i.default.createElement("span",{className:"glyphicon glyphicon-user"})," ",this.props.blog.userName," | ",i.default.createElement("span",{className:"glyphicon glyphicon-time"})," ",this.props.blog.date)))),e}}]),t}(i.default.Component),g=function(e){function t(e){r(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={start:a.props.postList.start,blog:a.props.postList.blog,posts:a.props.postList.posts},a}return l(t,e),o(t,[{key:"componentWillMount",value:function(){this.changePage()}},{key:"changePage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.props.dispatch((0,c.graphql)({type:"BLOG_DETAIL",start:e,perpage:this.props.postList.perpage,blogId:this.props.postList.blogId}))}},{key:"getPostItems",value:function(){var e=this;if(!e.props.postList.posts||!e.props.postList.posts.length)return null;var t=(0,f.chunk)(this.props.postList.posts,3);return(0,f.map)(t,function(t){var a=(0,f.map)(t,function(t){return i.default.createElement("div",{className:"col-md-4"},i.default.createElement("div",{className:"panel panel-default"},i.default.createElement("div",{className:"panel-heading"},i.default.createElement("h4",{className:"panel-title"},i.default.createElement("a",{href:"/post/"+e.props.postList.blog.id+"/"+t.id},t.title))),i.default.createElement("div",{className:"panel-body"},t.description),i.default.createElement("div",{className:"panel-footer"},i.default.createElement("p",null,i.default.createElement("span",{className:"glyphicon glyphicon-user"})," ",t.userName),i.default.createElement("p",null,i.default.createElement("span",{className:"glyphicon glyphicon-time"})," ",t.date))))});return i.default.createElement("div",{className:"row"},a)})}},{key:"render",value:function(){var e=null;"error"===this.props.postList.status?e={className:"danger",text:this.props.postList.error}:"send"===this.props.status&&(e={className:"info",text:"Loading, please wait"});var t={start:this.props.postList.start,perpage:this.props.postList.perpage,count:this.props.postList.count,items:this.getPostItems(),changePage:this.changePage.bind(this)};return i.default.createElement("div",null,i.default.createElement(d.AlertMessage,{opts:e}),i.default.createElement("ol",{className:"breadcrumb"},i.default.createElement("li",null,i.default.createElement("a",{href:"/blogs"},"Blogs")),i.default.createElement("li",{className:"active"},this.props.postList.blog?this.props.postList.blog.title:null)),i.default.createElement(m,{blog:this.props.postList.blog}),i.default.createElement(d.PaginatorLayout,{param:t}))}}]),t}(i.default.Component),h=function(e){return n({},e)};g=(0,u.connect)(h)(g),t.default=g},330:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s=(a(29),{blogId:window.localParams.blogId?parseInt(window.localParams.blogId):null,start:window.localParams.start?parseInt(window.localParams.start):0,perpage:window.localParams.perpage?parseInt(window.localParams.perpage):9,count:0,blog:null,posts:[],status:null}),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1],a=r({},e);switch(t.type){case"BLOG_DETAIL_SEND":return a.start=t.start,a.status="send",a;case"BLOG_DETAIL_SUCCESS":return a.status="success",a.count=t.data.getBlogDetail.count,a.blog=t.data.getBlogDetail.blog,a.posts=t.data.getBlogDetail.posts,a;case"BLOG_DETAIL_ERROR":return a.status="error",a.error=t.error,a;default:return e}};t.default=l}},[328]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYmxvZ0RldGFpbC5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWNfc3JjL2Jsb2dEZXRhaWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljX3NyYy9wb3N0L0xpc3RDb21wLmpzIiwid2VicGFjazovLy8uL3N0YXRpY19zcmMvcG9zdC9MaXN0UmVkLmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucCIsIjMyOCIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX3JlYWN0IiwiX3JlYWN0MiIsIl9yZWFjdERvbSIsIl9yZWFjdFJlZHV4IiwiX2NvbXBvbmVudCIsIl9MaXN0Q29tcCIsIl9MaXN0Q29tcDIiLCJfTG9naW5SZWQiLCJfTG9naW5SZWQyIiwiX0xpc3RSZWQiLCJfTGlzdFJlZDIiLCJfY29uZmlndXJlU3RvcmUiLCJzdG9yZSIsImNvbmZpZ3VyZVN0b3JlIiwiYXV0aCIsInBvc3RMaXN0IiwiQ29tcCIsImxheW91dCIsImNvbXAiLCJMaXN0Q29tcCIsImZvckF1dGgiLCJyZW5kZXIiLCJjcmVhdGVFbGVtZW50IiwiUHJvdmlkZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiMzI5IiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsImNhbGwiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsInByb3RvdHlwZSIsIk9iamVjdCIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwidmFsdWUiLCJlbnVtZXJhYmxlIiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImRlZmluZVByb3BlcnR5IiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX2FjdGlvbiIsIl9sb2Rhc2giLCJCbG9nQ29tcCIsIl9SZWFjdCRDb21wb25lbnQiLCJ0aGlzIiwiZ2V0UHJvdG90eXBlT2YiLCJhcHBseSIsInRwbCIsImJsb2ciLCJjbGFzc05hbWUiLCJ0aXRsZSIsInRleHQiLCJ1c2VyTmFtZSIsImRhdGUiLCJSZWFjdCIsIkNvbXBvbmVudCIsIl9SZWFjdCRDb21wb25lbnQyIiwiX3RoaXMyIiwic3RhdGUiLCJzdGFydCIsInBvc3RzIiwiY2hhbmdlUGFnZSIsInVuZGVmaW5lZCIsImRpc3BhdGNoIiwiZ3JhcGhxbCIsInR5cGUiLCJwZXJwYWdlIiwiYmxvZ0lkIiwiY2h1bmtlZEl0ZW1zIiwiY2h1bmsiLCJtYXAiLCJwYXJ0aXRpb24iLCJwb3N0IiwiaHJlZiIsImlkIiwiZGVzY3JpcHRpb24iLCJhbGVydE9wdHMiLCJzdGF0dXMiLCJlcnJvciIsInBhZ2VyUGFyYW0iLCJjb3VudCIsIml0ZW1zIiwiZ2V0UG9zdEl0ZW1zIiwiYmluZCIsIkFsZXJ0TWVzc2FnZSIsIm9wdHMiLCJQYWdpbmF0b3JMYXlvdXQiLCJwYXJhbSIsIm1hcFN0YXRlVG9Qcm9wcyIsImNvbm5lY3QiLCIzMzAiLCJpbml0U3RhdGUiLCJ3aW5kb3ciLCJsb2NhbFBhcmFtcyIsInBhcnNlSW50IiwiYWN0aW9uIiwiZGF0YSIsImdldEJsb2dEZXRhaWwiXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLElBRVJDLElBQ0EsU0FBVUMsRUFBUUMsRUFBU0MsR0FFakMsWUErQkEsU0FBU0MsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsR0NwQ3ZGLEdBQUFHLEdBQUFM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QUFLaEQsS0FBTytDLEVBQU9DLEtBQUtDLGNBQWNqRCxLQUN0Q2dELEVBQUtwQyxNQUFRbUMsRUFBT0MsS0FBS0MsY0FBY3JDLE1BRWhDb0MsQ0FDWCxLQUFLLG9CQUdELE1BRkFBLEdBQUtuQixPQUFTLFFBQ2RtQixFQUFLbEIsTUFBUWlCLEVBQU9qQixNQUNia0IsQ0FFWCxTQUNJLE1BQU90QyxJSG9VbkJ4RixHQUFRSyxRR2pVT2dCLEtIcVVaIiwiZmlsZSI6ImJsb2dEZXRhaWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3ZWJwYWNrSnNvbnAoWzZdLHtcblxuLyoqKi8gMzI4OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblxudmFyIF9yZWFjdFJlZHV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cbl9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXG52YXIgX2NvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbnZhciBfTGlzdENvbXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyOSk7XG5cbnZhciBfTGlzdENvbXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTGlzdENvbXApO1xuXG52YXIgX0xvZ2luUmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cbnZhciBfTG9naW5SZWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTG9naW5SZWQpO1xuXG52YXIgX0xpc3RSZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMCk7XG5cbnZhciBfTGlzdFJlZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9MaXN0UmVkKTtcblxudmFyIF9jb25maWd1cmVTdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgc3RvcmUgPSAoMCwgX2NvbmZpZ3VyZVN0b3JlLmNvbmZpZ3VyZVN0b3JlKSh7XG5cdGF1dGg6IF9Mb2dpblJlZDIuZGVmYXVsdCxcblx0cG9zdExpc3Q6IF9MaXN0UmVkMi5kZWZhdWx0XG59KTtcblxudmFyIENvbXAgPSAoMCwgX2NvbXBvbmVudC5sYXlvdXQpKHsgY29tcDogX0xpc3RDb21wMi5kZWZhdWx0LCBmb3JBdXRoOiBmYWxzZSB9KTtcbigwLCBfcmVhY3REb20ucmVuZGVyKShfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0X3JlYWN0UmVkdXguUHJvdmlkZXIsXG5cdHsgc3RvcmU6IHN0b3JlIH0sXG5cdF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KENvbXAsIG51bGwpXG4pLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDMyOTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3RSZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbnZhciBfYWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cbnZhciBfbG9kYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cbnZhciBfY29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgQmxvZ0NvbXAgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhCbG9nQ29tcCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBCbG9nQ29tcCgpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJsb2dDb21wKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEJsb2dDb21wLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQmxvZ0NvbXApKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQmxvZ0NvbXAsIFt7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdHBsID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmJsb2cpIHtcblxuICAgICAgICAgICAgICAgIHRwbCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbCBwYW5lbC1kZWZhdWx0JyB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1oZWFkaW5nJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2g0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLXRpdGxlJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYmxvZy50aXRsZVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1ib2R5JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5ibG9nLnRleHRcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtZm9vdGVyJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tdXNlcicgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJsb2cudXNlck5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwfFxceEEwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi10aW1lJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXFx4QTAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYmxvZy5kYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRwbDtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBCbG9nQ29tcDtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbnZhciBMaXN0Q29tcCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50Mikge1xuICAgIF9pbmhlcml0cyhMaXN0Q29tcCwgX1JlYWN0JENvbXBvbmVudDIpO1xuXG4gICAgZnVuY3Rpb24gTGlzdENvbXAocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExpc3RDb21wKTtcblxuICAgICAgICB2YXIgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKExpc3RDb21wLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTGlzdENvbXApKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMyLnN0YXRlID0ge1xuICAgICAgICAgICAgc3RhcnQ6IF90aGlzMi5wcm9wcy5wb3N0TGlzdC5zdGFydCxcbiAgICAgICAgICAgIGJsb2c6IF90aGlzMi5wcm9wcy5wb3N0TGlzdC5ibG9nLFxuICAgICAgICAgICAgcG9zdHM6IF90aGlzMi5wcm9wcy5wb3N0TGlzdC5wb3N0c1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX3RoaXMyO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhMaXN0Q29tcCwgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlUGFnZSgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjaGFuZ2VQYWdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNoYW5nZVBhZ2UoKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDA7XG5cbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goKDAsIF9hY3Rpb24uZ3JhcGhxbCkoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdCTE9HX0RFVEFJTCcsXG4gICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICAgICAgICAgIHBlcnBhZ2U6IHRoaXMucHJvcHMucG9zdExpc3QucGVycGFnZSxcbiAgICAgICAgICAgICAgICBibG9nSWQ6IHRoaXMucHJvcHMucG9zdExpc3QuYmxvZ0lkXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFBvc3RJdGVtcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQb3N0SXRlbXMoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoIXNlbGYucHJvcHMucG9zdExpc3QucG9zdHMgfHwgIXNlbGYucHJvcHMucG9zdExpc3QucG9zdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjaHVua2VkSXRlbXMgPSAoMCwgX2xvZGFzaC5jaHVuaykodGhpcy5wcm9wcy5wb3N0TGlzdC5wb3N0cywgMyk7XG4gICAgICAgICAgICB2YXIgcG9zdHMgPSAoMCwgX2xvZGFzaC5tYXApKGNodW5rZWRJdGVtcywgZnVuY3Rpb24gKHBvc3RzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnRpdGlvbiA9ICgwLCBfbG9kYXNoLm1hcCkocG9zdHMsIGZ1bmN0aW9uIChwb3N0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wtbWQtNCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwgcGFuZWwtZGVmYXVsdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtaGVhZGluZycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaDQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC10aXRsZScgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGhyZWY6IFwiL3Bvc3QvXCIgKyBzZWxmLnByb3BzLnBvc3RMaXN0LmJsb2cuaWQgKyBcIi9cIiArIHBvc3QuaWQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0LnRpdGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1ib2R5JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0LmRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtZm9vdGVyJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi11c2VyJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0LnVzZXJOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLXRpbWUnIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QuZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncm93JyB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJ0aXRpb25cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcG9zdHM7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgYWxlcnRPcHRzID0gbnVsbCxcbiAgICAgICAgICAgICAgICBwb3N0cyA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnBvc3RMaXN0LnN0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgICAgIGFsZXJ0T3B0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZGFuZ2VyJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5wcm9wcy5wb3N0TGlzdC5lcnJvclxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuc3RhdHVzID09PSAnc2VuZCcpIHtcbiAgICAgICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2luZm8nLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnTG9hZGluZywgcGxlYXNlIHdhaXQnXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHBhZ2VyUGFyYW0gPSB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHRoaXMucHJvcHMucG9zdExpc3Quc3RhcnQsXG4gICAgICAgICAgICAgICAgcGVycGFnZTogdGhpcy5wcm9wcy5wb3N0TGlzdC5wZXJwYWdlLFxuICAgICAgICAgICAgICAgIGNvdW50OiB0aGlzLnByb3BzLnBvc3RMaXN0LmNvdW50LFxuICAgICAgICAgICAgICAgIGl0ZW1zOiB0aGlzLmdldFBvc3RJdGVtcygpLFxuICAgICAgICAgICAgICAgIGNoYW5nZVBhZ2U6IHRoaXMuY2hhbmdlUGFnZS5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY29tcG9uZW50LkFsZXJ0TWVzc2FnZSwgeyBvcHRzOiBhbGVydE9wdHMgfSksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdvbCcsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnYnJlYWRjcnVtYicgfSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGhyZWY6ICcvYmxvZ3MnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Jsb2dzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2FjdGl2ZScgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucG9zdExpc3QuYmxvZyA/IHRoaXMucHJvcHMucG9zdExpc3QuYmxvZy50aXRsZSA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQmxvZ0NvbXAsIHsgYmxvZzogdGhpcy5wcm9wcy5wb3N0TGlzdC5ibG9nIH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb21wb25lbnQuUGFnaW5hdG9yTGF5b3V0LCB7IHBhcmFtOiBwYWdlclBhcmFtIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIExpc3RDb21wO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxudmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSkge1xuICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xufTtcbkxpc3RDb21wID0gKDAsIF9yZWFjdFJlZHV4LmNvbm5lY3QpKG1hcFN0YXRlVG9Qcm9wcykoTGlzdENvbXApO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBMaXN0Q29tcDtcblxuLyoqKi8gfSksXG5cbi8qKiovIDMzMDpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2xvZGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXG52YXIgaW5pdFN0YXRlID0ge1xuICAgIGJsb2dJZDogd2luZG93LmxvY2FsUGFyYW1zLmJsb2dJZCA/IHBhcnNlSW50KHdpbmRvdy5sb2NhbFBhcmFtcy5ibG9nSWQpIDogbnVsbCxcbiAgICBzdGFydDogd2luZG93LmxvY2FsUGFyYW1zLnN0YXJ0ID8gcGFyc2VJbnQod2luZG93LmxvY2FsUGFyYW1zLnN0YXJ0KSA6IDAsXG4gICAgcGVycGFnZTogd2luZG93LmxvY2FsUGFyYW1zLnBlcnBhZ2UgPyBwYXJzZUludCh3aW5kb3cubG9jYWxQYXJhbXMucGVycGFnZSkgOiA5LFxuICAgIGNvdW50OiAwLFxuICAgIGJsb2c6IG51bGwsXG4gICAgcG9zdHM6IFtdLFxuICAgIHN0YXR1czogbnVsbFxufTtcblxudmFyIHBvc3RMaXN0ID0gZnVuY3Rpb24gcG9zdExpc3QoKSB7XG4gICAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBpbml0U3RhdGU7XG4gICAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50c1sxXTtcblxuICAgIHZhciBkYXRhID0gX2V4dGVuZHMoe30sIHN0YXRlKTtcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ0JMT0dfREVUQUlMX1NFTkQnOlxuICAgICAgICAgICAgZGF0YS5zdGFydCA9IGFjdGlvbi5zdGFydDtcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3NlbmQnO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIGNhc2UgJ0JMT0dfREVUQUlMX1NVQ0NFU1MnOlxuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnc3VjY2Vzcyc7XG4gICAgICAgICAgICBkYXRhLmNvdW50ID0gYWN0aW9uLmRhdGEuZ2V0QmxvZ0RldGFpbC5jb3VudDtcbiAgICAgICAgICAgIGRhdGEuYmxvZyA9IGFjdGlvbi5kYXRhLmdldEJsb2dEZXRhaWwuYmxvZztcbiAgICAgICAgICAgIGRhdGEucG9zdHMgPSBhY3Rpb24uZGF0YS5nZXRCbG9nRGV0YWlsLnBvc3RzO1xuXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgY2FzZSAnQkxPR19ERVRBSUxfRVJST1InOlxuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnZXJyb3InO1xuICAgICAgICAgICAgZGF0YS5lcnJvciA9IGFjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxufTtcbmV4cG9ydHMuZGVmYXVsdCA9IHBvc3RMaXN0O1xuXG4vKioqLyB9KVxuXG59LFszMjhdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYmxvZ0RldGFpbC5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHJlbmRlciB9IGZyb20gJ3JlYWN0LWRvbSdcbmltcG9ydCB7IFByb3ZpZGVyIH0gZnJvbSAncmVhY3QtcmVkdXgnXG5cbmltcG9ydCAnYm9vdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5jc3MnO1xuaW1wb3J0ICcuL3N0eWxlcy9pbmRleC5zY3NzJ1xuXG5pbXBvcnQge2xheW91dH0gZnJvbSAnLi9oZWxwZXJzL2NvbXBvbmVudCdcbmltcG9ydCBMaXN0Q29tcCBmcm9tICcuL3Bvc3QvTGlzdENvbXAnXG5cbmltcG9ydCBhdXRoIGZyb20gJy4vYXV0aC9Mb2dpblJlZCdcbmltcG9ydCBwb3N0TGlzdCBmcm9tICcuL3Bvc3QvTGlzdFJlZCdcblxuaW1wb3J0IHtjb25maWd1cmVTdG9yZX0gZnJvbSAnLi9oZWxwZXJzL2NvbmZpZ3VyZVN0b3JlJ1xuXG5sZXQgc3RvcmUgPSBjb25maWd1cmVTdG9yZSh7XG5cdGF1dGg6IGF1dGgsXG5cdHBvc3RMaXN0OiBwb3N0TGlzdCxcbn0pO1xuXG5sZXQgQ29tcCA9IGxheW91dCh7Y29tcDogTGlzdENvbXAsIGZvckF1dGg6IGZhbHNlfSk7XG5yZW5kZXIoXG5cdDxQcm92aWRlciBzdG9yZT17c3RvcmV9PlxuXHRcdDxDb21wIC8+XG5cdDwvUHJvdmlkZXI+LFxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpXG4pXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3RhdGljX3NyYy9ibG9nRGV0YWlsLmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgeyBncmFwaHFsIH0gZnJvbSAnLi4vaGVscGVycy9hY3Rpb24nO1xuaW1wb3J0IHtmb3JFYWNoLCBjaHVuaywgbWFwfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHtBbGVydE1lc3NhZ2UsIFBhZ2luYXRvckxheW91dH0gZnJvbSAnLi4vaGVscGVycy9jb21wb25lbnQnO1xuXG5jbGFzcyBCbG9nQ29tcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgcmVuZGVyICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgdHBsID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYmxvZykge1xuXG4gICAgICAgICAgICB0cGwgPSA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsIHBhbmVsLWRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1oZWFkaW5nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwicGFuZWwtdGl0bGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5ibG9nLnRpdGxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuYmxvZy50ZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIDxkaXYgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IHRoaXMucHJvcHMuYmxvZy50ZXh0fX0gLz4gKi99XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWZvb3RlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi11c2VyXCI+PC9zcGFuPiZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmJsb2cudXNlck5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7fCZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tdGltZVwiPjwvc3Bhbj4mbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5ibG9nLmRhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cGw7XG4gICAgfVxufVxuXG5cblxuXG5cbmNsYXNzIExpc3RDb21wIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnByb3BzLnBvc3RMaXN0LnN0YXJ0LFxuICAgICAgICAgICAgYmxvZzogdGhpcy5wcm9wcy5wb3N0TGlzdC5ibG9nLFxuICAgICAgICAgICAgcG9zdHM6IHRoaXMucHJvcHMucG9zdExpc3QucG9zdHMsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQgKCkge1xuICAgICAgICB0aGlzLmNoYW5nZVBhZ2UoKTtcbiAgICB9XG5cbiAgICBjaGFuZ2VQYWdlIChzdGFydCA9IDApIHtcbiAgICAgICAgdGhpcy5wcm9wcy5kaXNwYXRjaChncmFwaHFsKHtcbiAgICAgICAgICAgIHR5cGU6ICdCTE9HX0RFVEFJTCcsXG4gICAgICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgICAgICBwZXJwYWdlOiB0aGlzLnByb3BzLnBvc3RMaXN0LnBlcnBhZ2UsXG4gICAgICAgICAgICBibG9nSWQ6IHRoaXMucHJvcHMucG9zdExpc3QuYmxvZ0lkLFxuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgZ2V0UG9zdEl0ZW1zICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhIHNlbGYucHJvcHMucG9zdExpc3QucG9zdHMgfHwgXG4gICAgICAgICAgICAhIHNlbGYucHJvcHMucG9zdExpc3QucG9zdHMubGVuZ3RoXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2h1bmtlZEl0ZW1zID0gY2h1bmsodGhpcy5wcm9wcy5wb3N0TGlzdC5wb3N0cywgMyk7XG4gICAgICAgIGxldCBwb3N0cyA9IG1hcChjaHVua2VkSXRlbXMsIHBvc3RzID0+IHtcbiAgICAgICAgICAgIGxldCBwYXJ0aXRpb24gPSBtYXAocG9zdHMsIHBvc3QgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC00XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwgcGFuZWwtZGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1oZWFkaW5nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInBhbmVsLXRpdGxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWYgPSB7XCIvcG9zdC9cIiArIHNlbGYucHJvcHMucG9zdExpc3QuYmxvZy5pZCArIFwiL1wiICsgcG9zdC5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cG9zdC50aXRsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwb3N0LmRlc2NyaXB0aW9ufSBcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1mb290ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi11c2VyXCI+PC9zcGFuPiZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cG9zdC51c2VyTmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tdGltZVwiPjwvc3Bhbj4mbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Bvc3QuZGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPntwYXJ0aXRpb259PC9kaXY+XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcG9zdHM7XG4gICAgfVxuXG4gICAgcmVuZGVyICgpIHtcbiAgICAgICAgbGV0IGFsZXJ0T3B0cyA9IG51bGwsXG4gICAgICAgICAgICBwb3N0cyA9IG51bGw7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMucG9zdExpc3Quc3RhdHVzID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZGFuZ2VyJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnByb3BzLnBvc3RMaXN0LmVycm9yXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5zdGF0dXMgPT09ICdzZW5kJykge1xuICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2luZm8nLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdMb2FkaW5nLCBwbGVhc2Ugd2FpdCcsXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgbGV0IHBhZ2VyUGFyYW0gPSB7XG4gICAgICAgICAgICBzdGFydDogdGhpcy5wcm9wcy5wb3N0TGlzdC5zdGFydCxcbiAgICAgICAgICAgIHBlcnBhZ2U6IHRoaXMucHJvcHMucG9zdExpc3QucGVycGFnZSxcbiAgICAgICAgICAgIGNvdW50OiB0aGlzLnByb3BzLnBvc3RMaXN0LmNvdW50LFxuICAgICAgICAgICAgaXRlbXM6IHRoaXMuZ2V0UG9zdEl0ZW1zKCksXG4gICAgICAgICAgICBjaGFuZ2VQYWdlOiA6OnRoaXMuY2hhbmdlUGFnZSxcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiA8ZGl2PlxuICAgICAgICAgICAgICAgIDxBbGVydE1lc3NhZ2Ugb3B0cz17YWxlcnRPcHRzfSAvPlxuICAgICAgICAgICAgICAgIDxvbCBjbGFzc05hbWU9XCJicmVhZGNydW1iXCI+XG4gICAgICAgICAgICAgICAgICAgIDxsaT48YSBocmVmPVwiL2Jsb2dzXCI+QmxvZ3M8L2E+PC9saT5cbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT1cImFjdGl2ZVwiPnt0aGlzLnByb3BzLnBvc3RMaXN0LmJsb2cgPyB0aGlzLnByb3BzLnBvc3RMaXN0LmJsb2cudGl0bGUgOiBudWxsfTwvbGk+XG4gICAgICAgICAgICAgICAgPC9vbD5cbiAgICAgICAgICAgICAgICA8QmxvZ0NvbXAgYmxvZz17dGhpcy5wcm9wcy5wb3N0TGlzdC5ibG9nfSAvPlxuICAgICAgICAgICAgICAgIDxQYWdpbmF0b3JMYXlvdXQgcGFyYW09e3BhZ2VyUGFyYW19IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICB9XG59XG5cbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IChzdGF0ZSkgPT4ge1xuICAgIHJldHVybiB7Li4uc3RhdGV9XG59XG5MaXN0Q29tcCA9IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzKShMaXN0Q29tcClcblxuZXhwb3J0IGRlZmF1bHQgTGlzdENvbXBcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3N0YXRpY19zcmMvcG9zdC9MaXN0Q29tcC5qcyIsImltcG9ydCB7Zm9yRWFjaH0gZnJvbSAnbG9kYXNoJztcblxubGV0IGluaXRTdGF0ZSA9IHtcbiAgICBibG9nSWQ6IHdpbmRvdy5sb2NhbFBhcmFtcy5ibG9nSWQgPyBwYXJzZUludCh3aW5kb3cubG9jYWxQYXJhbXMuYmxvZ0lkKSA6IG51bGwsXG4gICAgc3RhcnQ6IHdpbmRvdy5sb2NhbFBhcmFtcy5zdGFydCA/IHBhcnNlSW50KHdpbmRvdy5sb2NhbFBhcmFtcy5zdGFydCkgOiAwLFxuICAgIHBlcnBhZ2U6IHdpbmRvdy5sb2NhbFBhcmFtcy5wZXJwYWdlID8gcGFyc2VJbnQod2luZG93LmxvY2FsUGFyYW1zLnBlcnBhZ2UpIDogOSxcbiAgICBjb3VudDogMCxcbiAgICBibG9nOiBudWxsLFxuICAgIHBvc3RzOiBbXSxcbiAgICBzdGF0dXM6IG51bGwsXG59O1xuXG5jb25zdCBwb3N0TGlzdCA9IChzdGF0ZSA9IGluaXRTdGF0ZSwgYWN0aW9uKSA9PiB7XG4gICAgbGV0IGRhdGEgPSB7Li4uc3RhdGV9O1xuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnQkxPR19ERVRBSUxfU0VORCc6XG4gICAgICAgICAgICBkYXRhLnN0YXJ0ID0gYWN0aW9uLnN0YXJ0O1xuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnc2VuZCc7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgY2FzZSAnQkxPR19ERVRBSUxfU1VDQ0VTUyc6XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzdWNjZXNzJztcbiAgICAgICAgICAgIGRhdGEuY291bnQgPSBhY3Rpb24uZGF0YS5nZXRCbG9nRGV0YWlsLmNvdW50O1xuICAgICAgICAgICAgZGF0YS5ibG9nID0gYWN0aW9uLmRhdGEuZ2V0QmxvZ0RldGFpbC5ibG9nO1xuICAgICAgICAgICAgZGF0YS5wb3N0cyA9IGFjdGlvbi5kYXRhLmdldEJsb2dEZXRhaWwucG9zdHM7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBjYXNlICdCTE9HX0RFVEFJTF9FUlJPUic6XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdlcnJvcic7XG4gICAgICAgICAgICBkYXRhLmVycm9yID0gYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZVxuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IHBvc3RMaXN0XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zdGF0aWNfc3JjL3Bvc3QvTGlzdFJlZC5qcyJdLCJzb3VyY2VSb290IjoiIn0=
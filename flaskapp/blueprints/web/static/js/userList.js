webpackJsonp([1],{319:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var n=r(1),s=a(n),o=r(10),u=r(7);r(17),r(18);var l=r(8),c=r(320),i=a(c),p=r(19),f=a(p),d=r(321),h=a(d),m=r(20),g=(0,m.configureStore)({auth:f.default,userList:h.default}),y=(0,l.layout)({comp:i.default,forAuth:!0});(0,o.render)(s.default.createElement(u.Provider,{store:g},s.default.createElement(y,null)),document.getElementById("root"))},320:function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=r(1),c=function(e){return e&&e.__esModule?e:{default:e}}(l),i=r(7),p=r(23),f=r(30),d=r(8),h=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={start:r.props.userList.start,users:r.props.userList.users},r}return s(t,e),u(t,[{key:"componentWillMount",value:function(){this.changePage(this.props.userList.start)}},{key:"changePage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.props.dispatch((0,p.graphql)({type:"USER_LIST",start:e,perpage:this.props.userList.perpage}))}},{key:"getUserItems",value:function(){var e=(0,f.map)(this.props.userList.users,function(e){var t=e.online?"success":"active";return c.default.createElement("tr",{className:t},c.default.createElement("td",null,c.default.createElement("span",{className:"glyphicon glyphicon-user"})," ",c.default.createElement("span",null,e.login)),c.default.createElement("td",null,e.dtActive),c.default.createElement("td",{className:"text-right"},c.default.createElement("button",{className:"btn btn-default"},c.default.createElement("span",{className:"glyphicon glyphicon-plus"}),"  Add to friend")," ",c.default.createElement("button",{className:"btn btn-default"},c.default.createElement("span",{className:"glyphicon glyphicon-envelope"}),"  Send message")))});return c.default.createElement("table",{className:"table table-hover"},c.default.createElement("tbody",null,e))}},{key:"render",value:function(){var e=null;"error"==this.props.userList.status?e={className:"danger",text:this.props.userList.error}:"send"===this.props.userList.status&&(e={className:"info",text:"Loading, please wait"});var t={start:this.props.userList.start,perpage:this.props.userList.perpage,count:this.props.userList.count,items:this.getUserItems(),changePage:this.changePage.bind(this)};return c.default.createElement("div",null,c.default.createElement(d.AlertMessage,{opts:e}),c.default.createElement(d.PaginatorLayout,{param:t}))}}]),t}(c.default.Component),m=function(e){return o({},e)};h=(0,i.connect)(m)(h),t.default=h},321:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n={userId:window.localParams.userId?parseInt(window.localParams.userId):null,start:window.localParams.start?parseInt(window.localParams.start):0,perpage:window.localParams.perpage?parseInt(window.localParams.perpage):9,users:[],count:0,status:null,error:null},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1],r=a({},e);switch(t.type){case"USER_LIST_SEND":return r.start=t.start,r.status="send",r;case"USER_LIST_SUCCESS":return r.status="success",r.users=t.data.getUserList.users,r.count=t.data.getUserList.count,r;case"USER_LIST_ERROR":return r.status="error",r.error=t.error,r;default:return e}};t.default=s}},[319]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vdXNlckxpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljX3NyYy91c2VyTGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWNfc3JjL3VzZXIvTGlzdENvbXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljX3NyYy91c2VyL0xpc3RSZWQuanMiXSwibmFtZXMiOlsid2VicGFja0pzb25wIiwiMzE5IiwibW9kdWxlIiwiZXhwb3J0cyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfcmVhY3QiLCJfcmVhY3QyIiwiX3JlYWN0RG9tIiwiX3JlYWN0UmVkdXgiLCJfY29tcG9uZW50IiwiX0xpc3RDb21wIiwiX0xpc3RDb21wMiIsIl9Mb2dpblJlZCIsIl9Mb2dpblJlZDIiLCJfTGlzdFJlZCIsIl9MaXN0UmVkMiIsIl9jb25maWd1cmVTdG9yZSIsInN0b3JlIiwiY29uZmlndXJlU3RvcmUiLCJhdXRoIiwidXNlckxpc3QiLCJDb21wIiwibGF5b3V0IiwiY29tcCIsIkxpc3RDb21wIiwiZm9yQXV0aCIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJQcm92aWRlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCIzMjAiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJzZWxmIiwiY2FsbCIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwicHJvdG90eXBlIiwiT2JqZWN0IiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJ2YWx1ZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGVmaW5lUHJvcGVydHkiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfYWN0aW9uIiwiX2xvZGFzaCIsIlVzZXJMaXN0Q29tcCIsIl9SZWFjdCRDb21wb25lbnQiLCJ0aGlzIiwiX3RoaXMiLCJnZXRQcm90b3R5cGVPZiIsInN0YXRlIiwic3RhcnQiLCJ1c2VycyIsImNoYW5nZVBhZ2UiLCJ1bmRlZmluZWQiLCJkaXNwYXRjaCIsImdyYXBocWwiLCJ0eXBlIiwicGVycGFnZSIsIml0ZW1zIiwibWFwIiwidXNlciIsInRleHRDbGFzcyIsIm9ubGluZSIsImNsYXNzTmFtZSIsImxvZ2luIiwiZHRBY3RpdmUiLCJhbGVydE9wdHMiLCJzdGF0dXMiLCJ0ZXh0IiwiZXJyb3IiLCJwYWdlclBhcmFtIiwiY291bnQiLCJnZXRVc2VySXRlbXMiLCJiaW5kIiwiQWxlcnRNZXNzYWdlIiwib3B0cyIsIlBhZ2luYXRvckxheW91dCIsInBhcmFtIiwiUmVhY3QiLCJDb21wb25lbnQiLCJtYXBTdGF0ZVRvUHJvcHMiLCJjb25uZWN0IiwiMzIxIiwiaW5pdFN0YXRlIiwidXNlcklkIiwid2luZG93IiwibG9jYWxQYXJhbXMiLCJwYXJzZUludCIsImFjdGlvbiIsImRhdGEiLCJnZXRVc2VyTGlzdCJdLCJtYXBwaW5ncyI6IkFBQUFBLGNBQWMsSUFFUkMsSUFDQSxTQUFVQyxFQUFRQyxFQUFTQyxHQUVqQyxZQStCQSxTQUFTQyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQ3BDdkYsR0FBQUcsR0FBQUwsRUFBQSxHRFVJTSxFQUFVTCxFQUF1QkksR0NUckNFLEVBQUFQLEVBQUEsSUFDQVEsRUFBQVIsRUFBQSxFQUVBQSxHQUFBLElBQ0FBLEVBQUEsR0FFQSxJQUFB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LFlBQVlGLFFBQVUsS0FDMUVsQyxNQUFPbUMsT0FBT0MsWUFBWXBDLE1BQVFxQyxTQUFTRixPQUFPQyxZQUFZcEMsT0FBUyxFQUN2RU8sUUFBUzRCLE9BQU9DLFlBQVk3QixRQUFVOEIsU0FBU0YsT0FBT0MsWUFBWTdCLFNBQVcsRUFDN0VOLFNBQ0FvQixNQUFPLEVBQ1BKLE9BQVEsS0FDUkUsTUFBTyxNQUVMNUUsRUFBVyxXQUErQixHQUE5QndELEdBQThCbEIsVUFBQUMsT0FBQSxPQUFBcUIsS0FBQXRCLFVBQUEsR0FBQUEsVUFBQSxHQUF0Qm9ELEVBQVdLLEVBQVd6RCxVQUFBLEdBQ3hDMEQsT0FBV3hDLEVBQ2YsUUFBUXVDLEVBQU9oQyxNQUNYLElBQUssaUJBR0QsTUFGQWlDLEdBQUt2QyxNQUFRc0MsRUFBT3RDLE1BQ3BCdUMsRUFBS3RCLE9BQVMsT0FDUHNCLENBQ1gsS0FBSyxvQkFJRCxNQUhBQSxHQUFLdEIsT0FBUyxVQUNkc0IsRUFBS3RDLE1BQVFxQyxFQUFPQyxLQUFLQyxZQUFZdkMsTUFDckNzQyxFQUFLbEIsTUFBUWlCLEVBQU9DLEtBQUtDLFlBQVluQixNQUM5QmtCLENBQ1gsS0FBSyxrQkFHRCxNQUZBQSxHQUFLdEIsT0FBUyxRQUNkc0IsRUFBS3BCLE1BQVFtQixFQUFPbkIsTUFDYm9CLENBQ1gsU0FDSSxNQUFPeEMsSUhrUW5CN0UsR0FBUUssUUc5UE9nQixLSGtRWiIsImZpbGUiOiJ1c2VyTGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIndlYnBhY2tKc29ucChbMV0se1xuXG4vKioqLyAzMTk6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXG52YXIgX3JlYWN0UmVkdXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cbnZhciBfY29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxudmFyIF9MaXN0Q29tcCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIwKTtcblxudmFyIF9MaXN0Q29tcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9MaXN0Q29tcCk7XG5cbnZhciBfTG9naW5SZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblxudmFyIF9Mb2dpblJlZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Mb2dpblJlZCk7XG5cbnZhciBfTGlzdFJlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIxKTtcblxudmFyIF9MaXN0UmVkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xpc3RSZWQpO1xuXG52YXIgX2NvbmZpZ3VyZVN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBzdG9yZSA9ICgwLCBfY29uZmlndXJlU3RvcmUuY29uZmlndXJlU3RvcmUpKHtcblx0YXV0aDogX0xvZ2luUmVkMi5kZWZhdWx0LFxuXHR1c2VyTGlzdDogX0xpc3RSZWQyLmRlZmF1bHRcbn0pO1xuXG52YXIgQ29tcCA9ICgwLCBfY29tcG9uZW50LmxheW91dCkoeyBjb21wOiBfTGlzdENvbXAyLmRlZmF1bHQsIGZvckF1dGg6IHRydWUgfSk7XG4oMCwgX3JlYWN0RG9tLnJlbmRlcikoX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdF9yZWFjdFJlZHV4LlByb3ZpZGVyLFxuXHR7IHN0b3JlOiBzdG9yZSB9LFxuXHRfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChDb21wLCBudWxsKVxuKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMjA6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0UmVkdXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG52YXIgX2FjdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXG52YXIgX2xvZGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXG52YXIgX2NvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFVzZXJMaXN0Q29tcCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKFVzZXJMaXN0Q29tcCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBVc2VyTGlzdENvbXAocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVzZXJMaXN0Q29tcCk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFVzZXJMaXN0Q29tcC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFVzZXJMaXN0Q29tcCkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHN0YXJ0OiBfdGhpcy5wcm9wcy51c2VyTGlzdC5zdGFydCxcbiAgICAgICAgICAgIHVzZXJzOiBfdGhpcy5wcm9wcy51c2VyTGlzdC51c2Vyc1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFVzZXJMaXN0Q29tcCwgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlUGFnZSh0aGlzLnByb3BzLnVzZXJMaXN0LnN0YXJ0KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY2hhbmdlUGFnZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VQYWdlKCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAwO1xuXG4gICAgICAgICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKCgwLCBfYWN0aW9uLmdyYXBocWwpKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnVVNFUl9MSVNUJyxcbiAgICAgICAgICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgICAgICAgICAgcGVycGFnZTogdGhpcy5wcm9wcy51c2VyTGlzdC5wZXJwYWdlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFVzZXJJdGVtcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRVc2VySXRlbXMoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSAoMCwgX2xvZGFzaC5tYXApKHRoaXMucHJvcHMudXNlckxpc3QudXNlcnMsIGZ1bmN0aW9uICh1c2VyKSB7XG5cbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgIGlkID0gZ3JhcGhlbmUuSUQoKVxuICAgICAgICAgICAgICAgIGxvZ2luID0gZ3JhcGhlbmUuU3RyaW5nKClcbiAgICAgICAgICAgICAgICBlbWFpbCA9IGdyYXBoZW5lLlN0cmluZygpXG4gICAgICAgICAgICAgICAgZnJpZW5kID0gZ3JhcGhlbmUuSW50KClcbiAgICAgICAgICAgICAgICBvbmxpbmUgPSBncmFwaGVuZS5Cb29sZWFuKClcbiAgICAgICAgICAgICAgICBkdEFjdGl2ZSA9IGdyYXBoZW5lLlN0cmluZygpXG4gICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c2VsZi5nZXRPbmxpbmVJY29uKHVzZXIub25saW5lKX0mbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VyLmxvZ2lufSZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAge3VzZXIuZHRBY3RpdmV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgdmFyIHRleHRDbGFzcyA9IHVzZXIub25saW5lID8gJ3N1Y2Nlc3MnIDogJ2FjdGl2ZSc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAndHInLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogdGV4dENsYXNzIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi11c2VyJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyLmxvZ2luXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyLmR0QWN0aXZlXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndGV4dC1yaWdodCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLXBsdXMnIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMCBBZGQgdG8gZnJpZW5kJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2J0biBidG4tZGVmYXVsdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1lbnZlbG9wZScgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwIFNlbmQgbWVzc2FnZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICd0YWJsZScsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd0YWJsZSB0YWJsZS1ob3ZlcicgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ3Rib2R5JyxcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaXRlbXNcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIGFsZXJ0T3B0cyA9IG51bGw7XG4gICAgICAgICAgICB2YXIgdXNlcnMgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy51c2VyTGlzdC5zdGF0dXMgPT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgICAgIGFsZXJ0T3B0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZGFuZ2VyJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5wcm9wcy51c2VyTGlzdC5lcnJvclxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMudXNlckxpc3Quc3RhdHVzID09PSAnc2VuZCcpIHtcbiAgICAgICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2luZm8nLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnTG9hZGluZywgcGxlYXNlIHdhaXQnXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHBhZ2VyUGFyYW0gPSB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHRoaXMucHJvcHMudXNlckxpc3Quc3RhcnQsXG4gICAgICAgICAgICAgICAgcGVycGFnZTogdGhpcy5wcm9wcy51c2VyTGlzdC5wZXJwYWdlLFxuICAgICAgICAgICAgICAgIGNvdW50OiB0aGlzLnByb3BzLnVzZXJMaXN0LmNvdW50LFxuICAgICAgICAgICAgICAgIGl0ZW1zOiB0aGlzLmdldFVzZXJJdGVtcygpLFxuICAgICAgICAgICAgICAgIGNoYW5nZVBhZ2U6IHRoaXMuY2hhbmdlUGFnZS5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY29tcG9uZW50LkFsZXJ0TWVzc2FnZSwgeyBvcHRzOiBhbGVydE9wdHMgfSksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NvbXBvbmVudC5QYWdpbmF0b3JMYXlvdXQsIHsgcGFyYW06IHBhZ2VyUGFyYW0gfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVXNlckxpc3RDb21wO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxudmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSkge1xuICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xufTtcblVzZXJMaXN0Q29tcCA9ICgwLCBfcmVhY3RSZWR1eC5jb25uZWN0KShtYXBTdGF0ZVRvUHJvcHMpKFVzZXJMaXN0Q29tcCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFVzZXJMaXN0Q29tcDtcblxuLyoqKi8gfSksXG5cbi8qKiovIDMyMTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgaW5pdFN0YXRlID0ge1xuICAgIHVzZXJJZDogd2luZG93LmxvY2FsUGFyYW1zLnVzZXJJZCA/IHBhcnNlSW50KHdpbmRvdy5sb2NhbFBhcmFtcy51c2VySWQpIDogbnVsbCxcbiAgICBzdGFydDogd2luZG93LmxvY2FsUGFyYW1zLnN0YXJ0ID8gcGFyc2VJbnQod2luZG93LmxvY2FsUGFyYW1zLnN0YXJ0KSA6IDAsXG4gICAgcGVycGFnZTogd2luZG93LmxvY2FsUGFyYW1zLnBlcnBhZ2UgPyBwYXJzZUludCh3aW5kb3cubG9jYWxQYXJhbXMucGVycGFnZSkgOiA5LFxuICAgIHVzZXJzOiBbXSxcbiAgICBjb3VudDogMCxcbiAgICBzdGF0dXM6IG51bGwsXG4gICAgZXJyb3I6IG51bGxcbn07XG52YXIgdXNlckxpc3QgPSBmdW5jdGlvbiB1c2VyTGlzdCgpIHtcbiAgICB2YXIgc3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGluaXRTdGF0ZTtcbiAgICB2YXIgYWN0aW9uID0gYXJndW1lbnRzWzFdO1xuXG4gICAgdmFyIGRhdGEgPSBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnVVNFUl9MSVNUX1NFTkQnOlxuICAgICAgICAgICAgZGF0YS5zdGFydCA9IGFjdGlvbi5zdGFydDtcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3NlbmQnO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIGNhc2UgJ1VTRVJfTElTVF9TVUNDRVNTJzpcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3N1Y2Nlc3MnO1xuICAgICAgICAgICAgZGF0YS51c2VycyA9IGFjdGlvbi5kYXRhLmdldFVzZXJMaXN0LnVzZXJzO1xuICAgICAgICAgICAgZGF0YS5jb3VudCA9IGFjdGlvbi5kYXRhLmdldFVzZXJMaXN0LmNvdW50O1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIGNhc2UgJ1VTRVJfTElTVF9FUlJPUic6XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdlcnJvcic7XG4gICAgICAgICAgICBkYXRhLmVycm9yID0gYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gdXNlckxpc3Q7XG5cbi8qKiovIH0pXG5cbn0sWzMxOV0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB1c2VyTGlzdC5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHJlbmRlciB9IGZyb20gJ3JlYWN0LWRvbSdcbmltcG9ydCB7IFByb3ZpZGVyIH0gZnJvbSAncmVhY3QtcmVkdXgnXG5cbmltcG9ydCAnYm9vdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5jc3MnO1xuaW1wb3J0ICcuL3N0eWxlcy9pbmRleC5zY3NzJ1xuXG5pbXBvcnQge2xheW91dH0gZnJvbSAnLi9oZWxwZXJzL2NvbXBvbmVudCdcbmltcG9ydCBMaXN0Q29tcCBmcm9tICcuL3VzZXIvTGlzdENvbXAnXG5cbmltcG9ydCBhdXRoIGZyb20gJy4vYXV0aC9Mb2dpblJlZCdcbmltcG9ydCB1c2VyTGlzdCBmcm9tICcuL3VzZXIvTGlzdFJlZCdcblxuaW1wb3J0IHtjb25maWd1cmVTdG9yZX0gZnJvbSAnLi9oZWxwZXJzL2NvbmZpZ3VyZVN0b3JlJ1xuXG5sZXQgc3RvcmUgPSBjb25maWd1cmVTdG9yZSh7XG5cdGF1dGg6IGF1dGgsXG5cdHVzZXJMaXN0OiB1c2VyTGlzdCxcbn0pO1xuXG5sZXQgQ29tcCA9IGxheW91dCh7Y29tcDogTGlzdENvbXAsIGZvckF1dGg6IHRydWV9KTtcbnJlbmRlcihcblx0PFByb3ZpZGVyIHN0b3JlPXtzdG9yZX0+XG5cdFx0PENvbXAgLz5cblx0PC9Qcm92aWRlcj4sXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290JylcbilcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zdGF0aWNfc3JjL3VzZXJMaXN0LmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgeyBncmFwaHFsIH0gZnJvbSAnLi4vaGVscGVycy9hY3Rpb24nO1xuaW1wb3J0IHtmb3JFYWNoLCBjaHVuaywgbWFwfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHtBbGVydE1lc3NhZ2UsIFBhZ2luYXRvckxheW91dH0gZnJvbSAnLi4vaGVscGVycy9jb21wb25lbnQnO1xuXG5jbGFzcyBVc2VyTGlzdENvbXAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc3RhcnQ6IHRoaXMucHJvcHMudXNlckxpc3Quc3RhcnQsXG4gICAgICAgICAgICB1c2VyczogdGhpcy5wcm9wcy51c2VyTGlzdC51c2VycyxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxNb3VudCAoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlUGFnZSh0aGlzLnByb3BzLnVzZXJMaXN0LnN0YXJ0KTtcbiAgICB9XG5cbiAgICBjaGFuZ2VQYWdlIChzdGFydCA9IDApIHtcbiAgICAgICAgdGhpcy5wcm9wcy5kaXNwYXRjaChncmFwaHFsKHtcbiAgICAgICAgICAgIHR5cGU6ICdVU0VSX0xJU1QnLFxuICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LCBcbiAgICAgICAgICAgIHBlcnBhZ2U6IHRoaXMucHJvcHMudXNlckxpc3QucGVycGFnZSwgXG4gICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBnZXRVc2VySXRlbXMgKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gbWFwKHRoaXMucHJvcHMudXNlckxpc3QudXNlcnMsIHVzZXIgPT4ge1xuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgaWQgPSBncmFwaGVuZS5JRCgpXG4gICAgICAgICAgICBsb2dpbiA9IGdyYXBoZW5lLlN0cmluZygpXG4gICAgICAgICAgICBlbWFpbCA9IGdyYXBoZW5lLlN0cmluZygpXG4gICAgICAgICAgICBmcmllbmQgPSBncmFwaGVuZS5JbnQoKVxuICAgICAgICAgICAgb25saW5lID0gZ3JhcGhlbmUuQm9vbGVhbigpXG4gICAgICAgICAgICBkdEFjdGl2ZSA9IGdyYXBoZW5lLlN0cmluZygpXG4gICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvKlxuXG4gICAgICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC00XCI+XG4gICAgICAgICAgICAgICAgICAgIHtzZWxmLmdldE9ubGluZUljb24odXNlci5vbmxpbmUpfSZuYnNwO1xuICAgICAgICAgICAgICAgICAgICB7dXNlci5sb2dpbn0mbmJzcDtcbiAgICAgICAgICAgICAgICAgICAge3VzZXIuZHRBY3RpdmV9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgbGV0IHRleHRDbGFzcyA9IHVzZXIub25saW5lID8gJ3N1Y2Nlc3MnIDogJ2FjdGl2ZSc7XG4gICAgICAgICAgICByZXR1cm4gPHRyIGNsYXNzTmFtZT17dGV4dENsYXNzfT5cbiAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tdXNlclwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgJm5ic3A7XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPnt1c2VyLmxvZ2lufTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAge3VzZXIuZHRBY3RpdmV9XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwidGV4dC1yaWdodFwiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVzXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICBBZGQgdG8gZnJpZW5kXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tZW52ZWxvcGVcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIFNlbmQgbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIDx0YWJsZSBjbGFzc05hbWU9XCJ0YWJsZSB0YWJsZS1ob3ZlclwiPlxuICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgIHtpdGVtc31cbiAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgIDwvdGFibGU+XG4gICAgfVxuICAgIFxuXG4gICAgcmVuZGVyICgpIHtcbiAgICAgICAgbGV0IGFsZXJ0T3B0cyA9IG51bGw7XG4gICAgICAgIGxldCB1c2VycyA9IG51bGw7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMudXNlckxpc3Quc3RhdHVzID09ICdlcnJvcicpIHtcbiAgICAgICAgICAgIGFsZXJ0T3B0cyA9IHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdkYW5nZXInLFxuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMucHJvcHMudXNlckxpc3QuZXJyb3JcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnVzZXJMaXN0LnN0YXR1cyA9PT0gJ3NlbmQnKSB7XG4gICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnaW5mbycsXG4gICAgICAgICAgICAgICAgdGV4dDogJ0xvYWRpbmcsIHBsZWFzZSB3YWl0JyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwYWdlclBhcmFtID0ge1xuICAgICAgICAgICAgc3RhcnQ6IHRoaXMucHJvcHMudXNlckxpc3Quc3RhcnQsXG4gICAgICAgICAgICBwZXJwYWdlOiB0aGlzLnByb3BzLnVzZXJMaXN0LnBlcnBhZ2UsXG4gICAgICAgICAgICBjb3VudDogdGhpcy5wcm9wcy51c2VyTGlzdC5jb3VudCxcbiAgICAgICAgICAgIGl0ZW1zOiB0aGlzLmdldFVzZXJJdGVtcygpLFxuICAgICAgICAgICAgY2hhbmdlUGFnZTogOjp0aGlzLmNoYW5nZVBhZ2UsXG4gICAgICAgIH07XG5cbiAgICAgIFxuXG5cbiAgICAgICAgcmV0dXJuIDxkaXY+XG4gICAgICAgICAgICA8QWxlcnRNZXNzYWdlIG9wdHM9e2FsZXJ0T3B0c30gLz5cblxuICAgICAgICAgICAgPFBhZ2luYXRvckxheW91dCBwYXJhbT17cGFnZXJQYXJhbX0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgIH1cbn1cbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IChzdGF0ZSkgPT4ge1xuICAgIHJldHVybiB7Li4uc3RhdGV9XG59XG5Vc2VyTGlzdENvbXAgPSBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcykoVXNlckxpc3RDb21wKVxuXG5leHBvcnQgZGVmYXVsdCBVc2VyTGlzdENvbXBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zdGF0aWNfc3JjL3VzZXIvTGlzdENvbXAuanMiLCJsZXQgaW5pdFN0YXRlID0ge1xuICAgIHVzZXJJZDogd2luZG93LmxvY2FsUGFyYW1zLnVzZXJJZCA/IHBhcnNlSW50KHdpbmRvdy5sb2NhbFBhcmFtcy51c2VySWQpIDogbnVsbCxcbiAgICBzdGFydDogd2luZG93LmxvY2FsUGFyYW1zLnN0YXJ0ID8gcGFyc2VJbnQod2luZG93LmxvY2FsUGFyYW1zLnN0YXJ0KSA6IDAsXG4gICAgcGVycGFnZTogd2luZG93LmxvY2FsUGFyYW1zLnBlcnBhZ2UgPyBwYXJzZUludCh3aW5kb3cubG9jYWxQYXJhbXMucGVycGFnZSkgOiA5LFxuICAgIHVzZXJzOiBbXSxcbiAgICBjb3VudDogMCxcbiAgICBzdGF0dXM6IG51bGwsXG4gICAgZXJyb3I6IG51bGwsXG59O1xuY29uc3QgdXNlckxpc3QgPSAoc3RhdGUgPSBpbml0U3RhdGUsIGFjdGlvbikgPT4ge1xuICAgIGxldCBkYXRhID0gey4uLnN0YXRlfTtcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ1VTRVJfTElTVF9TRU5EJzpcbiAgICAgICAgICAgIGRhdGEuc3RhcnQgPSBhY3Rpb24uc3RhcnQ7XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzZW5kJztcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBjYXNlICdVU0VSX0xJU1RfU1VDQ0VTUyc6XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzdWNjZXNzJztcbiAgICAgICAgICAgIGRhdGEudXNlcnMgPSBhY3Rpb24uZGF0YS5nZXRVc2VyTGlzdC51c2VycztcbiAgICAgICAgICAgIGRhdGEuY291bnQgPSBhY3Rpb24uZGF0YS5nZXRVc2VyTGlzdC5jb3VudDtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBjYXNlICdVU0VSX0xJU1RfRVJST1InOlxuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnZXJyb3InO1xuICAgICAgICAgICAgZGF0YS5lcnJvciA9IGFjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB1c2VyTGlzdFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3N0YXRpY19zcmMvdXNlci9MaXN0UmVkLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==
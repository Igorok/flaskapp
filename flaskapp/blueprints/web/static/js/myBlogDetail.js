webpackJsonp([5],{361:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var s=a(1),r=l(s),n=a(10),o=a(7);a(16),a(17);var i=a(8),c=a(362),p=l(c),u=a(18),d=l(u),f=a(363),m=l(f),g=a(19),h=(0,g.configureStore)({auth:d.default,myPostList:m.default}),b=(0,i.layout)({comp:p.default,forAuth:!0});(0,n.render)(r.default.createElement(o.Provider,{store:h},r.default.createElement(b,null)),document.getElementById("root"))},362:function(e,t,a){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),i=a(1),c=function(e){return e&&e.__esModule?e:{default:e}}(i),p=a(7),u=a(21),d=a(29),f=a(8),m=function(e){function t(){return l(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),o(t,[{key:"render",value:function(){var e=this,t=null;if(this.props.blog){var a=function(t){return t.preventDefault(),e.props.publicBlog({id:e.props.blog.id,public:!e.props.blog.public})},l=null;l=this.props.blog.public?c.default.createElement("btn",{className:"btn btn-default",onClick:a,"data-id":this.props.blog.id},c.default.createElement("span",{className:"glyphicon glyphicon-remove"}),"  hide"):c.default.createElement("btn",{className:"btn btn-default",onClick:a,"data-id":this.props.blog.id},c.default.createElement("span",{className:"glyphicon glyphicon-ok"}),"  show"),t=c.default.createElement("div",{className:"panel panel-default"},c.default.createElement("div",{className:"panel-heading"},c.default.createElement("h4",{className:"panel-title"},this.props.blog.title)),c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.blog.text}})),c.default.createElement("div",{className:"panel-footer"},c.default.createElement("p",null,c.default.createElement("span",{className:"glyphicon glyphicon-user"})," ",this.props.blog.userName," | ",c.default.createElement("span",{className:"glyphicon glyphicon-time"})," ",this.props.blog.date),c.default.createElement("p",null,c.default.createElement("a",{href:"/blog-edit/"+this.props.blog.id,className:"btn btn-default"},c.default.createElement("span",{className:"glyphicon glyphicon-pencil"}),"  edit")," ",l," ",c.default.createElement("a",{href:"/post-edit/"+this.props.blog.id+"/-1",className:"btn btn-default"},c.default.createElement("span",{className:"glyphicon glyphicon-plus"}),"  Add post"))))}return t}}]),t}(c.default.Component),g=function(e){function t(e){l(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={start:a.props.myPostList.start,blog:a.props.myPostList.blog,posts:a.props.myPostList.posts},a}return r(t,e),o(t,[{key:"componentWillMount",value:function(){this.changePage()}},{key:"changePage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.props.dispatch((0,u.graphql)({type:"MY_BLOG_DETAIL",start:e,perpage:this.props.myPostList.perpage,blogId:this.props.myPostList.blogId}))}},{key:"publicBlog",value:function(e){this.props.dispatch((0,u.graphql)({type:"MY_BLOG_PUBLIC",id:e.id,public:e.public}))}},{key:"getPostItems",value:function(){var e=this;if(!e.props.myPostList.posts||!e.props.myPostList.posts.length)return null;var t=(0,d.chunk)(this.props.myPostList.posts,3);return(0,d.map)(t,function(t){var a=(0,d.map)(t,function(t){return c.default.createElement("div",{className:"col-md-4"},c.default.createElement("div",{className:"panel panel-default"},c.default.createElement("div",{className:"panel-heading"},c.default.createElement("h4",{className:"panel-title"},c.default.createElement("a",{href:"/post-edit/"+e.props.myPostList.blog.id+"/"+t.id},t.title))),c.default.createElement("div",{className:"panel-body"},t.description),c.default.createElement("div",{className:"panel-footer"},c.default.createElement("p",null,c.default.createElement("span",{className:"glyphicon glyphicon-user"})," ",t.userName),c.default.createElement("p",null,c.default.createElement("span",{className:"glyphicon glyphicon-time"})," ",t.date))))});return c.default.createElement("div",{className:"row"},a)})}},{key:"render",value:function(){var e=null;"error"===this.props.myPostList.status?e={className:"danger",text:this.props.myPostList.error}:"send"===this.props.status&&(e={className:"info",text:"Loading, please wait"});var t={start:this.props.myPostList.start,perpage:this.props.myPostList.perpage,count:this.props.myPostList.count,items:this.getPostItems(),changePage:this.changePage.bind(this)};return c.default.createElement("div",null,c.default.createElement(f.AlertMessage,{opts:e}),c.default.createElement("ol",{className:"breadcrumb"},c.default.createElement("li",null,c.default.createElement("a",{href:"/my-blogs"},"My blogs")),c.default.createElement("li",{className:"active"},this.props.myPostList.blog?this.props.myPostList.blog.title:null)),c.default.createElement(m,{blog:this.props.myPostList.blog,publicBlog:this.publicBlog.bind(this)}),c.default.createElement(f.PaginatorLayout,{param:t}))}}]),t}(c.default.Component),h=function(e){return n({},e)};g=(0,p.connect)(h)(g),t.default=g},363:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},s=(a(29),{blogId:window.localParams.blogId?parseInt(window.localParams.blogId):null,start:window.localParams.start?parseInt(window.localParams.start):0,perpage:window.localParams.perpage?parseInt(window.localParams.perpage):9,count:0,blog:null,posts:[],status:null}),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1],a=l({},e);switch(t.type){case"MY_BLOG_DETAIL_SEND":return a.start=t.start,a.status="send",a;case"MY_BLOG_DETAIL_SUCCESS":return a.status="success",a.count=t.data.getMyBlogDetail.count,a.blog=t.data.getMyBlogDetail.blog,a.posts=t.data.getMyBlogDetail.posts,a;case"MY_BLOG_DETAIL_ERROR":return a.status="error",a.error=t.error,a;case"MY_BLOG_PUBLIC_SEND":return a.start=t.start,a.status="send",a;case"MY_BLOG_PUBLIC_SUCCESS":return a.status="success",a.blog.public=t.data.publicMyBlog.public,console.log("action.data.publicMyBlog",t.data.publicMyBlog),a;case"MY_BLOG_PUBLIC_ERROR":return a.status="error",a.error=t.error,a;default:return e}};t.default=r}},[361]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbXlCbG9nRGV0YWlsLmpzIiwid2VicGFjazovLy8uL3N0YXRpY19zcmMvbXlCbG9nRGV0YWlsLmpzIiwid2VicGFjazovLy8uL3N0YXRpY19zcmMvcG9zdC9NeUxpc3RDb21wLmpzIiwid2VicGFjazovLy8uL3N0YXRpY19zcmMvcG9zdC9NeUxpc3RSZWQuanMiXSwibmFtZXMiOlsid2VicGFja0pzb25wIiwiMzYxIiwibW9kdWxlIiwiZXhwb3J0cyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfcmVhY3QiLCJfcmVhY3QyIiwiX3JlYWN0RG9tIiwiX3JlYWN0UmVkdXgiLCJfY29tcG9uZW50IiwiX015TGlzdENvbXAiLCJfTXlMaXN0Q29tcDIiLCJfTG9naW5SZWQiLCJfTG9naW5SZWQyIiwiX015TGlzdFJlZCIsIl9NeUxpc3RSZWQyIiwiX2NvbmZpZ3VyZVN0b3JlIiwic3RvcmUiLCJjb25maWd1cmVTdG9yZSIsImF1dGgiLCJteVBvc3RMaXN0IiwiQ29tcCIsImxheW91dCIsImNvbXAiLCJNeUxpc3RDb21wIiwiZm9yQXV0aCIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJQcm92aWRlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCIzNjIiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJzZWxmIiwiY2FsbCIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwicHJvdG90eXBlIiwiT2JqZWN0IiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJ2YWx1ZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGVmaW5lUHJvcGVydHkiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfYWN0aW9uIiwiX2xvZGFzaCIsIkJsb2dDb21wIiwiX1JlYWN0JENvbXBvbmVudCIsInRoaXMiLCJnZXRQcm90b3R5cGVPZiIsImFwcGx5IiwidHBsIiwiYmxvZyIsInB1YkJsb2ciLCJlIiwicHJldmVudERlZmF1bHQiLCJwdWJsaWNCbG9nIiwiaWQiLCJwdWJsaWMiLCJoaWRlQnRuIiwiY2xhc3NOYW1lIiwib25DbGljayIsImRhdGEtaWQiLCJ0aXRsZSIsImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiwiX19odG1sIiwidGV4dCIsInVzZXJOYW1lIiwiZGF0ZSIsImhyZWYiLCJSZWFjdCIsIkNvbXBvbmVudCIsIl9SZWFjdCRDb21wb25lbnQyIiwiX3RoaXMyIiwic3RhdGUiLCJzdGFydCIsInBvc3RzIiwiY2hhbmdlUGFnZSIsInVuZGVmaW5lZCIsImRpc3BhdGNoIiwiZ3JhcGhxbCIsInR5cGUiLCJwZXJwYWdlIiwiYmxvZ0lkIiwicCIsImNodW5rZWRJdGVtcyIsImNodW5rIiwibWFwIiwicGFydGl0aW9uIiwicG9zdCIsImRlc2NyaXB0aW9uIiwiYWxlcnRPcHRzIiwic3RhdHVzIiwiZXJyb3IiLCJwYWdlclBhcmFtIiwiY291bnQiLCJpdGVtcyIsImdldFBvc3RJdGVtcyIsImJpbmQiLCJBbGVydE1lc3NhZ2UiLCJvcHRzIiwiUGFnaW5hdG9yTGF5b3V0IiwicGFyYW0iLCJtYXBTdGF0ZVRvUHJvcHMiLCJjb25uZWN0IiwiMzYzIiwiaW5pdFN0YXRlIiwid2luZG93IiwibG9jYWxQYXJhbXMiLCJwYXJzZUludCIsImFjdGlvbiIsImRhdGEiLCJnZXRNeUJsb2dE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eUUsRUFBV0ksRUFBVzdFLFVBQUEsR0FDMUM4RSxPQUFXckMsRUFDZixRQUFRb0MsRUFBTzdCLE1BQ1gsSUFBSyxzQkFHRCxNQUZBOEIsR0FBS3BDLE1BQVFtQyxFQUFPbkMsTUFDcEJvQyxFQUFLbkIsT0FBUyxPQUNQbUIsQ0FDWCxLQUFLLHlCQU1ELE1BTEFBLEdBQUtuQixPQUFTLFVBQ2RtQixFQUFLaEIsTUFBUWUsRUFBT0MsS0FBS0MsZ0JBQWdCakIsTUFDekNnQixFQUFLM0QsS0FBTzBELEVBQU9DLEtBQUtDLGdCQUFnQjVELEtBQ3hDMkQsRUFBS25DLE1BQVFrQyxFQUFPQyxLQUFLQyxnQkFBZ0JwQyxNQUVsQ21DLENBQ1gsS0FBSyx1QkFHRCxNQUZBQSxHQUFLbkIsT0FBUyxRQUNkbUIsRUFBS2xCLE1BQVFpQixFQUFPakIsTUFDYmtCLENBR1gsS0FBSyxzQkFHRCxNQUZBQSxHQUFLcEMsTUFBUW1DLEVBQU9uQyxNQUNwQm9DLEVBQUtuQixPQUFTLE9BQ1BtQixDQUNYLEtBQUsseUJBUUQsTUFQQUEsR0FBS25CLE9BQVMsVUFDZG1CLEVBQUszRCxLQUFLTSxPQUFTb0QsRUFBT0MsS0FBS0UsYUFBYXZELE9BRTVDd0QsUUFBUUMsSUFDSiwyQkFBNEJMLEVBQU9DLEtBQUtFLGNBR3JDRixDQUNYLEtBQUssdUJBR0QsTUFGQUEsR0FBS25CLE9BQVMsUUFDZG1CLEVBQUtsQixNQUFRaUIsRUFBT2pCLE1BQ2JrQixDQUVYLFNBQ0ksTUFBT3JDLElINlhuQnBHLEdBQVFLLFFHMVhPZ0IsS0hzYloiLCJmaWxlIjoibXlCbG9nRGV0YWlsLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2VicGFja0pzb25wKFs1XSx7XG5cbi8qKiovIDM2MTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cbnZhciBfcmVhY3RSZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbl9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblxudmFyIF9jb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG52YXIgX015TGlzdENvbXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2Mik7XG5cbnZhciBfTXlMaXN0Q29tcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NeUxpc3RDb21wKTtcblxudmFyIF9Mb2dpblJlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXG52YXIgX0xvZ2luUmVkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xvZ2luUmVkKTtcblxudmFyIF9NeUxpc3RSZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2Myk7XG5cbnZhciBfTXlMaXN0UmVkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX015TGlzdFJlZCk7XG5cbnZhciBfY29uZmlndXJlU3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHN0b3JlID0gKDAsIF9jb25maWd1cmVTdG9yZS5jb25maWd1cmVTdG9yZSkoe1xuXHRhdXRoOiBfTG9naW5SZWQyLmRlZmF1bHQsXG5cdG15UG9zdExpc3Q6IF9NeUxpc3RSZWQyLmRlZmF1bHRcbn0pO1xuXG52YXIgQ29tcCA9ICgwLCBfY29tcG9uZW50LmxheW91dCkoeyBjb21wOiBfTXlMaXN0Q29tcDIuZGVmYXVsdCwgZm9yQXV0aDogdHJ1ZSB9KTtcbigwLCBfcmVhY3REb20ucmVuZGVyKShfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0X3JlYWN0UmVkdXguUHJvdmlkZXIsXG5cdHsgc3RvcmU6IHN0b3JlIH0sXG5cdF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KENvbXAsIG51bGwpXG4pLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDM2Mjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3RSZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbnZhciBfYWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cbnZhciBfbG9kYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cbnZhciBfY29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgQmxvZ0NvbXAgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhCbG9nQ29tcCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBCbG9nQ29tcCgpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJsb2dDb21wKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEJsb2dDb21wLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQmxvZ0NvbXApKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQmxvZ0NvbXAsIFt7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdHBsID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmJsb2cpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHViQmxvZyA9IGZ1bmN0aW9uIHB1YkJsb2coZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnByb3BzLnB1YmxpY0Jsb2coe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHNlbGYucHJvcHMuYmxvZy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYzogIXNlbGYucHJvcHMuYmxvZy5wdWJsaWNcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHZhciBoaWRlQnRuID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmJsb2cucHVibGljKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpZGVCdG4gPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdidG4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnLCBvbkNsaWNrOiBwdWJCbG9nLCAnZGF0YS1pZCc6IHRoaXMucHJvcHMuYmxvZy5pZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMCBoaWRlJ1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGhpZGVCdG4gPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdidG4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnLCBvbkNsaWNrOiBwdWJCbG9nLCAnZGF0YS1pZCc6IHRoaXMucHJvcHMuYmxvZy5pZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tb2snIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwIHNob3cnXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdHBsID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsIHBhbmVsLWRlZmF1bHQnIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWhlYWRpbmcnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaDQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtdGl0bGUnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5ibG9nLnRpdGxlXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWJvZHknIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBkYW5nZXJvdXNseVNldElubmVySFRNTDogeyBfX2h0bWw6IHRoaXMucHJvcHMuYmxvZy50ZXh0IH0gfSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtZm9vdGVyJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tdXNlcicgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJsb2cudXNlck5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwfFxceEEwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi10aW1lJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXFx4QTAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYmxvZy5kYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBocmVmOiBcIi9ibG9nLWVkaXQvXCIgKyB0aGlzLnByb3BzLmJsb2cuaWQsIGNsYXNzTmFtZTogJ2J0biBidG4tZGVmYXVsdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tcGVuY2lsJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwIGVkaXQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXFx4QTAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVCdG4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGhyZWY6IFwiL3Bvc3QtZWRpdC9cIiArIHRoaXMucHJvcHMuYmxvZy5pZCArIFwiLy0xXCIsIGNsYXNzTmFtZTogJ2J0biBidG4tZGVmYXVsdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tcGx1cycgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMCBBZGQgcG9zdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRwbDtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBCbG9nQ29tcDtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbnZhciBNeUxpc3RDb21wID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQyKSB7XG4gICAgX2luaGVyaXRzKE15TGlzdENvbXAsIF9SZWFjdCRDb21wb25lbnQyKTtcblxuICAgIGZ1bmN0aW9uIE15TGlzdENvbXAocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE15TGlzdENvbXApO1xuXG4gICAgICAgIHZhciBfdGhpczIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTXlMaXN0Q29tcC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE15TGlzdENvbXApKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMyLnN0YXRlID0ge1xuICAgICAgICAgICAgc3RhcnQ6IF90aGlzMi5wcm9wcy5teVBvc3RMaXN0LnN0YXJ0LFxuICAgICAgICAgICAgYmxvZzogX3RoaXMyLnByb3BzLm15UG9zdExpc3QuYmxvZyxcbiAgICAgICAgICAgIHBvc3RzOiBfdGhpczIucHJvcHMubXlQb3N0TGlzdC5wb3N0c1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX3RoaXMyO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhNeUxpc3RDb21wLCBbe1xuICAgICAgICBrZXk6ICdjb21wb25lbnRXaWxsTW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VQYWdlKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NoYW5nZVBhZ2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlUGFnZSgpIHtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMDtcblxuICAgICAgICAgICAgdGhpcy5wcm9wcy5kaXNwYXRjaCgoMCwgX2FjdGlvbi5ncmFwaHFsKSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ01ZX0JMT0dfREVUQUlMJyxcbiAgICAgICAgICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgICAgICAgICAgcGVycGFnZTogdGhpcy5wcm9wcy5teVBvc3RMaXN0LnBlcnBhZ2UsXG4gICAgICAgICAgICAgICAgYmxvZ0lkOiB0aGlzLnByb3BzLm15UG9zdExpc3QuYmxvZ0lkXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogbWFrZSB0aGUgYmxvZyBwdWJsaWMgb3IgaGlkZGVuXG4gICAgICAgICAqIEBwYXJhbSAge051bWJlcn0gcC5pZCBpZCBvZiBibG9nXG4gICAgICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IHAucHVibGljIHRydWUgLSBzaG93IGJsb2csIGZhbHNlIC0gaGlkZSBibG9nXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdwdWJsaWNCbG9nJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHB1YmxpY0Jsb2cocCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5kaXNwYXRjaCgoMCwgX2FjdGlvbi5ncmFwaHFsKSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ01ZX0JMT0dfUFVCTElDJyxcbiAgICAgICAgICAgICAgICBpZDogcC5pZCxcbiAgICAgICAgICAgICAgICBwdWJsaWM6IHAucHVibGljXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFBvc3RJdGVtcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQb3N0SXRlbXMoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoIXNlbGYucHJvcHMubXlQb3N0TGlzdC5wb3N0cyB8fCAhc2VsZi5wcm9wcy5teVBvc3RMaXN0LnBvc3RzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY2h1bmtlZEl0ZW1zID0gKDAsIF9sb2Rhc2guY2h1bmspKHRoaXMucHJvcHMubXlQb3N0TGlzdC5wb3N0cywgMyk7XG4gICAgICAgICAgICB2YXIgcG9zdHMgPSAoMCwgX2xvZGFzaC5tYXApKGNodW5rZWRJdGVtcywgZnVuY3Rpb24gKHBvc3RzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnRpdGlvbiA9ICgwLCBfbG9kYXNoLm1hcCkocG9zdHMsIGZ1bmN0aW9uIChwb3N0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wtbWQtNCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwgcGFuZWwtZGVmYXVsdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtaGVhZGluZycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaDQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC10aXRsZScgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGhyZWY6IFwiL3Bvc3QtZWRpdC9cIiArIHNlbGYucHJvcHMubXlQb3N0TGlzdC5ibG9nLmlkICsgXCIvXCIgKyBwb3N0LmlkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdC50aXRsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtYm9keScgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdC5kZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWZvb3RlcicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tdXNlcicgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXFx4QTAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdC51c2VyTmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi10aW1lJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0LmRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JvdycgfSxcbiAgICAgICAgICAgICAgICAgICAgcGFydGl0aW9uXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3RzO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIGFsZXJ0T3B0cyA9IG51bGwsXG4gICAgICAgICAgICAgICAgcG9zdHMgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5teVBvc3RMaXN0LnN0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgICAgIGFsZXJ0T3B0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZGFuZ2VyJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5wcm9wcy5teVBvc3RMaXN0LmVycm9yXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5zdGF0dXMgPT09ICdzZW5kJykge1xuICAgICAgICAgICAgICAgIGFsZXJ0T3B0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnaW5mbycsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdMb2FkaW5nLCBwbGVhc2Ugd2FpdCdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcGFnZXJQYXJhbSA9IHtcbiAgICAgICAgICAgICAgICBzdGFydDogdGhpcy5wcm9wcy5teVBvc3RMaXN0LnN0YXJ0LFxuICAgICAgICAgICAgICAgIHBlcnBhZ2U6IHRoaXMucHJvcHMubXlQb3N0TGlzdC5wZXJwYWdlLFxuICAgICAgICAgICAgICAgIGNvdW50OiB0aGlzLnByb3BzLm15UG9zdExpc3QuY291bnQsXG4gICAgICAgICAgICAgICAgaXRlbXM6IHRoaXMuZ2V0UG9zdEl0ZW1zKCksXG4gICAgICAgICAgICAgICAgY2hhbmdlUGFnZTogdGhpcy5jaGFuZ2VQYWdlLmJpbmQodGhpcylcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb21wb25lbnQuQWxlcnRNZXNzYWdlLCB7IG9wdHM6IGFsZXJ0T3B0cyB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ29sJyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdicmVhZGNydW1iJyB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHJlZjogJy9teS1ibG9ncycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTXkgYmxvZ3MnXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2xpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnYWN0aXZlJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5teVBvc3RMaXN0LmJsb2cgPyB0aGlzLnByb3BzLm15UG9zdExpc3QuYmxvZy50aXRsZSA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQmxvZ0NvbXAsIHsgYmxvZzogdGhpcy5wcm9wcy5teVBvc3RMaXN0LmJsb2csIHB1YmxpY0Jsb2c6IHRoaXMucHVibGljQmxvZy5iaW5kKHRoaXMpIH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb21wb25lbnQuUGFnaW5hdG9yTGF5b3V0LCB7IHBhcmFtOiBwYWdlclBhcmFtIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIE15TGlzdENvbXA7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG52YXIgbWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlKSB7XG4gICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSk7XG59O1xuTXlMaXN0Q29tcCA9ICgwLCBfcmVhY3RSZWR1eC5jb25uZWN0KShtYXBTdGF0ZVRvUHJvcHMpKE15TGlzdENvbXApO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBNeUxpc3RDb21wO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMzYzOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfbG9kYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cbnZhciBpbml0U3RhdGUgPSB7XG4gICAgYmxvZ0lkOiB3aW5kb3cubG9jYWxQYXJhbXMuYmxvZ0lkID8gcGFyc2VJbnQod2luZG93LmxvY2FsUGFyYW1zLmJsb2dJZCkgOiBudWxsLFxuICAgIHN0YXJ0OiB3aW5kb3cubG9jYWxQYXJhbXMuc3RhcnQgPyBwYXJzZUludCh3aW5kb3cubG9jYWxQYXJhbXMuc3RhcnQpIDogMCxcbiAgICBwZXJwYWdlOiB3aW5kb3cubG9jYWxQYXJhbXMucGVycGFnZSA/IHBhcnNlSW50KHdpbmRvdy5sb2NhbFBhcmFtcy5wZXJwYWdlKSA6IDksXG4gICAgY291bnQ6IDAsXG4gICAgYmxvZzogbnVsbCxcbiAgICBwb3N0czogW10sXG4gICAgc3RhdHVzOiBudWxsXG59O1xuXG52YXIgbXlQb3N0TGlzdCA9IGZ1bmN0aW9uIG15UG9zdExpc3QoKSB7XG4gICAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBpbml0U3RhdGU7XG4gICAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50c1sxXTtcblxuICAgIHZhciBkYXRhID0gX2V4dGVuZHMoe30sIHN0YXRlKTtcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ01ZX0JMT0dfREVUQUlMX1NFTkQnOlxuICAgICAgICAgICAgZGF0YS5zdGFydCA9IGFjdGlvbi5zdGFydDtcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3NlbmQnO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIGNhc2UgJ01ZX0JMT0dfREVUQUlMX1NVQ0NFU1MnOlxuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnc3VjY2Vzcyc7XG4gICAgICAgICAgICBkYXRhLmNvdW50ID0gYWN0aW9uLmRhdGEuZ2V0TXlCbG9nRGV0YWlsLmNvdW50O1xuICAgICAgICAgICAgZGF0YS5ibG9nID0gYWN0aW9uLmRhdGEuZ2V0TXlCbG9nRGV0YWlsLmJsb2c7XG4gICAgICAgICAgICBkYXRhLnBvc3RzID0gYWN0aW9uLmRhdGEuZ2V0TXlCbG9nRGV0YWlsLnBvc3RzO1xuXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgY2FzZSAnTVlfQkxPR19ERVRBSUxfRVJST1InOlxuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnZXJyb3InO1xuICAgICAgICAgICAgZGF0YS5lcnJvciA9IGFjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgICAgIGNhc2UgJ01ZX0JMT0dfUFVCTElDX1NFTkQnOlxuICAgICAgICAgICAgZGF0YS5zdGFydCA9IGFjdGlvbi5zdGFydDtcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3NlbmQnO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIGNhc2UgJ01ZX0JMT0dfUFVCTElDX1NVQ0NFU1MnOlxuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnc3VjY2Vzcyc7XG4gICAgICAgICAgICBkYXRhLmJsb2cucHVibGljID0gYWN0aW9uLmRhdGEucHVibGljTXlCbG9nLnB1YmxpYztcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2FjdGlvbi5kYXRhLnB1YmxpY015QmxvZycsIGFjdGlvbi5kYXRhLnB1YmxpY015QmxvZyk7XG5cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBjYXNlICdNWV9CTE9HX1BVQkxJQ19FUlJPUic6XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdlcnJvcic7XG4gICAgICAgICAgICBkYXRhLmVycm9yID0gYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG59O1xuZXhwb3J0cy5kZWZhdWx0ID0gbXlQb3N0TGlzdDtcblxuLypcblxubGV0IGluaXRTdGF0ZSA9IHtcbiAgICB1c2VySWQ6IHdpbmRvdy5sb2NhbFBhcmFtcy51c2VySWQgPyBwYXJzZUludCh3aW5kb3cubG9jYWxQYXJhbXMudXNlcklkKSA6IG51bGwsXG4gICAgc3RhcnQ6IHdpbmRvdy5sb2NhbFBhcmFtcy5zdGFydCA/IHBhcnNlSW50KHdpbmRvdy5sb2NhbFBhcmFtcy5zdGFydCkgOiAwLFxuICAgIHBlcnBhZ2U6IHdpbmRvdy5sb2NhbFBhcmFtcy5wZXJwYWdlID8gcGFyc2VJbnQod2luZG93LmxvY2FsUGFyYW1zLnBlcnBhZ2UpIDogOSxcbiAgICBibG9nczogW10sXG4gICAgY291bnQ6IDAsXG4gICAgc3RhdHVzOiBudWxsLFxufTtcblxuY29uc3QgbXlCbG9nTGlzdCA9IChzdGF0ZSA9IGluaXRTdGF0ZSwgYWN0aW9uKSA9PiB7XG4gICAgbGV0IGRhdGEgPSB7Li4uc3RhdGV9O1xuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnTVlfQkxPR19ERVRBSUxfU0VORCc6XG4gICAgICAgICAgICBkYXRhLnN0YXJ0ID0gYWN0aW9uLnN0YXJ0O1xuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnc2VuZCc7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgY2FzZSAnTVlfQkxPR19ERVRBSUxfU1VDQ0VTUyc6XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzdWNjZXNzJztcbiAgICAgICAgICAgIGRhdGEuYmxvZ3MgPSBhY3Rpb24uZGF0YS5nZXRNeUJsb2dMaXN0LmJsb2dzO1xuICAgICAgICAgICAgZGF0YS5jb3VudCA9IGFjdGlvbi5kYXRhLmdldE15QmxvZ0xpc3QuY291bnQ7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgY2FzZSAnTVlfQkxPR19ERVRBSUxfRVJST1InOlxuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnZXJyb3InO1xuICAgICAgICAgICAgZGF0YS5lcnJvciA9IGFjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgICAgIGNhc2UgJ01ZX1BPU1RfUFVCTElDX1NFTkQnOlxuICAgICAgICAgICAgZGF0YS5zdGFydCA9IGFjdGlvbi5zdGFydDtcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3NlbmQnO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIGNhc2UgJ01ZX1BPU1RfUFVCTElDX1NVQ0NFU1MnOlxuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnc3VjY2Vzcyc7XG4gICAgICAgICAgICBmb3JFYWNoKGRhdGEuYmxvZ3MsIChibG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGJsb2cuaWQgPT0gYWN0aW9uLmRhdGEucHVibGljTXlCbG9nLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2cucHVibGljID0gYWN0aW9uLmRhdGEucHVibGljTXlCbG9nLnB1YmxpYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgY2FzZSAnTVlfUE9TVF9QVUJMSUNfRVJST1InOlxuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnZXJyb3InO1xuICAgICAgICAgICAgZGF0YS5lcnJvciA9IGFjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gc3RhdGVcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG15QmxvZ0xpc3RcblxuKi9cblxuLyoqKi8gfSlcblxufSxbMzYxXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG15QmxvZ0RldGFpbC5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHJlbmRlciB9IGZyb20gJ3JlYWN0LWRvbSdcbmltcG9ydCB7IFByb3ZpZGVyIH0gZnJvbSAncmVhY3QtcmVkdXgnXG5cbmltcG9ydCAnYm9vdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5jc3MnO1xuaW1wb3J0ICcuL3N0eWxlcy9pbmRleC5zY3NzJ1xuXG5pbXBvcnQge2xheW91dH0gZnJvbSAnLi9oZWxwZXJzL2NvbXBvbmVudCdcbmltcG9ydCBNeUxpc3RDb21wIGZyb20gJy4vcG9zdC9NeUxpc3RDb21wJ1xuXG5pbXBvcnQgYXV0aCBmcm9tICcuL2F1dGgvTG9naW5SZWQnXG5pbXBvcnQgbXlQb3N0TGlzdCBmcm9tICcuL3Bvc3QvTXlMaXN0UmVkJ1xuXG5pbXBvcnQge2NvbmZpZ3VyZVN0b3JlfSBmcm9tICcuL2hlbHBlcnMvY29uZmlndXJlU3RvcmUnXG5cbmxldCBzdG9yZSA9IGNvbmZpZ3VyZVN0b3JlKHtcblx0YXV0aDogYXV0aCxcblx0bXlQb3N0TGlzdDogbXlQb3N0TGlzdCxcbn0pO1xuXG5sZXQgQ29tcCA9IGxheW91dCh7Y29tcDogTXlMaXN0Q29tcCwgZm9yQXV0aDogdHJ1ZX0pO1xucmVuZGVyKFxuXHQ8UHJvdmlkZXIgc3RvcmU9e3N0b3JlfT5cblx0XHQ8Q29tcCAvPlxuXHQ8L1Byb3ZpZGVyPixcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKVxuKVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3N0YXRpY19zcmMvbXlCbG9nRGV0YWlsLmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgeyBncmFwaHFsIH0gZnJvbSAnLi4vaGVscGVycy9hY3Rpb24nO1xuaW1wb3J0IHtmb3JFYWNoLCBjaHVuaywgbWFwfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHtBbGVydE1lc3NhZ2UsIFBhZ2luYXRvckxheW91dH0gZnJvbSAnLi4vaGVscGVycy9jb21wb25lbnQnO1xuXG5jbGFzcyBCbG9nQ29tcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgcmVuZGVyICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgdHBsID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYmxvZykge1xuICAgICAgICAgICAgbGV0IGhpZGVCdG4gPSBudWxsO1xuICAgICAgICAgICAgZnVuY3Rpb24gcHViQmxvZyAoZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5wcm9wcy5wdWJsaWNCbG9nKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHNlbGYucHJvcHMuYmxvZy5pZCxcbiAgICAgICAgICAgICAgICAgICAgcHVibGljOiAhIHNlbGYucHJvcHMuYmxvZy5wdWJsaWNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmJsb2cucHVibGljKSB7XG4gICAgICAgICAgICAgICAgaGlkZUJ0biA9IDxidG4gY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17cHViQmxvZ30gZGF0YS1pZD17dGhpcy5wcm9wcy5ibG9nLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIj48L3NwYW4+Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgIGhpZGVcbiAgICAgICAgICAgICAgICA8L2J0bj5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaGlkZUJ0biA9IDxidG4gY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17cHViQmxvZ30gZGF0YS1pZD17dGhpcy5wcm9wcy5ibG9nLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1va1wiPjwvc3Bhbj4mbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgc2hvd1xuICAgICAgICAgICAgICAgIDwvYnRuPlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cGwgPSA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsIHBhbmVsLWRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1oZWFkaW5nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwicGFuZWwtdGl0bGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5ibG9nLnRpdGxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogdGhpcy5wcm9wcy5ibG9nLnRleHR9fSAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1mb290ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tdXNlclwiPjwvc3Bhbj4mbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5ibG9nLnVzZXJOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO3wmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXRpbWVcIj48L3NwYW4+Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuYmxvZy5kYXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17XCIvYmxvZy1lZGl0L1wiICsgdGhpcy5wcm9wcy5ibG9nLmlkfSBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1wZW5jaWxcIj48L3NwYW4+Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2hpZGVCdG59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17XCIvcG9zdC1lZGl0L1wiICsgdGhpcy5wcm9wcy5ibG9nLmlkICsgXCIvLTFcIn0gY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tcGx1c1wiPjwvc3Bhbj4mbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkIHBvc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cGw7XG4gICAgfVxufVxuXG5cblxuXG5cbmNsYXNzIE15TGlzdENvbXAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc3RhcnQ6IHRoaXMucHJvcHMubXlQb3N0TGlzdC5zdGFydCxcbiAgICAgICAgICAgIGJsb2c6IHRoaXMucHJvcHMubXlQb3N0TGlzdC5ibG9nLFxuICAgICAgICAgICAgcG9zdHM6IHRoaXMucHJvcHMubXlQb3N0TGlzdC5wb3N0cyxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxNb3VudCAoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlUGFnZSgpO1xuICAgIH1cblxuICAgIGNoYW5nZVBhZ2UgKHN0YXJ0ID0gMCkge1xuICAgICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKGdyYXBocWwoe1xuICAgICAgICAgICAgdHlwZTogJ01ZX0JMT0dfREVUQUlMJyxcbiAgICAgICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgICAgIHBlcnBhZ2U6IHRoaXMucHJvcHMubXlQb3N0TGlzdC5wZXJwYWdlLFxuICAgICAgICAgICAgYmxvZ0lkOiB0aGlzLnByb3BzLm15UG9zdExpc3QuYmxvZ0lkLFxuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogbWFrZSB0aGUgYmxvZyBwdWJsaWMgb3IgaGlkZGVuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBwLmlkIGlkIG9mIGJsb2dcbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBwLnB1YmxpYyB0cnVlIC0gc2hvdyBibG9nLCBmYWxzZSAtIGhpZGUgYmxvZ1xuICAgICAqL1xuICAgIHB1YmxpY0Jsb2cgKHApIHtcbiAgICAgICAgdGhpcy5wcm9wcy5kaXNwYXRjaChncmFwaHFsKHtcbiAgICAgICAgICAgIHR5cGU6ICdNWV9CTE9HX1BVQkxJQycsXG4gICAgICAgICAgICBpZDogcC5pZCxcbiAgICAgICAgICAgIHB1YmxpYzogcC5wdWJsaWNcbiAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIGdldFBvc3RJdGVtcyAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgISBzZWxmLnByb3BzLm15UG9zdExpc3QucG9zdHMgfHwgXG4gICAgICAgICAgICAhIHNlbGYucHJvcHMubXlQb3N0TGlzdC5wb3N0cy5sZW5ndGhcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjaHVua2VkSXRlbXMgPSBjaHVuayh0aGlzLnByb3BzLm15UG9zdExpc3QucG9zdHMsIDMpO1xuICAgICAgICBsZXQgcG9zdHMgPSBtYXAoY2h1bmtlZEl0ZW1zLCBwb3N0cyA9PiB7XG4gICAgICAgICAgICBsZXQgcGFydGl0aW9uID0gbWFwKHBvc3RzLCBwb3N0ID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtNFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsIHBhbmVsLWRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtaGVhZGluZ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJwYW5lbC10aXRsZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmID0ge1wiL3Bvc3QtZWRpdC9cIiArIHNlbGYucHJvcHMubXlQb3N0TGlzdC5ibG9nLmlkICsgXCIvXCIgKyBwb3N0LmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwb3N0LnRpdGxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3Bvc3QuZGVzY3JpcHRpb259IFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWZvb3RlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXVzZXJcIj48L3NwYW4+Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwb3N0LnVzZXJOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi10aW1lXCI+PC9zcGFuPiZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cG9zdC5kYXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+e3BhcnRpdGlvbn08L2Rpdj5cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwb3N0cztcbiAgICB9XG5cbiAgICByZW5kZXIgKCkge1xuICAgICAgICBsZXQgYWxlcnRPcHRzID0gbnVsbCxcbiAgICAgICAgICAgIHBvc3RzID0gbnVsbDtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5teVBvc3RMaXN0LnN0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2RhbmdlcicsXG4gICAgICAgICAgICAgICAgdGV4dDogdGhpcy5wcm9wcy5teVBvc3RMaXN0LmVycm9yXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5zdGF0dXMgPT09ICdzZW5kJykge1xuICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2luZm8nLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdMb2FkaW5nLCBwbGVhc2Ugd2FpdCcsXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgbGV0IHBhZ2VyUGFyYW0gPSB7XG4gICAgICAgICAgICBzdGFydDogdGhpcy5wcm9wcy5teVBvc3RMaXN0LnN0YXJ0LFxuICAgICAgICAgICAgcGVycGFnZTogdGhpcy5wcm9wcy5teVBvc3RMaXN0LnBlcnBhZ2UsXG4gICAgICAgICAgICBjb3VudDogdGhpcy5wcm9wcy5teVBvc3RMaXN0LmNvdW50LFxuICAgICAgICAgICAgaXRlbXM6IHRoaXMuZ2V0UG9zdEl0ZW1zKCksXG4gICAgICAgICAgICBjaGFuZ2VQYWdlOiA6OnRoaXMuY2hhbmdlUGFnZSxcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiA8ZGl2PlxuICAgICAgICAgICAgICAgIDxBbGVydE1lc3NhZ2Ugb3B0cz17YWxlcnRPcHRzfSAvPlxuICAgICAgICAgICAgICAgIDxvbCBjbGFzc05hbWU9XCJicmVhZGNydW1iXCI+XG4gICAgICAgICAgICAgICAgICAgIDxsaT48YSBocmVmPVwiL215LWJsb2dzXCI+TXkgYmxvZ3M8L2E+PC9saT5cbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT1cImFjdGl2ZVwiPnt0aGlzLnByb3BzLm15UG9zdExpc3QuYmxvZyA/IHRoaXMucHJvcHMubXlQb3N0TGlzdC5ibG9nLnRpdGxlIDogbnVsbH08L2xpPlxuICAgICAgICAgICAgICAgIDwvb2w+XG4gICAgICAgICAgICAgICAgPEJsb2dDb21wIGJsb2c9e3RoaXMucHJvcHMubXlQb3N0TGlzdC5ibG9nfSBwdWJsaWNCbG9nPXs6OnRoaXMucHVibGljQmxvZ30vPlxuICAgICAgICAgICAgICAgIDxQYWdpbmF0b3JMYXlvdXQgcGFyYW09e3BhZ2VyUGFyYW19IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICB9XG59XG5cbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IChzdGF0ZSkgPT4ge1xuICAgIHJldHVybiB7Li4uc3RhdGV9XG59XG5NeUxpc3RDb21wID0gY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMpKE15TGlzdENvbXApXG5cbmV4cG9ydCBkZWZhdWx0IE15TGlzdENvbXBcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3N0YXRpY19zcmMvcG9zdC9NeUxpc3RDb21wLmpzIiwiaW1wb3J0IHtmb3JFYWNofSBmcm9tICdsb2Rhc2gnO1xuXG5sZXQgaW5pdFN0YXRlID0ge1xuICAgIGJsb2dJZDogd2luZG93LmxvY2FsUGFyYW1zLmJsb2dJZCA/IHBhcnNlSW50KHdpbmRvdy5sb2NhbFBhcmFtcy5ibG9nSWQpIDogbnVsbCxcbiAgICBzdGFydDogd2luZG93LmxvY2FsUGFyYW1zLnN0YXJ0ID8gcGFyc2VJbnQod2luZG93LmxvY2FsUGFyYW1zLnN0YXJ0KSA6IDAsXG4gICAgcGVycGFnZTogd2luZG93LmxvY2FsUGFyYW1zLnBlcnBhZ2UgPyBwYXJzZUludCh3aW5kb3cubG9jYWxQYXJhbXMucGVycGFnZSkgOiA5LFxuICAgIGNvdW50OiAwLFxuICAgIGJsb2c6IG51bGwsXG4gICAgcG9zdHM6IFtdLFxuICAgIHN0YXR1czogbnVsbCxcbn07XG5cbmNvbnN0IG15UG9zdExpc3QgPSAoc3RhdGUgPSBpbml0U3RhdGUsIGFjdGlvbikgPT4ge1xuICAgIGxldCBkYXRhID0gey4uLnN0YXRlfTtcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ01ZX0JMT0dfREVUQUlMX1NFTkQnOlxuICAgICAgICAgICAgZGF0YS5zdGFydCA9IGFjdGlvbi5zdGFydDtcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3NlbmQnO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIGNhc2UgJ01ZX0JMT0dfREVUQUlMX1NVQ0NFU1MnOlxuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnc3VjY2Vzcyc7XG4gICAgICAgICAgICBkYXRhLmNvdW50ID0gYWN0aW9uLmRhdGEuZ2V0TXlCbG9nRGV0YWlsLmNvdW50O1xuICAgICAgICAgICAgZGF0YS5ibG9nID0gYWN0aW9uLmRhdGEuZ2V0TXlCbG9nRGV0YWlsLmJsb2c7XG4gICAgICAgICAgICBkYXRhLnBvc3RzID0gYWN0aW9uLmRhdGEuZ2V0TXlCbG9nRGV0YWlsLnBvc3RzO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgY2FzZSAnTVlfQkxPR19ERVRBSUxfRVJST1InOlxuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnZXJyb3InO1xuICAgICAgICAgICAgZGF0YS5lcnJvciA9IGFjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgICAgIFxuICAgICAgICBjYXNlICdNWV9CTE9HX1BVQkxJQ19TRU5EJzpcbiAgICAgICAgICAgIGRhdGEuc3RhcnQgPSBhY3Rpb24uc3RhcnQ7XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzZW5kJztcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBjYXNlICdNWV9CTE9HX1BVQkxJQ19TVUNDRVNTJzpcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3N1Y2Nlc3MnO1xuICAgICAgICAgICAgZGF0YS5ibG9nLnB1YmxpYyA9IGFjdGlvbi5kYXRhLnB1YmxpY015QmxvZy5wdWJsaWM7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICdhY3Rpb24uZGF0YS5wdWJsaWNNeUJsb2cnLCBhY3Rpb24uZGF0YS5wdWJsaWNNeUJsb2dcbiAgICAgICAgICAgIClcblxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIGNhc2UgJ01ZX0JMT0dfUFVCTElDX0VSUk9SJzpcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ2Vycm9yJztcbiAgICAgICAgICAgIGRhdGEuZXJyb3IgPSBhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlXG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgbXlQb3N0TGlzdFxuXG4vKlxuXG5sZXQgaW5pdFN0YXRlID0ge1xuICAgIHVzZXJJZDogd2luZG93LmxvY2FsUGFyYW1zLnVzZXJJZCA/IHBhcnNlSW50KHdpbmRvdy5sb2NhbFBhcmFtcy51c2VySWQpIDogbnVsbCxcbiAgICBzdGFydDogd2luZG93LmxvY2FsUGFyYW1zLnN0YXJ0ID8gcGFyc2VJbnQod2luZG93LmxvY2FsUGFyYW1zLnN0YXJ0KSA6IDAsXG4gICAgcGVycGFnZTogd2luZG93LmxvY2FsUGFyYW1zLnBlcnBhZ2UgPyBwYXJzZUludCh3aW5kb3cubG9jYWxQYXJhbXMucGVycGFnZSkgOiA5LFxuICAgIGJsb2dzOiBbXSxcbiAgICBjb3VudDogMCxcbiAgICBzdGF0dXM6IG51bGwsXG59O1xuXG5jb25zdCBteUJsb2dMaXN0ID0gKHN0YXRlID0gaW5pdFN0YXRlLCBhY3Rpb24pID0+IHtcbiAgICBsZXQgZGF0YSA9IHsuLi5zdGF0ZX07XG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgICBjYXNlICdNWV9CTE9HX0RFVEFJTF9TRU5EJzpcbiAgICAgICAgICAgIGRhdGEuc3RhcnQgPSBhY3Rpb24uc3RhcnQ7XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzZW5kJztcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBjYXNlICdNWV9CTE9HX0RFVEFJTF9TVUNDRVNTJzpcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3N1Y2Nlc3MnO1xuICAgICAgICAgICAgZGF0YS5ibG9ncyA9IGFjdGlvbi5kYXRhLmdldE15QmxvZ0xpc3QuYmxvZ3M7XG4gICAgICAgICAgICBkYXRhLmNvdW50ID0gYWN0aW9uLmRhdGEuZ2V0TXlCbG9nTGlzdC5jb3VudDtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBjYXNlICdNWV9CTE9HX0RFVEFJTF9FUlJPUic6XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdlcnJvcic7XG4gICAgICAgICAgICBkYXRhLmVycm9yID0gYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICAgICAgY2FzZSAnTVlfUE9TVF9QVUJMSUNfU0VORCc6XG4gICAgICAgICAgICBkYXRhLnN0YXJ0ID0gYWN0aW9uLnN0YXJ0O1xuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnc2VuZCc7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgY2FzZSAnTVlfUE9TVF9QVUJMSUNfU1VDQ0VTUyc6XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzdWNjZXNzJztcbiAgICAgICAgICAgIGZvckVhY2goZGF0YS5ibG9ncywgKGJsb2cpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYmxvZy5pZCA9PSBhY3Rpb24uZGF0YS5wdWJsaWNNeUJsb2cuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxvZy5wdWJsaWMgPSBhY3Rpb24uZGF0YS5wdWJsaWNNeUJsb2cucHVibGljO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBjYXNlICdNWV9QT1NUX1BVQkxJQ19FUlJPUic6XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdlcnJvcic7XG4gICAgICAgICAgICBkYXRhLmVycm9yID0gYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbXlCbG9nTGlzdFxuXG4qL1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3N0YXRpY19zcmMvcG9zdC9NeUxpc3RSZWQuanMiXSwic291cmNlUm9vdCI6IiJ9
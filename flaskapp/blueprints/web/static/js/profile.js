webpackJsonp([0],{319:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var n=a(4),r=l(n),s=a(15),i=a(9);a(25),a(26);var o=a(11),u=a(320),c=l(u),d=a(27),f=l(d),p=a(321),m=l(p),h=a(28),E=(0,h.configureStore)({auth:f.default,profile:m.default}),g=(0,o.layout)({comp:c.default,forAuth:!0});(0,s.render)(r.default.createElement(i.Provider,{store:E},r.default.createElement(g,null)),document.getElementById("root"))},320:function(e,t,a){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(4),u=function(e){return e&&e.__esModule?e:{default:e}}(o),c=a(9),d=a(31),f=a(11),p=function(e){function t(){return l(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),i(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-3"},u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("span",{className:"glyphicon glyphicon-bookmark"}),"  ",u.default.createElement("a",{href:"/my-blog-list"},"My blogs")),u.default.createElement("div",{className:"panel-body"},this.props.profile.countBlogs))),u.default.createElement("div",{className:"col-sm-3"},u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("span",{className:"glyphicon glyphicon-user"}),"  ",u.default.createElement("a",{href:"#"},"My friends")),u.default.createElement("div",{className:"panel-body"},"Friends : ",this.props.profile.friends,u.default.createElement("br",null),"Requests : ",this.props.profile.friendRequests,u.default.createElement("br",null),"My Requests : ",this.props.profile.selfFriendRequests,u.default.createElement("br",null)))),u.default.createElement("div",{className:"col-sm-3"},u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("span",{className:"glyphicon glyphicon-envelope"}),"  ",u.default.createElement("a",{href:"/chats"},"My chats")),u.default.createElement("div",{className:"panel-body"},this.props.profile.countChats))))}}]),t}(u.default.Component),m=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={login:a.props.profile.login,email:a.props.profile.email,edit:!1},a}return r(t,e),i(t,[{key:"formSubmit",value:function(e){e.preventDefault(),this.props.dispatch((0,d.graphql)({type:"PROFILE_EDIT",login:this.state.login,email:this.state.email}))}},{key:"fieldChange",value:function(e){var t={};t[e.target.id]=e.target.value,this.setState(t)}},{key:"setMode",value:function(e){this.setState({edit:!this.state.edit})}},{key:"componentWillReceiveProps",value:function(e){this.setState({login:e.profile.login,email:e.profile.email})}},{key:"render",value:function(){var e="",t="";return this.state.edit?e="hidden":t="hidden",u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("button",{className:"btn btn-default "+t,onClick:this.setMode.bind(this)},u.default.createElement("span",{className:"glyphicon glyphicon-user"}),"   View profile"),u.default.createElement("button",{className:"btn btn-default "+e,onClick:this.setMode.bind(this)},u.default.createElement("span",{className:"glyphicon glyphicon-cog"}),"   Edit profile")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",{className:e},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-2"},u.default.createElement("label",null,"Login")),u.default.createElement("div",{className:"col-sm-10"},this.state.login)),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-2"},u.default.createElement("label",null,"Email")),u.default.createElement("div",{className:"col-sm-10"},this.state.email))),u.default.createElement("div",{className:t},u.default.createElement("form",{onSubmit:this.formSubmit.bind(this)},u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{htmlFor:"login"},"Login"),u.default.createElement("input",{type:"text",className:"form-control",id:"login",placeholder:"Login",value:this.state.login,onChange:this.fieldChange.bind(this)})),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{htmlFor:"email"},"Email address"),u.default.createElement("input",{type:"email",className:"form-control",id:"email",placeholder:"Email",value:this.state.email,onChange:this.fieldChange.bind(this)})),u.default.createElement("button",{type:"submit",className:"btn btn-default"},u.default.createElement("span",{className:"glyphicon glyphicon-floppy-disk"}),"  Submit")))))}}]),t}(u.default.Component),h=function(e){function t(){return l(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),i(t,[{key:"componentWillMount",value:function(){this.props.dispatch((0,d.graphql)({type:"PROFILE"}))}},{key:"render",value:function(){var e=null;return"error"===this.props.profile.status||"edit_error"===this.props.profile.status?e={className:"danger",text:this.props.profile.error||this.props.profile.error}:"send"===this.props.profile.status?e={className:"info",text:"Loading, please wait"}:"edit_success"===this.props.profile.status&&(e={className:"success",text:"The profile updated successfully"}),u.default.createElement("div",null,u.default.createElement(f.AlertMessage,{opts:e}),u.default.createElement(m,{profile:this.props.profile,dispatch:this.props.dispatch}),u.default.createElement(p,{profile:this.props.profile}))}}]),t}(u.default.Component),E=function(e){return s({},e)};h=(0,c.connect)(E)(h),t.default=h},321:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},n={id:"",login:"",email:"",friends:"",friendRequests:0,selfFriendRequests:0,countChats:0,countBlogs:0,status:null,error:null},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1],a=null;switch(t.type){case"PROFILE_SEND":var r=l({},e);return r.status="send",r;case"PROFILE_SUCCESS":return a=l({},t.data.profile),{_id:a._id,login:a.login,email:a.email,friends:a.friends||0,friendRequests:a.friendRequests||0,selfFriendRequests:a.selfFriendRequests||0,countChats:a.countChats||0,countBlogs:a.countBlogs||0,status:"success",error:null};case"PROFILE_ERROR":var s=l({},e);return s.status="error",s.error=t.error,s;case"PROFILE_EDIT_SEND":return e=l({},e),e.login=t.login,e.email=t.email,e.status="send",e;case"PROFILE_EDIT_SUCCESS":return a=l({},t.data.editProfile),e=l({},e),e.login=a.login,e.email=a.email,e.status="edit_success",e.error=null,e;case"PROFILE_EDIT_ERROR":return e=l({},e),e.status="edit_error",e.error=t.error,e;default:return e}};t.default=r}},[319]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vcHJvZmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWNfc3JjL3Byb2ZpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljX3NyYy9wcm9maWxlL1Byb2ZpbGVDb21wLmpzIiwid2VicGFjazovLy8uL3N0YXRpY19zcmMvcHJvZmlsZS9Qcm9maWxlUmVkLmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucCIsIjMxOSIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX3JlYWN0IiwiX3JlYWN0MiIsIl9yZWFjdERvbSIsIl9yZWFjdFJlZHV4IiwiX2NvbXBvbmVudCIsIl9Qcm9maWxlQ29tcCIsIl9Qcm9maWxlQ29tcDIiLCJfTG9naW5SZWQiLCJfTG9naW5SZWQyIiwiX1Byb2ZpbGVSZWQiLCJfUHJvZmlsZVJlZDIiLCJfY29uZmlndXJlU3RvcmUiLCJzdG9yZSIsImNvbmZpZ3VyZVN0b3JlIiwiYXV0aCIsInByb2ZpbGUiLCJDb21wIiwibGF5b3V0IiwiY29tcCIsIlByb2ZpbGVDb21wIiwiZm9yQXV0aCIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJQcm92aWRlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCIzMjAiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJzZWxmIiwiY2FsbCIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwicHJvdG90eXBlIiwiT2JqZWN0IiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJ2YWx1ZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGVmaW5lUHJvcGVydHkiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfYWN0aW9uIiwiTnVtSW5mbyIsIl9SZWFjdCRDb21wb25lbnQiLCJ0aGlzIiwiZ2V0UHJvdG90eXBlT2YiLCJhcHBseSIsImNsYXNzTmFtZSIsImhyZWYiLCJjb3VudEJsb2dzIiwiZnJpZW5kcyIsImZyaWVuZFJlcXVlc3RzIiwic2VsZkZyaWVuZFJlcXVlc3RzIiwiY291bnRDaGF0cyIsIlJlYWN0IiwiQ29tcG9uZW50IiwiVXNlckluZm8iLCJfUmVhY3QkQ29tcG9uZW50MiIsIl90aGlzMiIsInN0YXRlIiwibG9naW4iLCJlbWFpbCIsImVkaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJkaXNwYXRjaCIsImdyYXBocWwiLCJ0eXBlIiwic3RhdGVPYmoiLCJpZCIsInNldFN0YXRlIiwibmV3UHJvcHMiLCJpbmZvQ2xhc3MiLCJmb3JtQ2xhc3MiLCJvbkNsaWNrIiwic2V0TW9kZSIsImJpbmQiLCJvblN1Ym1pdCIsImZvcm1TdWJtaXQiLCJodG1sRm9yIiwicGxhY2Vob2xkZXIiLCJvbkNoYW5nZSIsImZpZWxkQ2hhbmdlIiwiX1JlYWN0JENvbXBvbmVudDMiLCJhbGVydE9wdHMiLCJzdGF0dXMiLCJ0ZXh0IiwiZXJyb3IiLCJBbGVydE1lc3NhZ2UiLCJvcHRzIiwibWFwU3RhdGVUb1Byb3BzIiwiY29ubmVjdCIsIjMyMSIsImluaXRTdGF0ZSIsInVuZGVmaW5lZCIsImFjdGlvbiIsImRhdGEiLCJzZW5kU3RhdGUiLCJfaWQiLCJlcnJvclN0YXRlIiwiZWRpdFByb2ZpbGUiXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLElBRVJDLElBQ0EsU0FBVUMsRUFBUUMsRUFBU0Ms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SyxxQkFJRCxNQUhBQSxRQUFZQSxHQUNaQSxFQUFNMEIsT0FBUyxhQUNmMUIsRUFBTTRCLE1BQVFRLEVBQU9SLE1BQ2Q1QixDQUNYLFNBQ0ksTUFBT0EsSUhpY25CeEYsR0FBUUssUUc3Yk9nQixLSGljWiIsImZpbGUiOiJwcm9maWxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2VicGFja0pzb25wKFswXSx7XG5cbi8qKiovIDMxOTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cbnZhciBfcmVhY3RSZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cbl9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblxudmFyIF9jb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblxudmFyIF9Qcm9maWxlQ29tcCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIwKTtcblxudmFyIF9Qcm9maWxlQ29tcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Qcm9maWxlQ29tcCk7XG5cbnZhciBfTG9naW5SZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblxudmFyIF9Mb2dpblJlZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Mb2dpblJlZCk7XG5cbnZhciBfUHJvZmlsZVJlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIxKTtcblxudmFyIF9Qcm9maWxlUmVkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Byb2ZpbGVSZWQpO1xuXG52YXIgX2NvbmZpZ3VyZVN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBzdG9yZSA9ICgwLCBfY29uZmlndXJlU3RvcmUuY29uZmlndXJlU3RvcmUpKHtcblx0YXV0aDogX0xvZ2luUmVkMi5kZWZhdWx0LFxuXHRwcm9maWxlOiBfUHJvZmlsZVJlZDIuZGVmYXVsdFxufSk7XG5cbnZhciBDb21wID0gKDAsIF9jb21wb25lbnQubGF5b3V0KSh7IGNvbXA6IF9Qcm9maWxlQ29tcDIuZGVmYXVsdCwgZm9yQXV0aDogdHJ1ZSB9KTtcbigwLCBfcmVhY3REb20ucmVuZGVyKShfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0X3JlYWN0UmVkdXguUHJvdmlkZXIsXG5cdHsgc3RvcmU6IHN0b3JlIH0sXG5cdF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KENvbXAsIG51bGwpXG4pLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDMyMDpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3RSZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cbnZhciBfYWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7XG5cbnZhciBfY29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIE51bUluZm8gPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhOdW1JbmZvLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIE51bUluZm8oKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOdW1JbmZvKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE51bUluZm8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihOdW1JbmZvKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKE51bUluZm8sIFt7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnIH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS0zJyB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbCBwYW5lbC1kZWZhdWx0JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1oZWFkaW5nJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLWJvb2ttYXJrJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXFx4QTBcXHhBMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBocmVmOiAnL215LWJsb2ctbGlzdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ015IGJsb2dzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWJvZHknIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5wcm9maWxlLmNvdW50QmxvZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS0zJyB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbCBwYW5lbC1kZWZhdWx0JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1oZWFkaW5nJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLXVzZXInIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMFxceEEwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGhyZWY6ICcjJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTXkgZnJpZW5kcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1ib2R5JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGcmllbmRzIDogJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnByb2ZpbGUuZnJpZW5kcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYnInLCBudWxsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUmVxdWVzdHMgOiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHJvZmlsZS5mcmllbmRSZXF1ZXN0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYnInLCBudWxsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTXkgUmVxdWVzdHMgOiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHJvZmlsZS5zZWxmRnJpZW5kUmVxdWVzdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2JyJywgbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS0zJyB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbCBwYW5lbC1kZWZhdWx0JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1oZWFkaW5nJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLWVudmVsb3BlJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXFx4QTBcXHhBMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBocmVmOiAnL2NoYXRzJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTXkgY2hhdHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtYm9keScgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnByb2ZpbGUuY291bnRDaGF0c1xuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBOdW1JbmZvO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxuLyoqXG4gKiBDbGFzcyB3aXRoIHVzZXIgaW5mbyBhbmQgZm9yIHRvIGVkaXQgcHJvZmlsZVxuICogQHBhcmFtIHtzdHJpbmd9IGxvZ2luXG4gKiBAcGFyYW0ge3N0cmluZ30gZW1haWxcbiAqL1xuXG5cbnZhciBVc2VySW5mbyA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50Mikge1xuICAgIF9pbmhlcml0cyhVc2VySW5mbywgX1JlYWN0JENvbXBvbmVudDIpO1xuXG4gICAgZnVuY3Rpb24gVXNlckluZm8ocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVzZXJJbmZvKTtcblxuICAgICAgICB2YXIgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFVzZXJJbmZvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVXNlckluZm8pKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMyLnN0YXRlID0ge1xuICAgICAgICAgICAgbG9naW46IF90aGlzMi5wcm9wcy5wcm9maWxlLmxvZ2luLFxuICAgICAgICAgICAgZW1haWw6IF90aGlzMi5wcm9wcy5wcm9maWxlLmVtYWlsLFxuICAgICAgICAgICAgZWRpdDogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzMjtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoVXNlckluZm8sIFt7XG4gICAgICAgIGtleTogJ2Zvcm1TdWJtaXQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZm9ybVN1Ym1pdChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKCgwLCBfYWN0aW9uLmdyYXBocWwpKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnUFJPRklMRV9FRElUJyxcbiAgICAgICAgICAgICAgICBsb2dpbjogdGhpcy5zdGF0ZS5sb2dpbixcbiAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5zdGF0ZS5lbWFpbFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdmaWVsZENoYW5nZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaWVsZENoYW5nZShlKSB7XG4gICAgICAgICAgICB2YXIgc3RhdGVPYmogPSB7fTtcbiAgICAgICAgICAgIHN0YXRlT2JqW2UudGFyZ2V0LmlkXSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZU9iaik7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldE1vZGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TW9kZShlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBlZGl0OiAhdGhpcy5zdGF0ZS5lZGl0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5ld1Byb3BzKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBsb2dpbjogbmV3UHJvcHMucHJvZmlsZS5sb2dpbixcbiAgICAgICAgICAgICAgICBlbWFpbDogbmV3UHJvcHMucHJvZmlsZS5lbWFpbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgaW5mb0NsYXNzID0gXCJcIjtcbiAgICAgICAgICAgIHZhciBmb3JtQ2xhc3MgPSBcIlwiO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuZWRpdCkge1xuICAgICAgICAgICAgICAgIGluZm9DbGFzcyA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvcm1DbGFzcyA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsIHBhbmVsLWRlZmF1bHQnIH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWhlYWRpbmcnIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHQgXCIgKyBmb3JtQ2xhc3MsIG9uQ2xpY2s6IHRoaXMuc2V0TW9kZS5iaW5kKHRoaXMpIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi11c2VyJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMFxceEEwIFZpZXcgcHJvZmlsZSdcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBcImJ0biBidG4tZGVmYXVsdCBcIiArIGluZm9DbGFzcywgb25DbGljazogdGhpcy5zZXRNb2RlLmJpbmQodGhpcykgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLWNvZycgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnXFx4QTBcXHhBMCBFZGl0IHByb2ZpbGUnXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1ib2R5JyB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGluZm9DbGFzcyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS0yJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0xvZ2luJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTEwJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmxvZ2luXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncm93JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wtc20tMicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdFbWFpbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS0xMCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5lbWFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBmb3JtQ2xhc3MgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IG9uU3VibWl0OiB0aGlzLmZvcm1TdWJtaXQuYmluZCh0aGlzKSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdmb3JtLWdyb3VwJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGh0bWxGb3I6ICdsb2dpbicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdMb2dpbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZm9ybS1jb250cm9sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnbG9naW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdMb2dpbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5sb2dpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmZpZWxkQ2hhbmdlLmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdmb3JtLWdyb3VwJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGh0bWxGb3I6ICdlbWFpbCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdFbWFpbCBhZGRyZXNzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZW1haWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZm9ybS1jb250cm9sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnZW1haWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdFbWFpbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmZpZWxkQ2hhbmdlLmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnc3VibWl0JywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1mbG9wcHktZGlzaycgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMCBTdWJtaXQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBVc2VySW5mbztcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbjtcblxudmFyIFByb2ZpbGVDb21wID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQzKSB7XG4gICAgX2luaGVyaXRzKFByb2ZpbGVDb21wLCBfUmVhY3QkQ29tcG9uZW50Myk7XG5cbiAgICBmdW5jdGlvbiBQcm9maWxlQ29tcCgpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb2ZpbGVDb21wKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb2ZpbGVDb21wLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvZmlsZUNvbXApKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoUHJvZmlsZUNvbXAsIFt7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudFdpbGxNb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKCgwLCBfYWN0aW9uLmdyYXBocWwpKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnUFJPRklMRSdcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBhbGVydE9wdHMgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMucHJvZmlsZS5zdGF0dXMgPT09ICdlcnJvcicgfHwgdGhpcy5wcm9wcy5wcm9maWxlLnN0YXR1cyA9PT0gJ2VkaXRfZXJyb3InKSB7XG4gICAgICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdkYW5nZXInLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnByb3BzLnByb2ZpbGUuZXJyb3IgfHwgdGhpcy5wcm9wcy5wcm9maWxlLmVycm9yXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLnN0YXR1cyA9PT0gJ3NlbmQnKSB7XG4gICAgICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdpbmZvJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0xvYWRpbmcsIHBsZWFzZSB3YWl0J1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucHJvZmlsZS5zdGF0dXMgPT09ICdlZGl0X3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1RoZSBwcm9maWxlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5J1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb21wb25lbnQuQWxlcnRNZXNzYWdlLCB7IG9wdHM6IGFsZXJ0T3B0cyB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChVc2VySW5mbywgeyBwcm9maWxlOiB0aGlzLnByb3BzLnByb2ZpbGUsIGRpc3BhdGNoOiB0aGlzLnByb3BzLmRpc3BhdGNoIH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KE51bUluZm8sIHsgcHJvZmlsZTogdGhpcy5wcm9wcy5wcm9maWxlIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFByb2ZpbGVDb21wO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxudmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSkge1xuICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xufTtcblByb2ZpbGVDb21wID0gKDAsIF9yZWFjdFJlZHV4LmNvbm5lY3QpKG1hcFN0YXRlVG9Qcm9wcykoUHJvZmlsZUNvbXApO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm9maWxlQ29tcDtcblxuLyoqKi8gfSksXG5cbi8qKiovIDMyMTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgaW5pdFN0YXRlID0ge1xuICAgIGlkOiAnJyxcbiAgICBsb2dpbjogJycsXG4gICAgZW1haWw6ICcnLFxuICAgIGZyaWVuZHM6ICcnLFxuICAgIGZyaWVuZFJlcXVlc3RzOiAwLFxuICAgIHNlbGZGcmllbmRSZXF1ZXN0czogMCxcbiAgICBjb3VudENoYXRzOiAwLFxuICAgIGNvdW50QmxvZ3M6IDAsXG4gICAgc3RhdHVzOiBudWxsLFxuICAgIGVycm9yOiBudWxsXG59O1xudmFyIHByb2ZpbGUgPSBmdW5jdGlvbiBwcm9maWxlKCkge1xuICAgIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogaW5pdFN0YXRlO1xuICAgIHZhciBhY3Rpb24gPSBhcmd1bWVudHNbMV07XG5cbiAgICB2YXIgZGF0YSA9IG51bGw7XG5cbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ1BST0ZJTEVfU0VORCc6XG4gICAgICAgICAgICB2YXIgc2VuZFN0YXRlID0gX2V4dGVuZHMoe30sIHN0YXRlKTtcbiAgICAgICAgICAgIHNlbmRTdGF0ZS5zdGF0dXMgPSAnc2VuZCc7XG4gICAgICAgICAgICByZXR1cm4gc2VuZFN0YXRlO1xuICAgICAgICBjYXNlICdQUk9GSUxFX1NVQ0NFU1MnOlxuICAgICAgICAgICAgZGF0YSA9IF9leHRlbmRzKHt9LCBhY3Rpb24uZGF0YS5wcm9maWxlKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgX2lkOiBkYXRhLl9pZCxcbiAgICAgICAgICAgICAgICBsb2dpbjogZGF0YS5sb2dpbixcbiAgICAgICAgICAgICAgICBlbWFpbDogZGF0YS5lbWFpbCxcbiAgICAgICAgICAgICAgICBmcmllbmRzOiBkYXRhLmZyaWVuZHMgfHwgMCxcbiAgICAgICAgICAgICAgICBmcmllbmRSZXF1ZXN0czogZGF0YS5mcmllbmRSZXF1ZXN0cyB8fCAwLFxuICAgICAgICAgICAgICAgIHNlbGZGcmllbmRSZXF1ZXN0czogZGF0YS5zZWxmRnJpZW5kUmVxdWVzdHMgfHwgMCxcbiAgICAgICAgICAgICAgICBjb3VudENoYXRzOiBkYXRhLmNvdW50Q2hhdHMgfHwgMCxcbiAgICAgICAgICAgICAgICBjb3VudEJsb2dzOiBkYXRhLmNvdW50QmxvZ3MgfHwgMCxcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnUFJPRklMRV9FUlJPUic6XG4gICAgICAgICAgICB2YXIgZXJyb3JTdGF0ZSA9IF9leHRlbmRzKHt9LCBzdGF0ZSk7XG4gICAgICAgICAgICBlcnJvclN0YXRlLnN0YXR1cyA9ICdlcnJvcic7XG4gICAgICAgICAgICBlcnJvclN0YXRlLmVycm9yID0gYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yU3RhdGU7XG5cbiAgICAgICAgY2FzZSAnUFJPRklMRV9FRElUX1NFTkQnOlxuICAgICAgICAgICAgc3RhdGUgPSBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xuICAgICAgICAgICAgc3RhdGUubG9naW4gPSBhY3Rpb24ubG9naW47XG4gICAgICAgICAgICBzdGF0ZS5lbWFpbCA9IGFjdGlvbi5lbWFpbDtcbiAgICAgICAgICAgIHN0YXRlLnN0YXR1cyA9ICdzZW5kJztcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgY2FzZSAnUFJPRklMRV9FRElUX1NVQ0NFU1MnOlxuICAgICAgICAgICAgZGF0YSA9IF9leHRlbmRzKHt9LCBhY3Rpb24uZGF0YS5lZGl0UHJvZmlsZSk7XG4gICAgICAgICAgICBzdGF0ZSA9IF9leHRlbmRzKHt9LCBzdGF0ZSk7XG4gICAgICAgICAgICBzdGF0ZS5sb2dpbiA9IGRhdGEubG9naW47XG4gICAgICAgICAgICBzdGF0ZS5lbWFpbCA9IGRhdGEuZW1haWw7XG4gICAgICAgICAgICBzdGF0ZS5zdGF0dXMgPSAnZWRpdF9zdWNjZXNzJztcbiAgICAgICAgICAgIHN0YXRlLmVycm9yID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgY2FzZSAnUFJPRklMRV9FRElUX0VSUk9SJzpcbiAgICAgICAgICAgIHN0YXRlID0gX2V4dGVuZHMoe30sIHN0YXRlKTtcbiAgICAgICAgICAgIHN0YXRlLnN0YXR1cyA9ICdlZGl0X2Vycm9yJztcbiAgICAgICAgICAgIHN0YXRlLmVycm9yID0gYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IHByb2ZpbGU7XG5cbi8qKiovIH0pXG5cbn0sWzMxOV0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBwcm9maWxlLmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgcmVuZGVyIH0gZnJvbSAncmVhY3QtZG9tJ1xuaW1wb3J0IHsgUHJvdmlkZXIgfSBmcm9tICdyZWFjdC1yZWR1eCdcblxuaW1wb3J0ICdib290c3RyYXAvZGlzdC9jc3MvYm9vdHN0cmFwLmNzcyc7XG5pbXBvcnQgJy4vc3R5bGVzL2luZGV4LnNjc3MnXG5cbmltcG9ydCB7bGF5b3V0fSBmcm9tICcuL2hlbHBlcnMvY29tcG9uZW50J1xuaW1wb3J0IFByb2ZpbGVDb21wIGZyb20gJy4vcHJvZmlsZS9Qcm9maWxlQ29tcCdcblxuaW1wb3J0IGF1dGggZnJvbSAnLi9hdXRoL0xvZ2luUmVkJ1xuaW1wb3J0IHByb2ZpbGUgZnJvbSAnLi9wcm9maWxlL1Byb2ZpbGVSZWQnXG5cbmltcG9ydCB7Y29uZmlndXJlU3RvcmV9IGZyb20gJy4vaGVscGVycy9jb25maWd1cmVTdG9yZSdcblxubGV0IHN0b3JlID0gY29uZmlndXJlU3RvcmUoe1xuXHRhdXRoOiBhdXRoLFxuXHRwcm9maWxlOiBwcm9maWxlLFxufSk7XG5cbmxldCBDb21wID0gbGF5b3V0KHtjb21wOiBQcm9maWxlQ29tcCwgZm9yQXV0aDogdHJ1ZX0pO1xucmVuZGVyKFxuXHQ8UHJvdmlkZXIgc3RvcmU9e3N0b3JlfT5cblx0XHQ8Q29tcCAvPlxuXHQ8L1Byb3ZpZGVyPixcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKVxuKVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3N0YXRpY19zcmMvcHJvZmlsZS5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCdcblxuaW1wb3J0IHthcGksIGdyYXBocWx9IGZyb20gJy4uL2hlbHBlcnMvYWN0aW9uJ1xuaW1wb3J0IHtBbGVydE1lc3NhZ2V9IGZyb20gJy4uL2hlbHBlcnMvY29tcG9uZW50J1xuXG5cbmNsYXNzIE51bUluZm8gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHJlbmRlciAoKSB7XG4gICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tM1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwgcGFuZWwtZGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWhlYWRpbmdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tYm9va21hcmtcIj48L3NwYW4+Jm5ic3A7Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL215LWJsb2ctbGlzdFwiPk15IGJsb2dzPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5wcm9maWxlLmNvdW50QmxvZ3N9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNtLTNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsIHBhbmVsLWRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1oZWFkaW5nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXVzZXJcIj48L3NwYW4+Jm5ic3A7Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiPk15IGZyaWVuZHM8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIEZyaWVuZHMgOiB7dGhpcy5wcm9wcy5wcm9maWxlLmZyaWVuZHN9XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWVzdHMgOiB7dGhpcy5wcm9wcy5wcm9maWxlLmZyaWVuZFJlcXVlc3RzfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIE15IFJlcXVlc3RzIDoge3RoaXMucHJvcHMucHJvZmlsZS5zZWxmRnJpZW5kUmVxdWVzdHN9XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zbS0zXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbCBwYW5lbC1kZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtaGVhZGluZ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1lbnZlbG9wZVwiPjwvc3Bhbj4mbmJzcDsmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvY2hhdHNcIj5NeSBjaGF0czwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMucHJvZmlsZS5jb3VudENoYXRzfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICB9XG59XG5cbi8qKlxuICogQ2xhc3Mgd2l0aCB1c2VyIGluZm8gYW5kIGZvciB0byBlZGl0IHByb2ZpbGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBsb2dpblxuICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsXG4gKi9cbmNsYXNzIFVzZXJJbmZvIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBsb2dpbjogdGhpcy5wcm9wcy5wcm9maWxlLmxvZ2luLFxuICAgICAgICAgICAgZW1haWw6IHRoaXMucHJvcHMucHJvZmlsZS5lbWFpbCxcbiAgICAgICAgICAgIGVkaXQ6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZvcm1TdWJtaXQgKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKGdyYXBocWwoe1xuICAgICAgICAgICAgdHlwZTogJ1BST0ZJTEVfRURJVCcsXG4gICAgICAgICAgICBsb2dpbjogdGhpcy5zdGF0ZS5sb2dpbixcbiAgICAgICAgICAgIGVtYWlsOiB0aGlzLnN0YXRlLmVtYWlsLFxuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgZmllbGRDaGFuZ2UgKGUpIHtcbiAgICAgICAgbGV0IHN0YXRlT2JqID0ge307XG4gICAgICAgIHN0YXRlT2JqW2UudGFyZ2V0LmlkXSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlT2JqKTtcbiAgICB9XG5cbiAgICBzZXRNb2RlIChlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZWRpdDogISB0aGlzLnN0YXRlLmVkaXQsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgKG5ld1Byb3BzKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbG9naW46IG5ld1Byb3BzLnByb2ZpbGUubG9naW4sXG4gICAgICAgICAgICBlbWFpbDogbmV3UHJvcHMucHJvZmlsZS5lbWFpbCxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyICgpIHtcbiAgICAgICAgbGV0IGluZm9DbGFzcyA9IFwiXCI7XG4gICAgICAgIGxldCBmb3JtQ2xhc3MgPSBcIlwiO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5lZGl0KSB7XG4gICAgICAgICAgICBpbmZvQ2xhc3MgPSBcImhpZGRlblwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9ybUNsYXNzID0gXCJoaWRkZW5cIlxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwgcGFuZWwtZGVmYXVsdFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1oZWFkaW5nXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9e1wiYnRuIGJ0bi1kZWZhdWx0IFwiICsgZm9ybUNsYXNzfSBvbkNsaWNrPXs6OnRoaXMuc2V0TW9kZX0gPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXVzZXJcIj48L3NwYW4+Jm5ic3A7Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgIFZpZXcgcHJvZmlsZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPXtcImJ0biBidG4tZGVmYXVsdCBcIiArIGluZm9DbGFzc30gb25DbGljaz17Ojp0aGlzLnNldE1vZGV9ID5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jb2dcIj48L3NwYW4+Jm5ic3A7Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgIEVkaXQgcHJvZmlsZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWJvZHlcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17aW5mb0NsYXNzfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNtLTJcIj48bGFiZWw+TG9naW48L2xhYmVsPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tMTBcIj57dGhpcy5zdGF0ZS5sb2dpbn08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNtLTJcIj48bGFiZWw+RW1haWw8L2xhYmVsPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tMTBcIj57dGhpcy5zdGF0ZS5lbWFpbH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Zm9ybUNsYXNzfT5cbiAgICAgICAgICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9ezo6dGhpcy5mb3JtU3VibWl0fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwibG9naW5cIj5Mb2dpbjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2xcIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJsb2dpblwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkxvZ2luXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubG9naW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXs6OnRoaXMuZmllbGRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJlbWFpbFwiPkVtYWlsIGFkZHJlc3M8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImVtYWlsXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZvcm0tY29udHJvbFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cImVtYWlsXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW1haWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5lbWFpbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9ezo6dGhpcy5maWVsZENoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLWZsb3BweS1kaXNrXCI+PC9zcGFuPiZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN1Ym1pdFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgfVxufTtcblxuXG5jbGFzcyBQcm9maWxlQ29tcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29tcG9uZW50V2lsbE1vdW50ICgpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5kaXNwYXRjaChncmFwaHFsKHtcbiAgICAgICAgICAgIHR5cGU6ICdQUk9GSUxFJyxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZW5kZXIgKCkge1xuICAgICAgICBsZXQgYWxlcnRPcHRzID0gbnVsbDtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5wcm9maWxlLnN0YXR1cyA9PT0gJ2Vycm9yJyB8fFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5wcm9maWxlLnN0YXR1cyA9PT0gJ2VkaXRfZXJyb3InXG4gICAgICAgICkge1xuICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2RhbmdlcicsXG4gICAgICAgICAgICAgICAgdGV4dDogdGhpcy5wcm9wcy5wcm9maWxlLmVycm9yIHx8IHRoaXMucHJvcHMucHJvZmlsZS5lcnJvclxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucHJvZmlsZS5zdGF0dXMgPT09ICdzZW5kJykge1xuICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2luZm8nLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdMb2FkaW5nLCBwbGVhc2Ugd2FpdCcsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLnN0YXR1cyA9PT0gJ2VkaXRfc3VjY2VzcycpIHtcbiAgICAgICAgICAgIGFsZXJ0T3B0cyA9IHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiAnVGhlIHByb2ZpbGUgdXBkYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gPGRpdj5cbiAgICAgICAgICAgIDxBbGVydE1lc3NhZ2Ugb3B0cz17YWxlcnRPcHRzfSAvPlxuICAgICAgICAgICAgPFVzZXJJbmZvIHByb2ZpbGU9e3RoaXMucHJvcHMucHJvZmlsZX0gZGlzcGF0Y2g9e3RoaXMucHJvcHMuZGlzcGF0Y2h9IC8+XG4gICAgICAgICAgICA8TnVtSW5mbyBwcm9maWxlPXt0aGlzLnByb3BzLnByb2ZpbGV9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgIH1cbn1cbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IChzdGF0ZSkgPT4ge1xuICAgIHJldHVybiB7Li4uc3RhdGV9XG59XG5Qcm9maWxlQ29tcCA9IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzKShQcm9maWxlQ29tcClcblxuZXhwb3J0IGRlZmF1bHQgUHJvZmlsZUNvbXBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zdGF0aWNfc3JjL3Byb2ZpbGUvUHJvZmlsZUNvbXAuanMiLCJsZXQgaW5pdFN0YXRlID0ge1xuICAgIGlkOiAnJyxcbiAgICBsb2dpbjogJycsXG4gICAgZW1haWw6ICcnLFxuICAgIGZyaWVuZHM6ICcnLFxuICAgIGZyaWVuZFJlcXVlc3RzOiAwLFxuICAgIHNlbGZGcmllbmRSZXF1ZXN0czogMCxcbiAgICBjb3VudENoYXRzOiAwLFxuICAgIGNvdW50QmxvZ3M6IDAsXG4gICAgc3RhdHVzOiBudWxsLFxuICAgIGVycm9yOiBudWxsLFxufTtcbmNvbnN0IHByb2ZpbGUgPSAoc3RhdGUgPSBpbml0U3RhdGUsIGFjdGlvbikgPT4ge1xuICAgIGxldCBkYXRhID0gbnVsbDtcbiAgICBcblxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnUFJPRklMRV9TRU5EJzpcbiAgICAgICAgICAgIGxldCBzZW5kU3RhdGUgPSB7Li4uc3RhdGV9O1xuICAgICAgICAgICAgc2VuZFN0YXRlLnN0YXR1cyA9ICdzZW5kJztcbiAgICAgICAgICAgIHJldHVybiBzZW5kU3RhdGU7XG4gICAgICAgIGNhc2UgJ1BST0ZJTEVfU1VDQ0VTUyc6XG4gICAgICAgICAgICBkYXRhID0gey4uLmFjdGlvbi5kYXRhLnByb2ZpbGV9O1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBfaWQ6IGRhdGEuX2lkLFxuICAgICAgICAgICAgICAgIGxvZ2luOiBkYXRhLmxvZ2luLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLFxuICAgICAgICAgICAgICAgIGZyaWVuZHM6IGRhdGEuZnJpZW5kcyB8fCAwLFxuICAgICAgICAgICAgICAgIGZyaWVuZFJlcXVlc3RzOiBkYXRhLmZyaWVuZFJlcXVlc3RzIHx8IDAsXG4gICAgICAgICAgICAgICAgc2VsZkZyaWVuZFJlcXVlc3RzOiBkYXRhLnNlbGZGcmllbmRSZXF1ZXN0cyB8fCAwLFxuICAgICAgICAgICAgICAgIGNvdW50Q2hhdHM6IGRhdGEuY291bnRDaGF0cyB8fCAwLFxuICAgICAgICAgICAgICAgIGNvdW50QmxvZ3M6IGRhdGEuY291bnRCbG9ncyB8fCAwLFxuICAgICAgICAgICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnUFJPRklMRV9FUlJPUic6XG4gICAgICAgICAgICBsZXQgZXJyb3JTdGF0ZSA9IHsuLi5zdGF0ZX07XG4gICAgICAgICAgICBlcnJvclN0YXRlLnN0YXR1cyA9ICdlcnJvcic7XG4gICAgICAgICAgICBlcnJvclN0YXRlLmVycm9yID0gYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yU3RhdGU7XG4gICAgICAgIFxuICAgICAgICBjYXNlICdQUk9GSUxFX0VESVRfU0VORCc6XG4gICAgICAgICAgICBzdGF0ZSA9IHsuLi5zdGF0ZX07XG4gICAgICAgICAgICBzdGF0ZS5sb2dpbiA9IGFjdGlvbi5sb2dpbjtcbiAgICAgICAgICAgIHN0YXRlLmVtYWlsID0gYWN0aW9uLmVtYWlsO1xuICAgICAgICAgICAgc3RhdGUuc3RhdHVzID0gJ3NlbmQnO1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICBjYXNlICdQUk9GSUxFX0VESVRfU1VDQ0VTUyc6XG4gICAgICAgICAgICBkYXRhID0gey4uLmFjdGlvbi5kYXRhLmVkaXRQcm9maWxlfTtcbiAgICAgICAgICAgIHN0YXRlID0gey4uLnN0YXRlfTtcbiAgICAgICAgICAgIHN0YXRlLmxvZ2luID0gZGF0YS5sb2dpbjtcbiAgICAgICAgICAgIHN0YXRlLmVtYWlsID0gZGF0YS5lbWFpbDtcbiAgICAgICAgICAgIHN0YXRlLnN0YXR1cyA9ICdlZGl0X3N1Y2Nlc3MnO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICBjYXNlICdQUk9GSUxFX0VESVRfRVJST1InOlxuICAgICAgICAgICAgc3RhdGUgPSB7Li4uc3RhdGV9O1xuICAgICAgICAgICAgc3RhdGUuc3RhdHVzID0gJ2VkaXRfZXJyb3InO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gc3RhdGVcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHByb2ZpbGVcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zdGF0aWNfc3JjL3Byb2ZpbGUvUHJvZmlsZVJlZC5qcyJdLCJzb3VyY2VSb290IjoiIn0=
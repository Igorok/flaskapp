webpackJsonp([2],{311:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var n=a(6),r=l(n),s=a(17),i=a(19);a(42),a(43);var o=a(23),u=a(312),c=l(u),d=a(44),f=l(d),p=a(313),m=l(p),h=a(45),E=(0,h.configureStore)({auth:f.default,profile:m.default}),g=(0,o.layout)({comp:c.default,forAuth:!0});(0,s.render)(r.default.createElement(i.Provider,{store:E},r.default.createElement(g,null)),document.getElementById("root"))},312:function(e,t,a){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(6),u=function(e){return e&&e.__esModule?e:{default:e}}(o),c=a(19),d=a(60),f=a(23),p=function(e){function t(){return l(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),i(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-3"},u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("span",{className:"glyphicon glyphicon-bookmark"}),"  ",u.default.createElement("a",{href:"/my-blogs"},"My blogs")),u.default.createElement("div",{className:"panel-body"},this.props.profile.countBlogs))),u.default.createElement("div",{className:"col-sm-3"},u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("span",{className:"glyphicon glyphicon-user"}),"  ",u.default.createElement("a",{href:"#"},"My friends")),u.default.createElement("div",{className:"panel-body"},"Friends : ",this.props.profile.friends,u.default.createElement("br",null),"Requests : ",this.props.profile.friendRequests,u.default.createElement("br",null),"My Requests : ",this.props.profile.selfFriendRequests,u.default.createElement("br",null)))),u.default.createElement("div",{className:"col-sm-3"},u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("span",{className:"glyphicon glyphicon-envelope"}),"  ",u.default.createElement("a",{href:"/chats"},"My chats")),u.default.createElement("div",{className:"panel-body"},this.props.profile.countChats))))}}]),t}(u.default.Component),m=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={login:a.props.profile.login,email:a.props.profile.email,edit:!1},a}return r(t,e),i(t,[{key:"formSubmit",value:function(e){e.preventDefault(),this.props.dispatch((0,d.graphql)({type:"PROFILE_EDIT",login:this.state.login,email:this.state.email}))}},{key:"fieldChange",value:function(e){var t={};t[e.target.id]=e.target.value,this.setState(t)}},{key:"setMode",value:function(e){this.setState({edit:!this.state.edit})}},{key:"componentWillReceiveProps",value:function(e){this.setState({login:e.profile.login,email:e.profile.email})}},{key:"render",value:function(){var e="",t="";return this.state.edit?e="hidden":t="hidden",u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("button",{className:"btn btn-default "+t,onClick:this.setMode.bind(this)},u.default.createElement("span",{className:"glyphicon glyphicon-user"}),"   View profile"),u.default.createElement("button",{className:"btn btn-default "+e,onClick:this.setMode.bind(this)},u.default.createElement("span",{className:"glyphicon glyphicon-cog"}),"   Edit profile")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",{className:e},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-2"},u.default.createElement("label",null,"Login")),u.default.createElement("div",{className:"col-sm-10"},this.state.login)),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-2"},u.default.createElement("label",null,"Email")),u.default.createElement("div",{className:"col-sm-10"},this.state.email))),u.default.createElement("div",{className:t},u.default.createElement("form",{onSubmit:this.formSubmit.bind(this)},u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{htmlFor:"login"},"Password"),u.default.createElement("input",{type:"text",className:"form-control",id:"login",placeholder:"Login",value:this.state.login,onChange:this.fieldChange.bind(this)})),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{htmlFor:"email"},"Email address"),u.default.createElement("input",{type:"email",className:"form-control",id:"email",placeholder:"Email",value:this.state.email,onChange:this.fieldChange.bind(this)})),u.default.createElement("button",{type:"submit",className:"btn btn-default"},u.default.createElement("span",{className:"glyphicon glyphicon-floppy-disk"}),"  Submit")))))}}]),t}(u.default.Component),h=function(e){function t(){return l(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),i(t,[{key:"componentWillMount",value:function(){this.props.dispatch((0,d.graphql)({type:"PROFILE"}))}},{key:"render",value:function(){var e=null;return"error"===this.props.profile.status||"edit_error"===this.props.profile.status?e={className:"danger",text:this.props.profile.error||this.props.profile.error}:"send"===this.props.profile.status?e={className:"info",text:"Loading, please wait"}:"edit_success"===this.props.profile.status&&(e={className:"success",text:"The profile updated successfully"}),u.default.createElement("div",null,u.default.createElement(f.AlertMessage,{opts:e}),u.default.createElement(m,{profile:this.props.profile,dispatch:this.props.dispatch}),u.default.createElement(p,{profile:this.props.profile}))}}]),t}(u.default.Component),E=function(e){return s({},e)};h=(0,c.connect)(E)(h),t.default=h},313:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},n={id:"",login:"",email:"",friends:"",friendRequests:0,selfFriendRequests:0,countChats:0,countBlogs:0,status:null,error:null},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1],a=null;switch(t.type){case"PROFILE_SEND":var r=l({},e);return r.status="send",r;case"PROFILE_SUCCESS":return a=l({},t.data.profile),{_id:a._id,login:a.login,email:a.email,friends:a.friends||0,friendRequests:a.friendRequests||0,selfFriendRequests:a.selfFriendRequests||0,countChats:a.countChats||0,countBlogs:a.countBlogs||0,status:"success",error:null};case"PROFILE_ERROR":var s=l({},e);return s.status="error",s.error=t.error,s;case"PROFILE_EDIT_SEND":return e=l({},e),e.login=t.login,e.email=t.email,e.status="send",e;case"PROFILE_EDIT_SUCCESS":return a=l({},t.data.editProfile),e=l({},e),e.login=a.login,e.email=a.email,e.status="edit_success",e.error=null,e;case"PROFILE_EDIT_ERROR":return e=l({},e),e.status="edit_error",e.error=t.error,e;default:return e}};t.default=r}},[311]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vcHJvZmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWNfc3JjL3Byb2ZpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljX3NyYy9wcm9maWxlL1Byb2ZpbGVDb21wLmpzIiwid2VicGFjazovLy8uL3N0YXRpY19zcmMvcHJvZmlsZS9Qcm9maWxlUmVkLmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucCIsIjMxMSIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX3JlYWN0IiwiX3JlYWN0MiIsIl9yZWFjdERvbSIsIl9yZWFjdFJlZHV4IiwiX2NvbXBvbmVudCIsIl9Qcm9maWxlQ29tcCIsIl9Qcm9maWxlQ29tcDIiLCJfTG9naW5SZWQiLCJfTG9naW5SZWQyIiwiX1Byb2ZpbGVSZWQiLCJfUHJvZmlsZVJlZDIiLCJfY29uZmlndXJlU3RvcmUiLCJzdG9yZSIsImNvbmZpZ3VyZVN0b3JlIiwiYXV0aCIsInByb2ZpbGUiLCJDb21wIiwibGF5b3V0IiwiY29tcCIsImZvckF1dGgiLCJyZW5kZXIiLCJjcmVhdGVFbGVtZW50IiwiUHJvdmlkZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiMzEyIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsImNhbGwiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsInByb3RvdHlwZSIsIk9iamVjdCIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwidmFsdWUiLCJlbnVtZXJhYmxlIiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImRlZmluZVByb3BlcnR5IiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX2FjdGlvbiIsIk51bUluZm8iLCJfUmVhY3QkQ29tcG9uZW50IiwidGhpcyIsImdldFByb3RvdHlwZU9mIiwiYXBwbHkiLCJjbGFzc05hbWUiLCJocmVmIiwiY291bnRCbG9ncyIsImZyaWVuZHMiLCJmcmllbmRSZXF1ZXN0cyIsInNlbGZGcmllbmRSZXF1ZXN0cyIsImNvdW50Q2hhdHMiLCJDb21wb25lbnQiLCJVc2VySW5mbyIsIl9SZWFjdCRDb21wb25lbnQyIiwiX3RoaXMyIiwic3RhdGUiLCJsb2dpbiIsImVtYWlsIiwiZWRpdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImRpc3BhdGNoIiwiZ3JhcGhxbCIsInR5cGUiLCJzdGF0ZU9iaiIsImlkIiwic2V0U3RhdGUiLCJuZXdQcm9wcyIsImluZm9DbGFzcyIsImZvcm1DbGFzcyIsIm9uQ2xpY2siLCJzZXRNb2RlIiwiYmluZCIsIm9uU3VibWl0IiwiZm9ybVN1Ym1pdCIsImh0bWxGb3IiLCJwbGFjZWhvbGRlciIsIm9uQ2hhbmdlIiwiZmllbGRDaGFuZ2UiLCJQcm9maWxlQ29tcCIsIl9SZWFjdCRDb21wb25lbnQzIiwiYWxlcnRPcHRzIiwic3RhdHVzIiwidGV4dCIsImVycm9yIiwiQWxlcnRNZXNzYWdlIiwib3B0cyIsIm1hcFN0YXRlVG9Qcm9wcyIsImNvbm5lY3QiLCIzMTMiLCJpbml0U3RhdGUiLCJ1bmRlZmluZWQiLCJhY3Rpb24iLCJkYXRhIiwic2VuZFN0YXRlIiwiX2lkIiwiZXJyb3JTdGF0ZSIsImVkaXRQcm9maWxlIl0sIm1hcHBpbmdzIjoiQUFBQUEsY0FBYyxJQUVSQyxJQUNBLFNBQVVDLEVBQVFDLEVBQVNDLEdBRWpDLFlB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SUQsTUFIQUEsUUFBWUEsR0FDWkEsRUFBTTJCLE9BQVMsYUFDZjNCLEVBQU02QixNQUFRUSxFQUFPUixNQUNkN0IsQ0FDWCxTQUNJLE1BQU9BLElIaWNuQnRGLEdBQVFLLFFHN2JPZ0IsS0hpY1oiLCJmaWxlIjoicHJvZmlsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIndlYnBhY2tKc29ucChbMl0se1xuXG4vKioqLyAzMTE6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXG52YXIgX3JlYWN0UmVkdXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cbl9fd2VicGFja19yZXF1aXJlX18oNDMpO1xuXG52YXIgX2NvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXG52YXIgX1Byb2ZpbGVDb21wID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMTIpO1xuXG52YXIgX1Byb2ZpbGVDb21wMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Byb2ZpbGVDb21wKTtcblxudmFyIF9Mb2dpblJlZCA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpO1xuXG52YXIgX0xvZ2luUmVkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xvZ2luUmVkKTtcblxudmFyIF9Qcm9maWxlUmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMTMpO1xuXG52YXIgX1Byb2ZpbGVSZWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUHJvZmlsZVJlZCk7XG5cbnZhciBfY29uZmlndXJlU3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHN0b3JlID0gKDAsIF9jb25maWd1cmVTdG9yZS5jb25maWd1cmVTdG9yZSkoe1xuXHRhdXRoOiBfTG9naW5SZWQyLmRlZmF1bHQsXG5cdHByb2ZpbGU6IF9Qcm9maWxlUmVkMi5kZWZhdWx0XG59KTtcblxudmFyIENvbXAgPSAoMCwgX2NvbXBvbmVudC5sYXlvdXQpKHsgY29tcDogX1Byb2ZpbGVDb21wMi5kZWZhdWx0LCBmb3JBdXRoOiB0cnVlIH0pO1xuKDAsIF9yZWFjdERvbS5yZW5kZXIpKF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHRfcmVhY3RSZWR1eC5Qcm92aWRlcixcblx0eyBzdG9yZTogc3RvcmUgfSxcblx0X3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQ29tcCwgbnVsbClcbiksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290JykpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMzEyOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdFJlZHV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cbnZhciBfYWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCk7XG5cbnZhciBfY29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIE51bUluZm8gPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhOdW1JbmZvLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIE51bUluZm8oKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOdW1JbmZvKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE51bUluZm8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihOdW1JbmZvKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKE51bUluZm8sIFt7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnIH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS0zJyB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbCBwYW5lbC1kZWZhdWx0JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1oZWFkaW5nJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLWJvb2ttYXJrJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXFx4QTBcXHhBMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBocmVmOiAnL215LWJsb2dzJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTXkgYmxvZ3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtYm9keScgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnByb2ZpbGUuY291bnRCbG9nc1xuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTMnIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsIHBhbmVsLWRlZmF1bHQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWhlYWRpbmcnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tdXNlcicgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwXFx4QTAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHJlZjogJyMnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNeSBmcmllbmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWJvZHknIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZyaWVuZHMgOiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHJvZmlsZS5mcmllbmRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdSZXF1ZXN0cyA6ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5wcm9maWxlLmZyaWVuZFJlcXVlc3RzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNeSBSZXF1ZXN0cyA6ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5wcm9maWxlLnNlbGZGcmllbmRSZXF1ZXN0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYnInLCBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTMnIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsIHBhbmVsLWRlZmF1bHQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWhlYWRpbmcnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tZW52ZWxvcGUnIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMFxceEEwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGhyZWY6ICcvY2hhdHMnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNeSBjaGF0cydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1ib2R5JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHJvZmlsZS5jb3VudENoYXRzXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIE51bUluZm87XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG4vKipcbiAqIENsYXNzIHdpdGggdXNlciBpbmZvIGFuZCBmb3IgdG8gZWRpdCBwcm9maWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9naW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbFxuICovXG5cblxudmFyIFVzZXJJbmZvID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQyKSB7XG4gICAgX2luaGVyaXRzKFVzZXJJbmZvLCBfUmVhY3QkQ29tcG9uZW50Mik7XG5cbiAgICBmdW5jdGlvbiBVc2VySW5mbyhwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVXNlckluZm8pO1xuXG4gICAgICAgIHZhciBfdGhpczIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVXNlckluZm8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihVc2VySW5mbykpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpczIuc3RhdGUgPSB7XG4gICAgICAgICAgICBsb2dpbjogX3RoaXMyLnByb3BzLnByb2ZpbGUubG9naW4sXG4gICAgICAgICAgICBlbWFpbDogX3RoaXMyLnByb3BzLnByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgICBlZGl0OiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX3RoaXMyO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhVc2VySW5mbywgW3tcbiAgICAgICAga2V5OiAnZm9ybVN1Ym1pdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JtU3VibWl0KGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goKDAsIF9hY3Rpb24uZ3JhcGhxbCkoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdQUk9GSUxFX0VESVQnLFxuICAgICAgICAgICAgICAgIGxvZ2luOiB0aGlzLnN0YXRlLmxvZ2luLFxuICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLnN0YXRlLmVtYWlsXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2ZpZWxkQ2hhbmdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpZWxkQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgIHZhciBzdGF0ZU9iaiA9IHt9O1xuICAgICAgICAgICAgc3RhdGVPYmpbZS50YXJnZXQuaWRdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlT2JqKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0TW9kZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRNb2RlKGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGVkaXQ6ICF0aGlzLnN0YXRlLmVkaXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV3UHJvcHMpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGxvZ2luOiBuZXdQcm9wcy5wcm9maWxlLmxvZ2luLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBuZXdQcm9wcy5wcm9maWxlLmVtYWlsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBpbmZvQ2xhc3MgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIGZvcm1DbGFzcyA9IFwiXCI7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5lZGl0KSB7XG4gICAgICAgICAgICAgICAgaW5mb0NsYXNzID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9ybUNsYXNzID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwgcGFuZWwtZGVmYXVsdCcgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtaGVhZGluZycgfSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBcImJ0biBidG4tZGVmYXVsdCBcIiArIGZvcm1DbGFzcywgb25DbGljazogdGhpcy5zZXRNb2RlLmJpbmQodGhpcykgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLXVzZXInIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwXFx4QTAgVmlldyBwcm9maWxlJ1xuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IFwiYnRuIGJ0bi1kZWZhdWx0IFwiICsgaW5mb0NsYXNzLCBvbkNsaWNrOiB0aGlzLnNldE1vZGUuYmluZCh0aGlzKSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tY29nJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMFxceEEwIEVkaXQgcHJvZmlsZSdcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWJvZHknIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogaW5mb0NsYXNzIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JvdycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTInIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTG9naW4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wtc20tMTAnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubG9naW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS0yJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0VtYWlsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTEwJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmVtYWlsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGZvcm1DbGFzcyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Zvcm0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgb25TdWJtaXQ6IHRoaXMuZm9ybVN1Ym1pdC5iaW5kKHRoaXMpIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Zvcm0tZ3JvdXAnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHRtbEZvcjogJ2xvZ2luJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1Bhc3N3b3JkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdmb3JtLWNvbnRyb2wnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdsb2dpbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ0xvZ2luJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLmxvZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuZmllbGRDaGFuZ2UuYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Zvcm0tZ3JvdXAnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHRtbEZvcjogJ2VtYWlsJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0VtYWlsIGFkZHJlc3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlbWFpbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdmb3JtLWNvbnRyb2wnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdlbWFpbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ0VtYWlsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuZmllbGRDaGFuZ2UuYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdzdWJtaXQnLCBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLWZsb3BweS1kaXNrJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwIFN1Ym1pdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFVzZXJJbmZvO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxuO1xuXG52YXIgUHJvZmlsZUNvbXAgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudDMpIHtcbiAgICBfaW5oZXJpdHMoUHJvZmlsZUNvbXAsIF9SZWFjdCRDb21wb25lbnQzKTtcblxuICAgIGZ1bmN0aW9uIFByb2ZpbGVDb21wKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvZmlsZUNvbXApO1xuXG4gICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvZmlsZUNvbXAuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm9maWxlQ29tcCkpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhQcm9maWxlQ29tcCwgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goKDAsIF9hY3Rpb24uZ3JhcGhxbCkoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdQUk9GSUxFJ1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIGFsZXJ0T3B0cyA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5wcm9maWxlLnN0YXR1cyA9PT0gJ2Vycm9yJyB8fCB0aGlzLnByb3BzLnByb2ZpbGUuc3RhdHVzID09PSAnZWRpdF9lcnJvcicpIHtcbiAgICAgICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2RhbmdlcicsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMucHJvcHMucHJvZmlsZS5lcnJvciB8fCB0aGlzLnByb3BzLnByb2ZpbGUuZXJyb3JcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2ZpbGUuc3RhdHVzID09PSAnc2VuZCcpIHtcbiAgICAgICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2luZm8nLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnTG9hZGluZywgcGxlYXNlIHdhaXQnXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLnN0YXR1cyA9PT0gJ2VkaXRfc3VjY2VzcycpIHtcbiAgICAgICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnVGhlIHByb2ZpbGUgdXBkYXRlZCBzdWNjZXNzZnVsbHknXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NvbXBvbmVudC5BbGVydE1lc3NhZ2UsIHsgb3B0czogYWxlcnRPcHRzIH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFVzZXJJbmZvLCB7IHByb2ZpbGU6IHRoaXMucHJvcHMucHJvZmlsZSwgZGlzcGF0Y2g6IHRoaXMucHJvcHMuZGlzcGF0Y2ggfSksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoTnVtSW5mbywgeyBwcm9maWxlOiB0aGlzLnByb3BzLnByb2ZpbGUgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gUHJvZmlsZUNvbXA7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG52YXIgbWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlKSB7XG4gICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSk7XG59O1xuUHJvZmlsZUNvbXAgPSAoMCwgX3JlYWN0UmVkdXguY29ubmVjdCkobWFwU3RhdGVUb1Byb3BzKShQcm9maWxlQ29tcCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb2ZpbGVDb21wO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMzEzOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBpbml0U3RhdGUgPSB7XG4gICAgaWQ6ICcnLFxuICAgIGxvZ2luOiAnJyxcbiAgICBlbWFpbDogJycsXG4gICAgZnJpZW5kczogJycsXG4gICAgZnJpZW5kUmVxdWVzdHM6IDAsXG4gICAgc2VsZkZyaWVuZFJlcXVlc3RzOiAwLFxuICAgIGNvdW50Q2hhdHM6IDAsXG4gICAgY291bnRCbG9nczogMCxcbiAgICBzdGF0dXM6IG51bGwsXG4gICAgZXJyb3I6IG51bGxcbn07XG52YXIgcHJvZmlsZSA9IGZ1bmN0aW9uIHByb2ZpbGUoKSB7XG4gICAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBpbml0U3RhdGU7XG4gICAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50c1sxXTtcblxuICAgIHZhciBkYXRhID0gbnVsbDtcblxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnUFJPRklMRV9TRU5EJzpcbiAgICAgICAgICAgIHZhciBzZW5kU3RhdGUgPSBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xuICAgICAgICAgICAgc2VuZFN0YXRlLnN0YXR1cyA9ICdzZW5kJztcbiAgICAgICAgICAgIHJldHVybiBzZW5kU3RhdGU7XG4gICAgICAgIGNhc2UgJ1BST0ZJTEVfU1VDQ0VTUyc6XG4gICAgICAgICAgICBkYXRhID0gX2V4dGVuZHMoe30sIGFjdGlvbi5kYXRhLnByb2ZpbGUpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBfaWQ6IGRhdGEuX2lkLFxuICAgICAgICAgICAgICAgIGxvZ2luOiBkYXRhLmxvZ2luLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLFxuICAgICAgICAgICAgICAgIGZyaWVuZHM6IGRhdGEuZnJpZW5kcyB8fCAwLFxuICAgICAgICAgICAgICAgIGZyaWVuZFJlcXVlc3RzOiBkYXRhLmZyaWVuZFJlcXVlc3RzIHx8IDAsXG4gICAgICAgICAgICAgICAgc2VsZkZyaWVuZFJlcXVlc3RzOiBkYXRhLnNlbGZGcmllbmRSZXF1ZXN0cyB8fCAwLFxuICAgICAgICAgICAgICAgIGNvdW50Q2hhdHM6IGRhdGEuY291bnRDaGF0cyB8fCAwLFxuICAgICAgICAgICAgICAgIGNvdW50QmxvZ3M6IGRhdGEuY291bnRCbG9ncyB8fCAwLFxuICAgICAgICAgICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgIGVycm9yOiBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdQUk9GSUxFX0VSUk9SJzpcbiAgICAgICAgICAgIHZhciBlcnJvclN0YXRlID0gX2V4dGVuZHMoe30sIHN0YXRlKTtcbiAgICAgICAgICAgIGVycm9yU3RhdGUuc3RhdHVzID0gJ2Vycm9yJztcbiAgICAgICAgICAgIGVycm9yU3RhdGUuZXJyb3IgPSBhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3JTdGF0ZTtcblxuICAgICAgICBjYXNlICdQUk9GSUxFX0VESVRfU0VORCc6XG4gICAgICAgICAgICBzdGF0ZSA9IF9leHRlbmRzKHt9LCBzdGF0ZSk7XG4gICAgICAgICAgICBzdGF0ZS5sb2dpbiA9IGFjdGlvbi5sb2dpbjtcbiAgICAgICAgICAgIHN0YXRlLmVtYWlsID0gYWN0aW9uLmVtYWlsO1xuICAgICAgICAgICAgc3RhdGUuc3RhdHVzID0gJ3NlbmQnO1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICBjYXNlICdQUk9GSUxFX0VESVRfU1VDQ0VTUyc6XG4gICAgICAgICAgICBkYXRhID0gX2V4dGVuZHMoe30sIGFjdGlvbi5kYXRhLmVkaXRQcm9maWxlKTtcbiAgICAgICAgICAgIHN0YXRlID0gX2V4dGVuZHMoe30sIHN0YXRlKTtcbiAgICAgICAgICAgIHN0YXRlLmxvZ2luID0gZGF0YS5sb2dpbjtcbiAgICAgICAgICAgIHN0YXRlLmVtYWlsID0gZGF0YS5lbWFpbDtcbiAgICAgICAgICAgIHN0YXRlLnN0YXR1cyA9ICdlZGl0X3N1Y2Nlc3MnO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICBjYXNlICdQUk9GSUxFX0VESVRfRVJST1InOlxuICAgICAgICAgICAgc3RhdGUgPSBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xuICAgICAgICAgICAgc3RhdGUuc3RhdHVzID0gJ2VkaXRfZXJyb3InO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gcHJvZmlsZTtcblxuLyoqKi8gfSlcblxufSxbMzExXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHByb2ZpbGUuanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyByZW5kZXIgfSBmcm9tICdyZWFjdC1kb20nXG5pbXBvcnQgeyBQcm92aWRlciB9IGZyb20gJ3JlYWN0LXJlZHV4J1xuXG5pbXBvcnQgJ2Jvb3RzdHJhcC9kaXN0L2Nzcy9ib290c3RyYXAuY3NzJztcbmltcG9ydCAnLi9zdHlsZXMvaW5kZXguc2NzcydcblxuaW1wb3J0IHtsYXlvdXR9IGZyb20gJy4vaGVscGVycy9jb21wb25lbnQnXG5pbXBvcnQgUHJvZmlsZUNvbXAgZnJvbSAnLi9wcm9maWxlL1Byb2ZpbGVDb21wJ1xuXG5pbXBvcnQgYXV0aCBmcm9tICcuL2F1dGgvTG9naW5SZWQnXG5pbXBvcnQgcHJvZmlsZSBmcm9tICcuL3Byb2ZpbGUvUHJvZmlsZVJlZCdcblxuaW1wb3J0IHtjb25maWd1cmVTdG9yZX0gZnJvbSAnLi9oZWxwZXJzL2NvbmZpZ3VyZVN0b3JlJ1xuXG5sZXQgc3RvcmUgPSBjb25maWd1cmVTdG9yZSh7XG5cdGF1dGg6IGF1dGgsXG5cdHByb2ZpbGU6IHByb2ZpbGUsXG59KTtcblxubGV0IENvbXAgPSBsYXlvdXQoe2NvbXA6IFByb2ZpbGVDb21wLCBmb3JBdXRoOiB0cnVlfSk7XG5yZW5kZXIoXG5cdDxQcm92aWRlciBzdG9yZT17c3RvcmV9PlxuXHRcdDxDb21wIC8+XG5cdDwvUHJvdmlkZXI+LFxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpXG4pXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3RhdGljX3NyYy9wcm9maWxlLmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4J1xuXG5pbXBvcnQge2FwaSwgZ3JhcGhxbH0gZnJvbSAnLi4vaGVscGVycy9hY3Rpb24nXG5pbXBvcnQge0FsZXJ0TWVzc2FnZX0gZnJvbSAnLi4vaGVscGVycy9jb21wb25lbnQnXG5cblxuY2xhc3MgTnVtSW5mbyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgcmVuZGVyICgpIHtcbiAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zbS0zXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbCBwYW5lbC1kZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtaGVhZGluZ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1ib29rbWFya1wiPjwvc3Bhbj4mbmJzcDsmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvbXktYmxvZ3NcIj5NeSBibG9nczwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMucHJvZmlsZS5jb3VudEJsb2dzfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zbS0zXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbCBwYW5lbC1kZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtaGVhZGluZ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi11c2VyXCI+PC9zcGFuPiZuYnNwOyZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNcIj5NeSBmcmllbmRzPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBGcmllbmRzIDoge3RoaXMucHJvcHMucHJvZmlsZS5mcmllbmRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVlc3RzIDoge3RoaXMucHJvcHMucHJvZmlsZS5mcmllbmRSZXF1ZXN0c31cbiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICBNeSBSZXF1ZXN0cyA6IHt0aGlzLnByb3BzLnByb2ZpbGUuc2VsZkZyaWVuZFJlcXVlc3RzfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tM1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwgcGFuZWwtZGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWhlYWRpbmdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tZW52ZWxvcGVcIj48L3NwYW4+Jm5ic3A7Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL2NoYXRzXCI+TXkgY2hhdHM8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnByb2ZpbGUuY291bnRDaGF0c31cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgfVxufVxuXG4vKipcbiAqIENsYXNzIHdpdGggdXNlciBpbmZvIGFuZCBmb3IgdG8gZWRpdCBwcm9maWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9naW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbFxuICovXG5jbGFzcyBVc2VySW5mbyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgbG9naW46IHRoaXMucHJvcHMucHJvZmlsZS5sb2dpbixcbiAgICAgICAgICAgIGVtYWlsOiB0aGlzLnByb3BzLnByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgICBlZGl0OiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmb3JtU3VibWl0IChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5wcm9wcy5kaXNwYXRjaChncmFwaHFsKHtcbiAgICAgICAgICAgIHR5cGU6ICdQUk9GSUxFX0VESVQnLFxuICAgICAgICAgICAgbG9naW46IHRoaXMuc3RhdGUubG9naW4sXG4gICAgICAgICAgICBlbWFpbDogdGhpcy5zdGF0ZS5lbWFpbCxcbiAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIGZpZWxkQ2hhbmdlIChlKSB7XG4gICAgICAgIGxldCBzdGF0ZU9iaiA9IHt9O1xuICAgICAgICBzdGF0ZU9ialtlLnRhcmdldC5pZF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZU9iaik7XG4gICAgfVxuXG4gICAgc2V0TW9kZSAoZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGVkaXQ6ICEgdGhpcy5zdGF0ZS5lZGl0LFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIChuZXdQcm9wcykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGxvZ2luOiBuZXdQcm9wcy5wcm9maWxlLmxvZ2luLFxuICAgICAgICAgICAgZW1haWw6IG5ld1Byb3BzLnByb2ZpbGUuZW1haWwsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlciAoKSB7XG4gICAgICAgIGxldCBpbmZvQ2xhc3MgPSBcIlwiO1xuICAgICAgICBsZXQgZm9ybUNsYXNzID0gXCJcIjtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZWRpdCkge1xuICAgICAgICAgICAgaW5mb0NsYXNzID0gXCJoaWRkZW5cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvcm1DbGFzcyA9IFwiaGlkZGVuXCJcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsIHBhbmVsLWRlZmF1bHRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtaGVhZGluZ1wiPlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPXtcImJ0biBidG4tZGVmYXVsdCBcIiArIGZvcm1DbGFzc30gb25DbGljaz17Ojp0aGlzLnNldE1vZGV9ID5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi11c2VyXCI+PC9zcGFuPiZuYnNwOyZuYnNwO1xuICAgICAgICAgICAgICAgICAgICBWaWV3IHByb2ZpbGVcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT17XCJidG4gYnRuLWRlZmF1bHQgXCIgKyBpbmZvQ2xhc3N9IG9uQ2xpY2s9ezo6dGhpcy5zZXRNb2RlfSA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tY29nXCI+PC9zcGFuPiZuYnNwOyZuYnNwO1xuICAgICAgICAgICAgICAgICAgICBFZGl0IHByb2ZpbGVcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2luZm9DbGFzc30+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zbS0yXCI+PGxhYmVsPkxvZ2luPC9sYWJlbD48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNtLTEwXCI+e3RoaXMuc3RhdGUubG9naW59PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zbS0yXCI+PGxhYmVsPkVtYWlsPC9sYWJlbD48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNtLTEwXCI+e3RoaXMuc3RhdGUuZW1haWx9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Zvcm1DbGFzc30+XG4gICAgICAgICAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXs6OnRoaXMuZm9ybVN1Ym1pdH0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImxvZ2luXCI+UGFzc3dvcmQ8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZm9ybS1jb250cm9sXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwibG9naW5cIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJMb2dpblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmxvZ2lufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17Ojp0aGlzLmZpZWxkQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiZW1haWxcIj5FbWFpbCBhZGRyZXNzPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJlbWFpbFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2xcIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJlbWFpbFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkVtYWlsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuZW1haWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXs6OnRoaXMuZmllbGRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1mbG9wcHktZGlza1wiPjwvc3Bhbj4mbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdWJtaXRcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cblxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIH1cbn07XG5cblxuY2xhc3MgUHJvZmlsZUNvbXAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbXBvbmVudFdpbGxNb3VudCAoKSB7XG4gICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goZ3JhcGhxbCh7XG4gICAgICAgICAgICB0eXBlOiAnUFJPRklMRScsXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcmVuZGVyICgpIHtcbiAgICAgICAgbGV0IGFsZXJ0T3B0cyA9IG51bGw7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMucHJvcHMucHJvZmlsZS5zdGF0dXMgPT09ICdlcnJvcicgfHxcbiAgICAgICAgICAgIHRoaXMucHJvcHMucHJvZmlsZS5zdGF0dXMgPT09ICdlZGl0X2Vycm9yJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIGFsZXJ0T3B0cyA9IHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdkYW5nZXInLFxuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMucHJvcHMucHJvZmlsZS5lcnJvciB8fCB0aGlzLnByb3BzLnByb2ZpbGUuZXJyb3JcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2ZpbGUuc3RhdHVzID09PSAnc2VuZCcpIHtcbiAgICAgICAgICAgIGFsZXJ0T3B0cyA9IHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdpbmZvJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiAnTG9hZGluZywgcGxlYXNlIHdhaXQnLFxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucHJvZmlsZS5zdGF0dXMgPT09ICdlZGl0X3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgdGV4dDogJ1RoZSBwcm9maWxlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIDxkaXY+XG4gICAgICAgICAgICA8QWxlcnRNZXNzYWdlIG9wdHM9e2FsZXJ0T3B0c30gLz5cbiAgICAgICAgICAgIDxVc2VySW5mbyBwcm9maWxlPXt0aGlzLnByb3BzLnByb2ZpbGV9IGRpc3BhdGNoPXt0aGlzLnByb3BzLmRpc3BhdGNofSAvPlxuICAgICAgICAgICAgPE51bUluZm8gcHJvZmlsZT17dGhpcy5wcm9wcy5wcm9maWxlfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICB9XG59XG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSAoc3RhdGUpID0+IHtcbiAgICByZXR1cm4gey4uLnN0YXRlfVxufVxuUHJvZmlsZUNvbXAgPSBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcykoUHJvZmlsZUNvbXApXG5cbmV4cG9ydCBkZWZhdWx0IFByb2ZpbGVDb21wXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3RhdGljX3NyYy9wcm9maWxlL1Byb2ZpbGVDb21wLmpzIiwibGV0IGluaXRTdGF0ZSA9IHtcbiAgICBpZDogJycsXG4gICAgbG9naW46ICcnLFxuICAgIGVtYWlsOiAnJyxcbiAgICBmcmllbmRzOiAnJyxcbiAgICBmcmllbmRSZXF1ZXN0czogMCxcbiAgICBzZWxmRnJpZW5kUmVxdWVzdHM6IDAsXG4gICAgY291bnRDaGF0czogMCxcbiAgICBjb3VudEJsb2dzOiAwLFxuICAgIHN0YXR1czogbnVsbCxcbiAgICBlcnJvcjogbnVsbCxcbn07XG5jb25zdCBwcm9maWxlID0gKHN0YXRlID0gaW5pdFN0YXRlLCBhY3Rpb24pID0+IHtcbiAgICBsZXQgZGF0YSA9IG51bGw7XG4gICAgXG5cbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ1BST0ZJTEVfU0VORCc6XG4gICAgICAgICAgICBsZXQgc2VuZFN0YXRlID0gey4uLnN0YXRlfTtcbiAgICAgICAgICAgIHNlbmRTdGF0ZS5zdGF0dXMgPSAnc2VuZCc7XG4gICAgICAgICAgICByZXR1cm4gc2VuZFN0YXRlO1xuICAgICAgICBjYXNlICdQUk9GSUxFX1NVQ0NFU1MnOlxuICAgICAgICAgICAgZGF0YSA9IHsuLi5hY3Rpb24uZGF0YS5wcm9maWxlfTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgX2lkOiBkYXRhLl9pZCxcbiAgICAgICAgICAgICAgICBsb2dpbjogZGF0YS5sb2dpbixcbiAgICAgICAgICAgICAgICBlbWFpbDogZGF0YS5lbWFpbCxcbiAgICAgICAgICAgICAgICBmcmllbmRzOiBkYXRhLmZyaWVuZHMgfHwgMCxcbiAgICAgICAgICAgICAgICBmcmllbmRSZXF1ZXN0czogZGF0YS5mcmllbmRSZXF1ZXN0cyB8fCAwLFxuICAgICAgICAgICAgICAgIHNlbGZGcmllbmRSZXF1ZXN0czogZGF0YS5zZWxmRnJpZW5kUmVxdWVzdHMgfHwgMCxcbiAgICAgICAgICAgICAgICBjb3VudENoYXRzOiBkYXRhLmNvdW50Q2hhdHMgfHwgMCxcbiAgICAgICAgICAgICAgICBjb3VudEJsb2dzOiBkYXRhLmNvdW50QmxvZ3MgfHwgMCxcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgJ1BST0ZJTEVfRVJST1InOlxuICAgICAgICAgICAgbGV0IGVycm9yU3RhdGUgPSB7Li4uc3RhdGV9O1xuICAgICAgICAgICAgZXJyb3JTdGF0ZS5zdGF0dXMgPSAnZXJyb3InO1xuICAgICAgICAgICAgZXJyb3JTdGF0ZS5lcnJvciA9IGFjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBlcnJvclN0YXRlO1xuICAgICAgICBcbiAgICAgICAgY2FzZSAnUFJPRklMRV9FRElUX1NFTkQnOlxuICAgICAgICAgICAgc3RhdGUgPSB7Li4uc3RhdGV9O1xuICAgICAgICAgICAgc3RhdGUubG9naW4gPSBhY3Rpb24ubG9naW47XG4gICAgICAgICAgICBzdGF0ZS5lbWFpbCA9IGFjdGlvbi5lbWFpbDtcbiAgICAgICAgICAgIHN0YXRlLnN0YXR1cyA9ICdzZW5kJztcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgY2FzZSAnUFJPRklMRV9FRElUX1NVQ0NFU1MnOlxuICAgICAgICAgICAgZGF0YSA9IHsuLi5hY3Rpb24uZGF0YS5lZGl0UHJvZmlsZX07XG4gICAgICAgICAgICBzdGF0ZSA9IHsuLi5zdGF0ZX07XG4gICAgICAgICAgICBzdGF0ZS5sb2dpbiA9IGRhdGEubG9naW47XG4gICAgICAgICAgICBzdGF0ZS5lbWFpbCA9IGRhdGEuZW1haWw7XG4gICAgICAgICAgICBzdGF0ZS5zdGF0dXMgPSAnZWRpdF9zdWNjZXNzJztcbiAgICAgICAgICAgIHN0YXRlLmVycm9yID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgY2FzZSAnUFJPRklMRV9FRElUX0VSUk9SJzpcbiAgICAgICAgICAgIHN0YXRlID0gey4uLnN0YXRlfTtcbiAgICAgICAgICAgIHN0YXRlLnN0YXR1cyA9ICdlZGl0X2Vycm9yJztcbiAgICAgICAgICAgIHN0YXRlLmVycm9yID0gYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBwcm9maWxlXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3RhdGljX3NyYy9wcm9maWxlL1Byb2ZpbGVSZWQuanMiXSwic291cmNlUm9vdCI6IiJ9
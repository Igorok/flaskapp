webpackJsonp([2],{314:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var n=a(6),r=l(n),s=a(16),i=a(14);a(35),a(36);var o=a(18),u=a(315),c=l(u),d=a(37),f=l(d),p=a(316),m=l(p),h=a(38),E=(0,h.configureStore)({auth:f.default,profile:m.default}),g=(0,o.layout)({comp:c.default,forAuth:!0});(0,s.render)(r.default.createElement(i.Provider,{store:E},r.default.createElement(g,null)),document.getElementById("root"))},315:function(e,t,a){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(6),u=function(e){return e&&e.__esModule?e:{default:e}}(o),c=a(14),d=a(46),f=a(18),p=function(e){function t(){return l(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),i(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-3"},u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("span",{className:"glyphicon glyphicon-bookmark"}),"  ",u.default.createElement("a",{href:"/my-blogs"},"My blogs")),u.default.createElement("div",{className:"panel-body"},this.props.profile.countBlogs))),u.default.createElement("div",{className:"col-sm-3"},u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("span",{className:"glyphicon glyphicon-user"}),"  ",u.default.createElement("a",{href:"#"},"My friends")),u.default.createElement("div",{className:"panel-body"},"Friends : ",this.props.profile.friends,u.default.createElement("br",null),"Requests : ",this.props.profile.friendRequests,u.default.createElement("br",null),"My Requests : ",this.props.profile.selfFriendRequests,u.default.createElement("br",null)))),u.default.createElement("div",{className:"col-sm-3"},u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("span",{className:"glyphicon glyphicon-envelope"}),"  ",u.default.createElement("a",{href:"/chats"},"My chats")),u.default.createElement("div",{className:"panel-body"},this.props.profile.countChats))))}}]),t}(u.default.Component),m=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={login:a.props.profile.login,email:a.props.profile.email,edit:!1},a}return r(t,e),i(t,[{key:"formSubmit",value:function(e){e.preventDefault(),this.props.dispatch((0,d.graphql)({type:"PROFILE_EDIT",login:this.state.login,email:this.state.email}))}},{key:"fieldChange",value:function(e){var t={};t[e.target.id]=e.target.value,this.setState(t)}},{key:"setMode",value:function(e){this.setState({edit:!this.state.edit})}},{key:"componentWillReceiveProps",value:function(e){this.setState({login:e.profile.login,email:e.profile.email})}},{key:"render",value:function(){var e="",t="";return this.state.edit?e="hidden":t="hidden",u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("button",{className:"btn btn-default "+t,onClick:this.setMode.bind(this)},u.default.createElement("span",{className:"glyphicon glyphicon-user"}),"   View profile"),u.default.createElement("button",{className:"btn btn-default "+e,onClick:this.setMode.bind(this)},u.default.createElement("span",{className:"glyphicon glyphicon-cog"}),"   Edit profile")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",{className:e},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-2"},u.default.createElement("label",null,"Login")),u.default.createElement("div",{className:"col-sm-10"},this.state.login)),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-2"},u.default.createElement("label",null,"Email")),u.default.createElement("div",{className:"col-sm-10"},this.state.email))),u.default.createElement("div",{className:t},u.default.createElement("form",{onSubmit:this.formSubmit.bind(this)},u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{htmlFor:"login"},"Password"),u.default.createElement("input",{type:"text",className:"form-control",id:"login",placeholder:"Login",value:this.state.login,onChange:this.fieldChange.bind(this)})),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{htmlFor:"email"},"Email address"),u.default.createElement("input",{type:"email",className:"form-control",id:"email",placeholder:"Email",value:this.state.email,onChange:this.fieldChange.bind(this)})),u.default.createElement("button",{type:"submit",className:"btn btn-default"},u.default.createElement("span",{className:"glyphicon glyphicon-floppy-disk"}),"  Submit")))))}}]),t}(u.default.Component),h=function(e){function t(){return l(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),i(t,[{key:"componentWillMount",value:function(){this.props.dispatch((0,d.graphql)({type:"PROFILE"}))}},{key:"render",value:function(){var e=null;return"error"===this.props.profile.status||"edit_error"===this.props.profile.status?e={className:"danger",text:this.props.profile.error||this.props.profile.error}:"send"===this.props.profile.status?e={className:"info",text:"Loading, please wait"}:"edit_success"===this.props.profile.status&&(e={className:"success",text:"The profile updated successfully"}),u.default.createElement("div",null,u.default.createElement(f.AlertMessage,{opts:e}),u.default.createElement(m,{profile:this.props.profile,dispatch:this.props.dispatch}),u.default.createElement(p,{profile:this.props.profile}))}}]),t}(u.default.Component),E=function(e){return s({},e)};h=(0,c.connect)(E)(h),t.default=h},316:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},n={id:"",login:"",email:"",friends:"",friendRequests:0,selfFriendRequests:0,countChats:0,countBlogs:0,status:null,error:null},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1],a=null;switch(t.type){case"PROFILE_SEND":var r=l({},e);return r.status="send",r;case"PROFILE_SUCCESS":return a=l({},t.data.profile),{_id:a._id,login:a.login,email:a.email,friends:a.friends||0,friendRequests:a.friendRequests||0,selfFriendRequests:a.selfFriendRequests||0,countChats:a.countChats||0,countBlogs:a.countBlogs||0,status:"success",error:null};case"PROFILE_ERROR":var s=l({},e);return s.status="error",s.error=t.error,s;case"PROFILE_EDIT_SEND":return e=l({},e),e.login=t.login,e.email=t.email,e.status="send",e;case"PROFILE_EDIT_SUCCESS":return a=l({},t.data.editProfile),e=l({},e),e.login=a.login,e.email=a.email,e.status="edit_success",e.error=null,e;case"PROFILE_EDIT_ERROR":return e=l({},e),e.status="edit_error",e.error=t.error,e;default:return e}};t.default=r}},[314]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vcHJvZmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWNfc3JjL3Byb2ZpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljX3NyYy9wcm9maWxlL1Byb2ZpbGVDb21wLmpzIiwid2VicGFjazovLy8uL3N0YXRpY19zcmMvcHJvZmlsZS9Qcm9maWxlUmVkLmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucCIsIjMxNCIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX3JlYWN0IiwiX3JlYWN0MiIsIl9yZWFjdERvbSIsIl9yZWFjdFJlZHV4IiwiX2NvbXBvbmVudCIsIl9Qcm9maWxlQ29tcCIsIl9Qcm9maWxlQ29tcDIiLCJfTG9naW5SZWQiLCJfTG9naW5SZWQyIiwiX1Byb2ZpbGVSZWQiLCJfUHJvZmlsZVJlZDIiLCJfY29uZmlndXJlU3RvcmUiLCJzdG9yZSIsImNvbmZpZ3VyZVN0b3JlIiwiYXV0aCIsInByb2ZpbGUiLCJDb21wIiwibGF5b3V0IiwiY29tcCIsIlByb2ZpbGVDb21wIiwiZm9yQXV0aCIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJQcm92aWRlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCIzMTUiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJzZWxmIiwiY2FsbCIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwicHJvdG90eXBlIiwiT2JqZWN0IiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJ2YWx1ZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGVmaW5lUHJvcGVydHkiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfYWN0aW9uIiwiTnVtSW5mbyIsIl9SZWFjdCRDb21wb25lbnQiLCJ0aGlzIiwiZ2V0UHJvdG90eXBlT2YiLCJhcHBseSIsImNsYXNzTmFtZSIsImhyZWYiLCJjb3VudEJsb2dzIiwiZnJpZW5kcyIsImZyaWVuZFJlcXVlc3RzIiwic2VsZkZyaWVuZFJlcXVlc3RzIiwiY291bnRDaGF0cyIsIlJlYWN0IiwiQ29tcG9uZW50IiwiVXNlckluZm8iLCJfUmVhY3QkQ29tcG9uZW50MiIsIl90aGlzMiIsInN0YXRlIiwibG9naW4iLCJlbWFpbCIsImVkaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJkaXNwYXRjaCIsImdyYXBocWwiLCJ0eXBlIiwic3RhdGVPYmoiLCJpZCIsInNldFN0YXRlIiwibmV3UHJvcHMiLCJpbmZvQ2xhc3MiLCJmb3JtQ2xhc3MiLCJvbkNsaWNrIiwic2V0TW9kZSIsImJpbmQiLCJvblN1Ym1pdCIsImZvcm1TdWJtaXQiLCJodG1sRm9yIiwicGxhY2Vob2xkZXIiLCJvbkNoYW5nZSIsImZpZWxkQ2hhbmdlIiwiX1JlYWN0JENvbXBvbmVudDMiLCJhbGVydE9wdHMiLCJzdGF0dXMiLCJ0ZXh0IiwiZXJyb3IiLCJBbGVydE1lc3NhZ2UiLCJvcHRzIiwibWFwU3RhdGVUb1Byb3BzIiwiY29ubmVjdCIsIjMxNiIsImluaXRTdGF0ZSIsInVuZGVmaW5lZCIsImFjdGlvbiIsImRhdGEiLCJzZW5kU3RhdGUiLCJfaWQiLCJlcnJvclN0YXRlIiwiZWRpdFByb2ZpbGUiXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLElBRVJDLElBQ0EsU0FBVUMsRUFBUUMsRUFBU0Ms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LHFCQUlELE1BSEFBLFFBQVlBLEdBQ1pBLEVBQU0wQixPQUFTLGFBQ2YxQixFQUFNNEIsTUFBUVEsRUFBT1IsTUFDZDVCLENBQ1gsU0FDSSxNQUFPQSxJSGljbkJ4RixHQUFRSyxRRzdiT2dCLEtIaWNaIiwiZmlsZSI6InByb2ZpbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3ZWJwYWNrSnNvbnAoWzJdLHtcblxuLyoqKi8gMzE0OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblxudmFyIF9yZWFjdFJlZHV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cbl9fd2VicGFja19yZXF1aXJlX18oMzUpO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblxudmFyIF9jb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblxudmFyIF9Qcm9maWxlQ29tcCA9IF9fd2VicGFja19yZXF1aXJlX18oMzE1KTtcblxudmFyIF9Qcm9maWxlQ29tcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Qcm9maWxlQ29tcCk7XG5cbnZhciBfTG9naW5SZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTtcblxudmFyIF9Mb2dpblJlZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Mb2dpblJlZCk7XG5cbnZhciBfUHJvZmlsZVJlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzE2KTtcblxudmFyIF9Qcm9maWxlUmVkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Byb2ZpbGVSZWQpO1xuXG52YXIgX2NvbmZpZ3VyZVN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBzdG9yZSA9ICgwLCBfY29uZmlndXJlU3RvcmUuY29uZmlndXJlU3RvcmUpKHtcblx0YXV0aDogX0xvZ2luUmVkMi5kZWZhdWx0LFxuXHRwcm9maWxlOiBfUHJvZmlsZVJlZDIuZGVmYXVsdFxufSk7XG5cbnZhciBDb21wID0gKDAsIF9jb21wb25lbnQubGF5b3V0KSh7IGNvbXA6IF9Qcm9maWxlQ29tcDIuZGVmYXVsdCwgZm9yQXV0aDogdHJ1ZSB9KTtcbigwLCBfcmVhY3REb20ucmVuZGVyKShfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0X3JlYWN0UmVkdXguUHJvdmlkZXIsXG5cdHsgc3RvcmU6IHN0b3JlIH0sXG5cdF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KENvbXAsIG51bGwpXG4pLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDMxNTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3RSZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXG52YXIgX2FjdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpO1xuXG52YXIgX2NvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBOdW1JbmZvID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoTnVtSW5mbywgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBOdW1JbmZvKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTnVtSW5mbyk7XG5cbiAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChOdW1JbmZvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTnVtSW5mbykpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhOdW1JbmZvLCBbe1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncm93JyB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wtc20tMycgfSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwgcGFuZWwtZGVmYXVsdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtaGVhZGluZycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1ib29rbWFyaycgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwXFx4QTAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHJlZjogJy9teS1ibG9ncycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ015IGJsb2dzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWJvZHknIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5wcm9maWxlLmNvdW50QmxvZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS0zJyB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbCBwYW5lbC1kZWZhdWx0JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1oZWFkaW5nJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLXVzZXInIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMFxceEEwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGhyZWY6ICcjJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTXkgZnJpZW5kcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1ib2R5JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGcmllbmRzIDogJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnByb2ZpbGUuZnJpZW5kcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYnInLCBudWxsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUmVxdWVzdHMgOiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHJvZmlsZS5mcmllbmRSZXF1ZXN0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYnInLCBudWxsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTXkgUmVxdWVzdHMgOiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHJvZmlsZS5zZWxmRnJpZW5kUmVxdWVzdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2JyJywgbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS0zJyB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbCBwYW5lbC1kZWZhdWx0JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1oZWFkaW5nJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLWVudmVsb3BlJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXFx4QTBcXHhBMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBocmVmOiAnL2NoYXRzJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTXkgY2hhdHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtYm9keScgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnByb2ZpbGUuY291bnRDaGF0c1xuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBOdW1JbmZvO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxuLyoqXG4gKiBDbGFzcyB3aXRoIHVzZXIgaW5mbyBhbmQgZm9yIHRvIGVkaXQgcHJvZmlsZVxuICogQHBhcmFtIHtzdHJpbmd9IGxvZ2luXG4gKiBAcGFyYW0ge3N0cmluZ30gZW1haWxcbiAqL1xuXG5cbnZhciBVc2VySW5mbyA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50Mikge1xuICAgIF9pbmhlcml0cyhVc2VySW5mbywgX1JlYWN0JENvbXBvbmVudDIpO1xuXG4gICAgZnVuY3Rpb24gVXNlckluZm8ocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVzZXJJbmZvKTtcblxuICAgICAgICB2YXIgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFVzZXJJbmZvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVXNlckluZm8pKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMyLnN0YXRlID0ge1xuICAgICAgICAgICAgbG9naW46IF90aGlzMi5wcm9wcy5wcm9maWxlLmxvZ2luLFxuICAgICAgICAgICAgZW1haWw6IF90aGlzMi5wcm9wcy5wcm9maWxlLmVtYWlsLFxuICAgICAgICAgICAgZWRpdDogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzMjtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoVXNlckluZm8sIFt7XG4gICAgICAgIGtleTogJ2Zvcm1TdWJtaXQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZm9ybVN1Ym1pdChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKCgwLCBfYWN0aW9uLmdyYXBocWwpKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnUFJPRklMRV9FRElUJyxcbiAgICAgICAgICAgICAgICBsb2dpbjogdGhpcy5zdGF0ZS5sb2dpbixcbiAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5zdGF0ZS5lbWFpbFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdmaWVsZENoYW5nZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaWVsZENoYW5nZShlKSB7XG4gICAgICAgICAgICB2YXIgc3RhdGVPYmogPSB7fTtcbiAgICAgICAgICAgIHN0YXRlT2JqW2UudGFyZ2V0LmlkXSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZU9iaik7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldE1vZGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TW9kZShlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBlZGl0OiAhdGhpcy5zdGF0ZS5lZGl0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5ld1Byb3BzKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBsb2dpbjogbmV3UHJvcHMucHJvZmlsZS5sb2dpbixcbiAgICAgICAgICAgICAgICBlbWFpbDogbmV3UHJvcHMucHJvZmlsZS5lbWFpbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgaW5mb0NsYXNzID0gXCJcIjtcbiAgICAgICAgICAgIHZhciBmb3JtQ2xhc3MgPSBcIlwiO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuZWRpdCkge1xuICAgICAgICAgICAgICAgIGluZm9DbGFzcyA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvcm1DbGFzcyA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsIHBhbmVsLWRlZmF1bHQnIH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWhlYWRpbmcnIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHQgXCIgKyBmb3JtQ2xhc3MsIG9uQ2xpY2s6IHRoaXMuc2V0TW9kZS5iaW5kKHRoaXMpIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi11c2VyJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMFxceEEwIFZpZXcgcHJvZmlsZSdcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBcImJ0biBidG4tZGVmYXVsdCBcIiArIGluZm9DbGFzcywgb25DbGljazogdGhpcy5zZXRNb2RlLmJpbmQodGhpcykgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLWNvZycgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnXFx4QTBcXHhBMCBFZGl0IHByb2ZpbGUnXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1ib2R5JyB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGluZm9DbGFzcyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS0yJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0xvZ2luJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTEwJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmxvZ2luXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncm93JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wtc20tMicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdFbWFpbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS0xMCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5lbWFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBmb3JtQ2xhc3MgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IG9uU3VibWl0OiB0aGlzLmZvcm1TdWJtaXQuYmluZCh0aGlzKSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdmb3JtLWdyb3VwJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGh0bWxGb3I6ICdsb2dpbicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdQYXNzd29yZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZm9ybS1jb250cm9sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnbG9naW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdMb2dpbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5sb2dpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmZpZWxkQ2hhbmdlLmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdmb3JtLWdyb3VwJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGh0bWxGb3I6ICdlbWFpbCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdFbWFpbCBhZGRyZXNzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZW1haWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZm9ybS1jb250cm9sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnZW1haWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdFbWFpbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmZpZWxkQ2hhbmdlLmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnc3VibWl0JywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1mbG9wcHktZGlzaycgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMCBTdWJtaXQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBVc2VySW5mbztcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbjtcblxudmFyIFByb2ZpbGVDb21wID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQzKSB7XG4gICAgX2luaGVyaXRzKFByb2ZpbGVDb21wLCBfUmVhY3QkQ29tcG9uZW50Myk7XG5cbiAgICBmdW5jdGlvbiBQcm9maWxlQ29tcCgpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb2ZpbGVDb21wKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb2ZpbGVDb21wLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvZmlsZUNvbXApKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoUHJvZmlsZUNvbXAsIFt7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudFdpbGxNb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKCgwLCBfYWN0aW9uLmdyYXBocWwpKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnUFJPRklMRSdcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBhbGVydE9wdHMgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMucHJvZmlsZS5zdGF0dXMgPT09ICdlcnJvcicgfHwgdGhpcy5wcm9wcy5wcm9maWxlLnN0YXR1cyA9PT0gJ2VkaXRfZXJyb3InKSB7XG4gICAgICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdkYW5nZXInLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnByb3BzLnByb2ZpbGUuZXJyb3IgfHwgdGhpcy5wcm9wcy5wcm9maWxlLmVycm9yXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLnN0YXR1cyA9PT0gJ3NlbmQnKSB7XG4gICAgICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdpbmZvJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0xvYWRpbmcsIHBsZWFzZSB3YWl0J1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucHJvZmlsZS5zdGF0dXMgPT09ICdlZGl0X3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1RoZSBwcm9maWxlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5J1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb21wb25lbnQuQWxlcnRNZXNzYWdlLCB7IG9wdHM6IGFsZXJ0T3B0cyB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChVc2VySW5mbywgeyBwcm9maWxlOiB0aGlzLnByb3BzLnByb2ZpbGUsIGRpc3BhdGNoOiB0aGlzLnByb3BzLmRpc3BhdGNoIH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KE51bUluZm8sIHsgcHJvZmlsZTogdGhpcy5wcm9wcy5wcm9maWxlIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFByb2ZpbGVDb21wO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxudmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSkge1xuICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xufTtcblByb2ZpbGVDb21wID0gKDAsIF9yZWFjdFJlZHV4LmNvbm5lY3QpKG1hcFN0YXRlVG9Qcm9wcykoUHJvZmlsZUNvbXApO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm9maWxlQ29tcDtcblxuLyoqKi8gfSksXG5cbi8qKiovIDMxNjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgaW5pdFN0YXRlID0ge1xuICAgIGlkOiAnJyxcbiAgICBsb2dpbjogJycsXG4gICAgZW1haWw6ICcnLFxuICAgIGZyaWVuZHM6ICcnLFxuICAgIGZyaWVuZFJlcXVlc3RzOiAwLFxuICAgIHNlbGZGcmllbmRSZXF1ZXN0czogMCxcbiAgICBjb3VudENoYXRzOiAwLFxuICAgIGNvdW50QmxvZ3M6IDAsXG4gICAgc3RhdHVzOiBudWxsLFxuICAgIGVycm9yOiBudWxsXG59O1xudmFyIHByb2ZpbGUgPSBmdW5jdGlvbiBwcm9maWxlKCkge1xuICAgIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogaW5pdFN0YXRlO1xuICAgIHZhciBhY3Rpb24gPSBhcmd1bWVudHNbMV07XG5cbiAgICB2YXIgZGF0YSA9IG51bGw7XG5cbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ1BST0ZJTEVfU0VORCc6XG4gICAgICAgICAgICB2YXIgc2VuZFN0YXRlID0gX2V4dGVuZHMoe30sIHN0YXRlKTtcbiAgICAgICAgICAgIHNlbmRTdGF0ZS5zdGF0dXMgPSAnc2VuZCc7XG4gICAgICAgICAgICByZXR1cm4gc2VuZFN0YXRlO1xuICAgICAgICBjYXNlICdQUk9GSUxFX1NVQ0NFU1MnOlxuICAgICAgICAgICAgZGF0YSA9IF9leHRlbmRzKHt9LCBhY3Rpb24uZGF0YS5wcm9maWxlKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgX2lkOiBkYXRhLl9pZCxcbiAgICAgICAgICAgICAgICBsb2dpbjogZGF0YS5sb2dpbixcbiAgICAgICAgICAgICAgICBlbWFpbDogZGF0YS5lbWFpbCxcbiAgICAgICAgICAgICAgICBmcmllbmRzOiBkYXRhLmZyaWVuZHMgfHwgMCxcbiAgICAgICAgICAgICAgICBmcmllbmRSZXF1ZXN0czogZGF0YS5mcmllbmRSZXF1ZXN0cyB8fCAwLFxuICAgICAgICAgICAgICAgIHNlbGZGcmllbmRSZXF1ZXN0czogZGF0YS5zZWxmRnJpZW5kUmVxdWVzdHMgfHwgMCxcbiAgICAgICAgICAgICAgICBjb3VudENoYXRzOiBkYXRhLmNvdW50Q2hhdHMgfHwgMCxcbiAgICAgICAgICAgICAgICBjb3VudEJsb2dzOiBkYXRhLmNvdW50QmxvZ3MgfHwgMCxcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnUFJPRklMRV9FUlJPUic6XG4gICAgICAgICAgICB2YXIgZXJyb3JTdGF0ZSA9IF9leHRlbmRzKHt9LCBzdGF0ZSk7XG4gICAgICAgICAgICBlcnJvclN0YXRlLnN0YXR1cyA9ICdlcnJvcic7XG4gICAgICAgICAgICBlcnJvclN0YXRlLmVycm9yID0gYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yU3RhdGU7XG5cbiAgICAgICAgY2FzZSAnUFJPRklMRV9FRElUX1NFTkQnOlxuICAgICAgICAgICAgc3RhdGUgPSBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xuICAgICAgICAgICAgc3RhdGUubG9naW4gPSBhY3Rpb24ubG9naW47XG4gICAgICAgICAgICBzdGF0ZS5lbWFpbCA9IGFjdGlvbi5lbWFpbDtcbiAgICAgICAgICAgIHN0YXRlLnN0YXR1cyA9ICdzZW5kJztcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgY2FzZSAnUFJPRklMRV9FRElUX1NVQ0NFU1MnOlxuICAgICAgICAgICAgZGF0YSA9IF9leHRlbmRzKHt9LCBhY3Rpb24uZGF0YS5lZGl0UHJvZmlsZSk7XG4gICAgICAgICAgICBzdGF0ZSA9IF9leHRlbmRzKHt9LCBzdGF0ZSk7XG4gICAgICAgICAgICBzdGF0ZS5sb2dpbiA9IGRhdGEubG9naW47XG4gICAgICAgICAgICBzdGF0ZS5lbWFpbCA9IGRhdGEuZW1haWw7XG4gICAgICAgICAgICBzdGF0ZS5zdGF0dXMgPSAnZWRpdF9zdWNjZXNzJztcbiAgICAgICAgICAgIHN0YXRlLmVycm9yID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgY2FzZSAnUFJPRklMRV9FRElUX0VSUk9SJzpcbiAgICAgICAgICAgIHN0YXRlID0gX2V4dGVuZHMoe30sIHN0YXRlKTtcbiAgICAgICAgICAgIHN0YXRlLnN0YXR1cyA9ICdlZGl0X2Vycm9yJztcbiAgICAgICAgICAgIHN0YXRlLmVycm9yID0gYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IHByb2ZpbGU7XG5cbi8qKiovIH0pXG5cbn0sWzMxNF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBwcm9maWxlLmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgcmVuZGVyIH0gZnJvbSAncmVhY3QtZG9tJ1xuaW1wb3J0IHsgUHJvdmlkZXIgfSBmcm9tICdyZWFjdC1yZWR1eCdcblxuaW1wb3J0ICdib290c3RyYXAvZGlzdC9jc3MvYm9vdHN0cmFwLmNzcyc7XG5pbXBvcnQgJy4vc3R5bGVzL2luZGV4LnNjc3MnXG5cbmltcG9ydCB7bGF5b3V0fSBmcm9tICcuL2hlbHBlcnMvY29tcG9uZW50J1xuaW1wb3J0IFByb2ZpbGVDb21wIGZyb20gJy4vcHJvZmlsZS9Qcm9maWxlQ29tcCdcblxuaW1wb3J0IGF1dGggZnJvbSAnLi9hdXRoL0xvZ2luUmVkJ1xuaW1wb3J0IHByb2ZpbGUgZnJvbSAnLi9wcm9maWxlL1Byb2ZpbGVSZWQnXG5cbmltcG9ydCB7Y29uZmlndXJlU3RvcmV9IGZyb20gJy4vaGVscGVycy9jb25maWd1cmVTdG9yZSdcblxubGV0IHN0b3JlID0gY29uZmlndXJlU3RvcmUoe1xuXHRhdXRoOiBhdXRoLFxuXHRwcm9maWxlOiBwcm9maWxlLFxufSk7XG5cbmxldCBDb21wID0gbGF5b3V0KHtjb21wOiBQcm9maWxlQ29tcCwgZm9yQXV0aDogdHJ1ZX0pO1xucmVuZGVyKFxuXHQ8UHJvdmlkZXIgc3RvcmU9e3N0b3JlfT5cblx0XHQ8Q29tcCAvPlxuXHQ8L1Byb3ZpZGVyPixcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKVxuKVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3N0YXRpY19zcmMvcHJvZmlsZS5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCdcblxuaW1wb3J0IHthcGksIGdyYXBocWx9IGZyb20gJy4uL2hlbHBlcnMvYWN0aW9uJ1xuaW1wb3J0IHtBbGVydE1lc3NhZ2V9IGZyb20gJy4uL2hlbHBlcnMvY29tcG9uZW50J1xuXG5cbmNsYXNzIE51bUluZm8gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHJlbmRlciAoKSB7XG4gICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tM1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwgcGFuZWwtZGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWhlYWRpbmdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tYm9va21hcmtcIj48L3NwYW4+Jm5ic3A7Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL215LWJsb2dzXCI+TXkgYmxvZ3M8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnByb2ZpbGUuY291bnRCbG9nc31cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tM1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwgcGFuZWwtZGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWhlYWRpbmdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tdXNlclwiPjwvc3Bhbj4mbmJzcDsmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCI+TXkgZnJpZW5kczwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgRnJpZW5kcyA6IHt0aGlzLnByb3BzLnByb2ZpbGUuZnJpZW5kc31cbiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICBSZXF1ZXN0cyA6IHt0aGlzLnByb3BzLnByb2ZpbGUuZnJpZW5kUmVxdWVzdHN9XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgTXkgUmVxdWVzdHMgOiB7dGhpcy5wcm9wcy5wcm9maWxlLnNlbGZGcmllbmRSZXF1ZXN0c31cbiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNtLTNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsIHBhbmVsLWRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1oZWFkaW5nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLWVudmVsb3BlXCI+PC9zcGFuPiZuYnNwOyZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9jaGF0c1wiPk15IGNoYXRzPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5wcm9maWxlLmNvdW50Q2hhdHN9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIH1cbn1cblxuLyoqXG4gKiBDbGFzcyB3aXRoIHVzZXIgaW5mbyBhbmQgZm9yIHRvIGVkaXQgcHJvZmlsZVxuICogQHBhcmFtIHtzdHJpbmd9IGxvZ2luXG4gKiBAcGFyYW0ge3N0cmluZ30gZW1haWxcbiAqL1xuY2xhc3MgVXNlckluZm8gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGxvZ2luOiB0aGlzLnByb3BzLnByb2ZpbGUubG9naW4sXG4gICAgICAgICAgICBlbWFpbDogdGhpcy5wcm9wcy5wcm9maWxlLmVtYWlsLFxuICAgICAgICAgICAgZWRpdDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZm9ybVN1Ym1pdCAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goZ3JhcGhxbCh7XG4gICAgICAgICAgICB0eXBlOiAnUFJPRklMRV9FRElUJyxcbiAgICAgICAgICAgIGxvZ2luOiB0aGlzLnN0YXRlLmxvZ2luLFxuICAgICAgICAgICAgZW1haWw6IHRoaXMuc3RhdGUuZW1haWwsXG4gICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBmaWVsZENoYW5nZSAoZSkge1xuICAgICAgICBsZXQgc3RhdGVPYmogPSB7fTtcbiAgICAgICAgc3RhdGVPYmpbZS50YXJnZXQuaWRdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGVPYmopO1xuICAgIH1cblxuICAgIHNldE1vZGUgKGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBlZGl0OiAhIHRoaXMuc3RhdGUuZWRpdCxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyAobmV3UHJvcHMpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBsb2dpbjogbmV3UHJvcHMucHJvZmlsZS5sb2dpbixcbiAgICAgICAgICAgIGVtYWlsOiBuZXdQcm9wcy5wcm9maWxlLmVtYWlsLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIgKCkge1xuICAgICAgICBsZXQgaW5mb0NsYXNzID0gXCJcIjtcbiAgICAgICAgbGV0IGZvcm1DbGFzcyA9IFwiXCI7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmVkaXQpIHtcbiAgICAgICAgICAgIGluZm9DbGFzcyA9IFwiaGlkZGVuXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3JtQ2xhc3MgPSBcImhpZGRlblwiXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJwYW5lbCBwYW5lbC1kZWZhdWx0XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWhlYWRpbmdcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT17XCJidG4gYnRuLWRlZmF1bHQgXCIgKyBmb3JtQ2xhc3N9IG9uQ2xpY2s9ezo6dGhpcy5zZXRNb2RlfSA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tdXNlclwiPjwvc3Bhbj4mbmJzcDsmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgVmlldyBwcm9maWxlXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9e1wiYnRuIGJ0bi1kZWZhdWx0IFwiICsgaW5mb0NsYXNzfSBvbkNsaWNrPXs6OnRoaXMuc2V0TW9kZX0gPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNvZ1wiPjwvc3Bhbj4mbmJzcDsmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgRWRpdCBwcm9maWxlXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtYm9keVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtpbmZvQ2xhc3N9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tMlwiPjxsYWJlbD5Mb2dpbjwvbGFiZWw+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zbS0xMFwiPnt0aGlzLnN0YXRlLmxvZ2lufTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tMlwiPjxsYWJlbD5FbWFpbDwvbGFiZWw+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zbS0xMFwiPnt0aGlzLnN0YXRlLmVtYWlsfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtmb3JtQ2xhc3N9PlxuICAgICAgICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17Ojp0aGlzLmZvcm1TdWJtaXR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJsb2dpblwiPlBhc3N3b3JkPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZvcm0tY29udHJvbFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cImxvZ2luXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTG9naW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5sb2dpbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9ezo6dGhpcy5maWVsZENoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImVtYWlsXCI+RW1haWwgYWRkcmVzczwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiZW1haWxcIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZm9ybS1jb250cm9sXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiZW1haWxcIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbWFpbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmVtYWlsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17Ojp0aGlzLmZpZWxkQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tZmxvcHB5LWRpc2tcIj48L3NwYW4+Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3VibWl0XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICB9XG59O1xuXG5cbmNsYXNzIFByb2ZpbGVDb21wIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb21wb25lbnRXaWxsTW91bnQgKCkge1xuICAgICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKGdyYXBocWwoe1xuICAgICAgICAgICAgdHlwZTogJ1BST0ZJTEUnLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJlbmRlciAoKSB7XG4gICAgICAgIGxldCBhbGVydE9wdHMgPSBudWxsO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnByb3BzLnByb2ZpbGUuc3RhdHVzID09PSAnZXJyb3InIHx8XG4gICAgICAgICAgICB0aGlzLnByb3BzLnByb2ZpbGUuc3RhdHVzID09PSAnZWRpdF9lcnJvcidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZGFuZ2VyJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnByb3BzLnByb2ZpbGUuZXJyb3IgfHwgdGhpcy5wcm9wcy5wcm9maWxlLmVycm9yXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLnN0YXR1cyA9PT0gJ3NlbmQnKSB7XG4gICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnaW5mbycsXG4gICAgICAgICAgICAgICAgdGV4dDogJ0xvYWRpbmcsIHBsZWFzZSB3YWl0JyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2ZpbGUuc3RhdHVzID09PSAnZWRpdF9zdWNjZXNzJykge1xuICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdUaGUgcHJvZmlsZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiA8ZGl2PlxuICAgICAgICAgICAgPEFsZXJ0TWVzc2FnZSBvcHRzPXthbGVydE9wdHN9IC8+XG4gICAgICAgICAgICA8VXNlckluZm8gcHJvZmlsZT17dGhpcy5wcm9wcy5wcm9maWxlfSBkaXNwYXRjaD17dGhpcy5wcm9wcy5kaXNwYXRjaH0gLz5cbiAgICAgICAgICAgIDxOdW1JbmZvIHByb2ZpbGU9e3RoaXMucHJvcHMucHJvZmlsZX0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgfVxufVxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHsuLi5zdGF0ZX1cbn1cblByb2ZpbGVDb21wID0gY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMpKFByb2ZpbGVDb21wKVxuXG5leHBvcnQgZGVmYXVsdCBQcm9maWxlQ29tcFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3N0YXRpY19zcmMvcHJvZmlsZS9Qcm9maWxlQ29tcC5qcyIsImxldCBpbml0U3RhdGUgPSB7XG4gICAgaWQ6ICcnLFxuICAgIGxvZ2luOiAnJyxcbiAgICBlbWFpbDogJycsXG4gICAgZnJpZW5kczogJycsXG4gICAgZnJpZW5kUmVxdWVzdHM6IDAsXG4gICAgc2VsZkZyaWVuZFJlcXVlc3RzOiAwLFxuICAgIGNvdW50Q2hhdHM6IDAsXG4gICAgY291bnRCbG9nczogMCxcbiAgICBzdGF0dXM6IG51bGwsXG4gICAgZXJyb3I6IG51bGwsXG59O1xuY29uc3QgcHJvZmlsZSA9IChzdGF0ZSA9IGluaXRTdGF0ZSwgYWN0aW9uKSA9PiB7XG4gICAgbGV0IGRhdGEgPSBudWxsO1xuICAgIFxuXG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgICBjYXNlICdQUk9GSUxFX1NFTkQnOlxuICAgICAgICAgICAgbGV0IHNlbmRTdGF0ZSA9IHsuLi5zdGF0ZX07XG4gICAgICAgICAgICBzZW5kU3RhdGUuc3RhdHVzID0gJ3NlbmQnO1xuICAgICAgICAgICAgcmV0dXJuIHNlbmRTdGF0ZTtcbiAgICAgICAgY2FzZSAnUFJPRklMRV9TVUNDRVNTJzpcbiAgICAgICAgICAgIGRhdGEgPSB7Li4uYWN0aW9uLmRhdGEucHJvZmlsZX07XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIF9pZDogZGF0YS5faWQsXG4gICAgICAgICAgICAgICAgbG9naW46IGRhdGEubG9naW4sXG4gICAgICAgICAgICAgICAgZW1haWw6IGRhdGEuZW1haWwsXG4gICAgICAgICAgICAgICAgZnJpZW5kczogZGF0YS5mcmllbmRzIHx8IDAsXG4gICAgICAgICAgICAgICAgZnJpZW5kUmVxdWVzdHM6IGRhdGEuZnJpZW5kUmVxdWVzdHMgfHwgMCxcbiAgICAgICAgICAgICAgICBzZWxmRnJpZW5kUmVxdWVzdHM6IGRhdGEuc2VsZkZyaWVuZFJlcXVlc3RzIHx8IDAsXG4gICAgICAgICAgICAgICAgY291bnRDaGF0czogZGF0YS5jb3VudENoYXRzIHx8IDAsXG4gICAgICAgICAgICAgICAgY291bnRCbG9nczogZGF0YS5jb3VudEJsb2dzIHx8IDAsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdQUk9GSUxFX0VSUk9SJzpcbiAgICAgICAgICAgIGxldCBlcnJvclN0YXRlID0gey4uLnN0YXRlfTtcbiAgICAgICAgICAgIGVycm9yU3RhdGUuc3RhdHVzID0gJ2Vycm9yJztcbiAgICAgICAgICAgIGVycm9yU3RhdGUuZXJyb3IgPSBhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3JTdGF0ZTtcbiAgICAgICAgXG4gICAgICAgIGNhc2UgJ1BST0ZJTEVfRURJVF9TRU5EJzpcbiAgICAgICAgICAgIHN0YXRlID0gey4uLnN0YXRlfTtcbiAgICAgICAgICAgIHN0YXRlLmxvZ2luID0gYWN0aW9uLmxvZ2luO1xuICAgICAgICAgICAgc3RhdGUuZW1haWwgPSBhY3Rpb24uZW1haWw7XG4gICAgICAgICAgICBzdGF0ZS5zdGF0dXMgPSAnc2VuZCc7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIGNhc2UgJ1BST0ZJTEVfRURJVF9TVUNDRVNTJzpcbiAgICAgICAgICAgIGRhdGEgPSB7Li4uYWN0aW9uLmRhdGEuZWRpdFByb2ZpbGV9O1xuICAgICAgICAgICAgc3RhdGUgPSB7Li4uc3RhdGV9O1xuICAgICAgICAgICAgc3RhdGUubG9naW4gPSBkYXRhLmxvZ2luO1xuICAgICAgICAgICAgc3RhdGUuZW1haWwgPSBkYXRhLmVtYWlsO1xuICAgICAgICAgICAgc3RhdGUuc3RhdHVzID0gJ2VkaXRfc3VjY2Vzcyc7XG4gICAgICAgICAgICBzdGF0ZS5lcnJvciA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIGNhc2UgJ1BST0ZJTEVfRURJVF9FUlJPUic6XG4gICAgICAgICAgICBzdGF0ZSA9IHsuLi5zdGF0ZX07XG4gICAgICAgICAgICBzdGF0ZS5zdGF0dXMgPSAnZWRpdF9lcnJvcic7XG4gICAgICAgICAgICBzdGF0ZS5lcnJvciA9IGFjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgcHJvZmlsZVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3N0YXRpY19zcmMvcHJvZmlsZS9Qcm9maWxlUmVkLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==
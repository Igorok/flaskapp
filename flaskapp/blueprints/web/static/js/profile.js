webpackJsonp([1],{315:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var n=a(6),r=l(n),s=a(16),i=a(11);a(27),a(28);var o=a(14),u=a(316),c=l(u),d=a(29),f=l(d),p=a(317),m=l(p),h=a(30),E=(0,h.configureStore)({auth:f.default,profile:m.default}),g=(0,o.layout)({comp:c.default,forAuth:!0});(0,s.render)(r.default.createElement(i.Provider,{store:E},r.default.createElement(g,null)),document.getElementById("root"))},316:function(e,t,a){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(6),u=function(e){return e&&e.__esModule?e:{default:e}}(o),c=a(11),d=a(39),f=a(14),p=function(e){function t(){return l(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),i(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-3"},u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("span",{className:"glyphicon glyphicon-bookmark"}),"  ",u.default.createElement("a",{href:"/my-blog-list"},"My blogs")),u.default.createElement("div",{className:"panel-body"},this.props.profile.countBlogs))),u.default.createElement("div",{className:"col-sm-3"},u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("span",{className:"glyphicon glyphicon-user"}),"  ",u.default.createElement("a",{href:"#"},"My friends")),u.default.createElement("div",{className:"panel-body"},"Friends : ",this.props.profile.friends,u.default.createElement("br",null),"Requests : ",this.props.profile.friendRequests,u.default.createElement("br",null),"My Requests : ",this.props.profile.selfFriendRequests,u.default.createElement("br",null)))),u.default.createElement("div",{className:"col-sm-3"},u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("span",{className:"glyphicon glyphicon-envelope"}),"  ",u.default.createElement("a",{href:"/chats"},"My chats")),u.default.createElement("div",{className:"panel-body"},this.props.profile.countChats))))}}]),t}(u.default.Component),m=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={login:a.props.profile.login,email:a.props.profile.email,edit:!1},a}return r(t,e),i(t,[{key:"formSubmit",value:function(e){e.preventDefault(),this.props.dispatch((0,d.graphql)({type:"PROFILE_EDIT",login:this.state.login,email:this.state.email}))}},{key:"fieldChange",value:function(e){var t={};t[e.target.id]=e.target.value,this.setState(t)}},{key:"setMode",value:function(e){this.setState({edit:!this.state.edit})}},{key:"componentWillReceiveProps",value:function(e){this.setState({login:e.profile.login,email:e.profile.email})}},{key:"render",value:function(){var e="",t="";return this.state.edit?e="hidden":t="hidden",u.default.createElement("div",{className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("button",{className:"btn btn-default "+t,onClick:this.setMode.bind(this)},u.default.createElement("span",{className:"glyphicon glyphicon-user"}),"   View profile"),u.default.createElement("button",{className:"btn btn-default "+e,onClick:this.setMode.bind(this)},u.default.createElement("span",{className:"glyphicon glyphicon-cog"}),"   Edit profile")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",{className:e},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-2"},u.default.createElement("label",null,"Login")),u.default.createElement("div",{className:"col-sm-10"},this.state.login)),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-2"},u.default.createElement("label",null,"Email")),u.default.createElement("div",{className:"col-sm-10"},this.state.email))),u.default.createElement("div",{className:t},u.default.createElement("form",{onSubmit:this.formSubmit.bind(this)},u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{htmlFor:"login"},"Login"),u.default.createElement("input",{type:"text",className:"form-control",id:"login",placeholder:"Login",value:this.state.login,onChange:this.fieldChange.bind(this)})),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{htmlFor:"email"},"Email address"),u.default.createElement("input",{type:"email",className:"form-control",id:"email",placeholder:"Email",value:this.state.email,onChange:this.fieldChange.bind(this)})),u.default.createElement("button",{type:"submit",className:"btn btn-default"},u.default.createElement("span",{className:"glyphicon glyphicon-floppy-disk"}),"  Submit")))))}}]),t}(u.default.Component),h=function(e){function t(){return l(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),i(t,[{key:"componentWillMount",value:function(){this.props.dispatch((0,d.graphql)({type:"PROFILE"}))}},{key:"render",value:function(){var e=null;return"error"===this.props.profile.status||"edit_error"===this.props.profile.status?e={className:"danger",text:this.props.profile.error||this.props.profile.error}:"send"===this.props.profile.status?e={className:"info",text:"Loading, please wait"}:"edit_success"===this.props.profile.status&&(e={className:"success",text:"The profile updated successfully"}),u.default.createElement("div",null,u.default.createElement(f.AlertMessage,{opts:e}),u.default.createElement(m,{profile:this.props.profile,dispatch:this.props.dispatch}),u.default.createElement(p,{profile:this.props.profile}))}}]),t}(u.default.Component),E=function(e){return s({},e)};h=(0,c.connect)(E)(h),t.default=h},317:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},n={id:"",login:"",email:"",friends:"",friendRequests:0,selfFriendRequests:0,countChats:0,countBlogs:0,status:null,error:null},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1],a=null;switch(t.type){case"PROFILE_SEND":var r=l({},e);return r.status="send",r;case"PROFILE_SUCCESS":return a=l({},t.data.profile),{_id:a._id,login:a.login,email:a.email,friends:a.friends||0,friendRequests:a.friendRequests||0,selfFriendRequests:a.selfFriendRequests||0,countChats:a.countChats||0,countBlogs:a.countBlogs||0,status:"success",error:null};case"PROFILE_ERROR":var s=l({},e);return s.status="error",s.error=t.error,s;case"PROFILE_EDIT_SEND":return e=l({},e),e.login=t.login,e.email=t.email,e.status="send",e;case"PROFILE_EDIT_SUCCESS":return a=l({},t.data.editProfile),e=l({},e),e.login=a.login,e.email=a.email,e.status="edit_success",e.error=null,e;case"PROFILE_EDIT_ERROR":return e=l({},e),e.status="edit_error",e.error=t.error,e;default:return e}};t.default=r}},[315]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vcHJvZmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWNfc3JjL3Byb2ZpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljX3NyYy9wcm9maWxlL1Byb2ZpbGVDb21wLmpzIiwid2VicGFjazovLy8uL3N0YXRpY19zcmMvcHJvZmlsZS9Qcm9maWxlUmVkLmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucCIsIjMxNSIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX3JlYWN0IiwiX3JlYWN0MiIsIl9yZWFjdERvbSIsIl9yZWFjdFJlZHV4IiwiX2NvbXBvbmVudCIsIl9Qcm9maWxlQ29tcCIsIl9Qcm9maWxlQ29tcDIiLCJfTG9naW5SZWQiLCJfTG9naW5SZWQyIiwiX1Byb2ZpbGVSZWQiLCJfUHJvZmlsZVJlZDIiLCJfY29uZmlndXJlU3RvcmUiLCJzdG9yZSIsImNvbmZpZ3VyZVN0b3JlIiwiYXV0aCIsInByb2ZpbGUiLCJDb21wIiwibGF5b3V0IiwiY29tcCIsIlByb2ZpbGVDb21wIiwiZm9yQXV0aCIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJQcm92aWRlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCIzMTYiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJzZWxmIiwiY2FsbCIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwicHJvdG90eXBlIiwiT2JqZWN0IiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJ2YWx1ZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGVmaW5lUHJvcGVydHkiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfYWN0aW9uIiwiTnVtSW5mbyIsIl9SZWFjdCRDb21wb25lbnQiLCJ0aGlzIiwiZ2V0UHJvdG90eXBlT2YiLCJhcHBseSIsImNsYXNzTmFtZSIsImhyZWYiLCJjb3VudEJsb2dzIiwiZnJpZW5kcyIsImZyaWVuZFJlcXVlc3RzIiwic2VsZkZyaWVuZFJlcXVlc3RzIiwiY291bnRDaGF0cyIsIlJlYWN0IiwiQ29tcG9uZW50IiwiVXNlckluZm8iLCJfUmVhY3QkQ29tcG9uZW50MiIsIl90aGlzMiIsInN0YXRlIiwibG9naW4iLCJlbWFpbCIsImVkaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJkaXNwYXRjaCIsImdyYXBocWwiLCJ0eXBlIiwic3RhdGVPYmoiLCJpZCIsInNldFN0YXRlIiwibmV3UHJvcHMiLCJpbmZvQ2xhc3MiLCJmb3JtQ2xhc3MiLCJvbkNsaWNrIiwic2V0TW9kZSIsImJpbmQiLCJvblN1Ym1pdCIsImZvcm1TdWJtaXQiLCJodG1sRm9yIiwicGxhY2Vob2xkZXIiLCJvbkNoYW5nZSIsImZpZWxkQ2hhbmdlIiwiX1JlYWN0JENvbXBvbmVudDMiLCJhbGVydE9wdHMiLCJzdGF0dXMiLCJ0ZXh0IiwiZXJyb3IiLCJBbGVydE1lc3NhZ2UiLCJvcHRzIiwibWFwU3RhdGVUb1Byb3BzIiwiY29ubmVjdCIsIjMxNyIsImluaXRTdGF0ZSIsInVuZGVmaW5lZCIsImFjdGlvbiIsImRhdGEiLCJzZW5kU3RhdGUiLCJfaWQiLCJlcnJvclN0YXRlIiwiZWRpdFByb2ZpbGUiXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLElBRVJDLElBQ0EsU0FBVUMsRUFBUUMsRUFBU0Ms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SyxxQkFJRCxNQUhBQSxRQUFZQSxHQUNaQSxFQUFNMEIsT0FBUyxhQUNmMUIsRUFBTTRCLE1BQVFRLEVBQU9SLE1BQ2Q1QixDQUNYLFNBQ0ksTUFBT0EsSUhpY25CeEYsR0FBUUssUUc3Yk9nQixLSGljWiIsImZpbGUiOiJwcm9maWxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2VicGFja0pzb25wKFsxXSx7XG5cbi8qKiovIDMxNTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cbnZhciBfcmVhY3RSZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cbnZhciBfY29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cbnZhciBfUHJvZmlsZUNvbXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxNik7XG5cbnZhciBfUHJvZmlsZUNvbXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUHJvZmlsZUNvbXApO1xuXG52YXIgX0xvZ2luUmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cbnZhciBfTG9naW5SZWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTG9naW5SZWQpO1xuXG52YXIgX1Byb2ZpbGVSZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxNyk7XG5cbnZhciBfUHJvZmlsZVJlZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Qcm9maWxlUmVkKTtcblxudmFyIF9jb25maWd1cmVTdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgc3RvcmUgPSAoMCwgX2NvbmZpZ3VyZVN0b3JlLmNvbmZpZ3VyZVN0b3JlKSh7XG5cdGF1dGg6IF9Mb2dpblJlZDIuZGVmYXVsdCxcblx0cHJvZmlsZTogX1Byb2ZpbGVSZWQyLmRlZmF1bHRcbn0pO1xuXG52YXIgQ29tcCA9ICgwLCBfY29tcG9uZW50LmxheW91dCkoeyBjb21wOiBfUHJvZmlsZUNvbXAyLmRlZmF1bHQsIGZvckF1dGg6IHRydWUgfSk7XG4oMCwgX3JlYWN0RG9tLnJlbmRlcikoX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdF9yZWFjdFJlZHV4LlByb3ZpZGVyLFxuXHR7IHN0b3JlOiBzdG9yZSB9LFxuXHRfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChDb21wLCBudWxsKVxuKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMTY6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0UmVkdXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblxudmFyIF9hY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblxudmFyIF9jb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgTnVtSW5mbyA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKE51bUluZm8sIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gTnVtSW5mbygpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE51bUluZm8pO1xuXG4gICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTnVtSW5mby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE51bUluZm8pKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoTnVtSW5mbywgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JvdycgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTMnIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsIHBhbmVsLWRlZmF1bHQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWhlYWRpbmcnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tYm9va21hcmsnIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMFxceEEwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGhyZWY6ICcvbXktYmxvZy1saXN0JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTXkgYmxvZ3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtYm9keScgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnByb2ZpbGUuY291bnRCbG9nc1xuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTMnIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsIHBhbmVsLWRlZmF1bHQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWhlYWRpbmcnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tdXNlcicgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwXFx4QTAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHJlZjogJyMnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNeSBmcmllbmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWJvZHknIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZyaWVuZHMgOiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHJvZmlsZS5mcmllbmRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdSZXF1ZXN0cyA6ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5wcm9maWxlLmZyaWVuZFJlcXVlc3RzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNeSBSZXF1ZXN0cyA6ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5wcm9maWxlLnNlbGZGcmllbmRSZXF1ZXN0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYnInLCBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTMnIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsIHBhbmVsLWRlZmF1bHQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWhlYWRpbmcnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tZW52ZWxvcGUnIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMFxceEEwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGhyZWY6ICcvY2hhdHMnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNeSBjaGF0cydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1ib2R5JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHJvZmlsZS5jb3VudENoYXRzXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIE51bUluZm87XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG4vKipcbiAqIENsYXNzIHdpdGggdXNlciBpbmZvIGFuZCBmb3IgdG8gZWRpdCBwcm9maWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9naW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbFxuICovXG5cblxudmFyIFVzZXJJbmZvID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQyKSB7XG4gICAgX2luaGVyaXRzKFVzZXJJbmZvLCBfUmVhY3QkQ29tcG9uZW50Mik7XG5cbiAgICBmdW5jdGlvbiBVc2VySW5mbyhwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVXNlckluZm8pO1xuXG4gICAgICAgIHZhciBfdGhpczIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVXNlckluZm8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihVc2VySW5mbykpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpczIuc3RhdGUgPSB7XG4gICAgICAgICAgICBsb2dpbjogX3RoaXMyLnByb3BzLnByb2ZpbGUubG9naW4sXG4gICAgICAgICAgICBlbWFpbDogX3RoaXMyLnByb3BzLnByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgICBlZGl0OiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX3RoaXMyO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhVc2VySW5mbywgW3tcbiAgICAgICAga2V5OiAnZm9ybVN1Ym1pdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JtU3VibWl0KGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goKDAsIF9hY3Rpb24uZ3JhcGhxbCkoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdQUk9GSUxFX0VESVQnLFxuICAgICAgICAgICAgICAgIGxvZ2luOiB0aGlzLnN0YXRlLmxvZ2luLFxuICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLnN0YXRlLmVtYWlsXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2ZpZWxkQ2hhbmdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpZWxkQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgIHZhciBzdGF0ZU9iaiA9IHt9O1xuICAgICAgICAgICAgc3RhdGVPYmpbZS50YXJnZXQuaWRdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlT2JqKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0TW9kZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRNb2RlKGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGVkaXQ6ICF0aGlzLnN0YXRlLmVkaXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV3UHJvcHMpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGxvZ2luOiBuZXdQcm9wcy5wcm9maWxlLmxvZ2luLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBuZXdQcm9wcy5wcm9maWxlLmVtYWlsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBpbmZvQ2xhc3MgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIGZvcm1DbGFzcyA9IFwiXCI7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5lZGl0KSB7XG4gICAgICAgICAgICAgICAgaW5mb0NsYXNzID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9ybUNsYXNzID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwgcGFuZWwtZGVmYXVsdCcgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtaGVhZGluZycgfSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBcImJ0biBidG4tZGVmYXVsdCBcIiArIGZvcm1DbGFzcywgb25DbGljazogdGhpcy5zZXRNb2RlLmJpbmQodGhpcykgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLXVzZXInIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwXFx4QTAgVmlldyBwcm9maWxlJ1xuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IFwiYnRuIGJ0bi1kZWZhdWx0IFwiICsgaW5mb0NsYXNzLCBvbkNsaWNrOiB0aGlzLnNldE1vZGUuYmluZCh0aGlzKSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tY29nJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMFxceEEwIEVkaXQgcHJvZmlsZSdcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWJvZHknIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogaW5mb0NsYXNzIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JvdycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTInIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTG9naW4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wtc20tMTAnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubG9naW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS0yJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0VtYWlsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTEwJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmVtYWlsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGZvcm1DbGFzcyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Zvcm0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgb25TdWJtaXQ6IHRoaXMuZm9ybVN1Ym1pdC5iaW5kKHRoaXMpIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Zvcm0tZ3JvdXAnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHRtbEZvcjogJ2xvZ2luJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0xvZ2luJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdmb3JtLWNvbnRyb2wnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdsb2dpbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ0xvZ2luJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLmxvZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuZmllbGRDaGFuZ2UuYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Zvcm0tZ3JvdXAnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHRtbEZvcjogJ2VtYWlsJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0VtYWlsIGFkZHJlc3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlbWFpbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdmb3JtLWNvbnRyb2wnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdlbWFpbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ0VtYWlsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuZmllbGRDaGFuZ2UuYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdzdWJtaXQnLCBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLWZsb3BweS1kaXNrJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwIFN1Ym1pdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFVzZXJJbmZvO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxuO1xuXG52YXIgUHJvZmlsZUNvbXAgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudDMpIHtcbiAgICBfaW5oZXJpdHMoUHJvZmlsZUNvbXAsIF9SZWFjdCRDb21wb25lbnQzKTtcblxuICAgIGZ1bmN0aW9uIFByb2ZpbGVDb21wKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvZmlsZUNvbXApO1xuXG4gICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvZmlsZUNvbXAuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm9maWxlQ29tcCkpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhQcm9maWxlQ29tcCwgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goKDAsIF9hY3Rpb24uZ3JhcGhxbCkoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdQUk9GSUxFJ1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIGFsZXJ0T3B0cyA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5wcm9maWxlLnN0YXR1cyA9PT0gJ2Vycm9yJyB8fCB0aGlzLnByb3BzLnByb2ZpbGUuc3RhdHVzID09PSAnZWRpdF9lcnJvcicpIHtcbiAgICAgICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2RhbmdlcicsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMucHJvcHMucHJvZmlsZS5lcnJvciB8fCB0aGlzLnByb3BzLnByb2ZpbGUuZXJyb3JcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2ZpbGUuc3RhdHVzID09PSAnc2VuZCcpIHtcbiAgICAgICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2luZm8nLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnTG9hZGluZywgcGxlYXNlIHdhaXQnXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLnN0YXR1cyA9PT0gJ2VkaXRfc3VjY2VzcycpIHtcbiAgICAgICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnVGhlIHByb2ZpbGUgdXBkYXRlZCBzdWNjZXNzZnVsbHknXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NvbXBvbmVudC5BbGVydE1lc3NhZ2UsIHsgb3B0czogYWxlcnRPcHRzIH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFVzZXJJbmZvLCB7IHByb2ZpbGU6IHRoaXMucHJvcHMucHJvZmlsZSwgZGlzcGF0Y2g6IHRoaXMucHJvcHMuZGlzcGF0Y2ggfSksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoTnVtSW5mbywgeyBwcm9maWxlOiB0aGlzLnByb3BzLnByb2ZpbGUgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gUHJvZmlsZUNvbXA7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG52YXIgbWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlKSB7XG4gICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSk7XG59O1xuUHJvZmlsZUNvbXAgPSAoMCwgX3JlYWN0UmVkdXguY29ubmVjdCkobWFwU3RhdGVUb1Byb3BzKShQcm9maWxlQ29tcCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb2ZpbGVDb21wO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMzE3OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBpbml0U3RhdGUgPSB7XG4gICAgaWQ6ICcnLFxuICAgIGxvZ2luOiAnJyxcbiAgICBlbWFpbDogJycsXG4gICAgZnJpZW5kczogJycsXG4gICAgZnJpZW5kUmVxdWVzdHM6IDAsXG4gICAgc2VsZkZyaWVuZFJlcXVlc3RzOiAwLFxuICAgIGNvdW50Q2hhdHM6IDAsXG4gICAgY291bnRCbG9nczogMCxcbiAgICBzdGF0dXM6IG51bGwsXG4gICAgZXJyb3I6IG51bGxcbn07XG52YXIgcHJvZmlsZSA9IGZ1bmN0aW9uIHByb2ZpbGUoKSB7XG4gICAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBpbml0U3RhdGU7XG4gICAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50c1sxXTtcblxuICAgIHZhciBkYXRhID0gbnVsbDtcblxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnUFJPRklMRV9TRU5EJzpcbiAgICAgICAgICAgIHZhciBzZW5kU3RhdGUgPSBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xuICAgICAgICAgICAgc2VuZFN0YXRlLnN0YXR1cyA9ICdzZW5kJztcbiAgICAgICAgICAgIHJldHVybiBzZW5kU3RhdGU7XG4gICAgICAgIGNhc2UgJ1BST0ZJTEVfU1VDQ0VTUyc6XG4gICAgICAgICAgICBkYXRhID0gX2V4dGVuZHMoe30sIGFjdGlvbi5kYXRhLnByb2ZpbGUpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBfaWQ6IGRhdGEuX2lkLFxuICAgICAgICAgICAgICAgIGxvZ2luOiBkYXRhLmxvZ2luLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLFxuICAgICAgICAgICAgICAgIGZyaWVuZHM6IGRhdGEuZnJpZW5kcyB8fCAwLFxuICAgICAgICAgICAgICAgIGZyaWVuZFJlcXVlc3RzOiBkYXRhLmZyaWVuZFJlcXVlc3RzIHx8IDAsXG4gICAgICAgICAgICAgICAgc2VsZkZyaWVuZFJlcXVlc3RzOiBkYXRhLnNlbGZGcmllbmRSZXF1ZXN0cyB8fCAwLFxuICAgICAgICAgICAgICAgIGNvdW50Q2hhdHM6IGRhdGEuY291bnRDaGF0cyB8fCAwLFxuICAgICAgICAgICAgICAgIGNvdW50QmxvZ3M6IGRhdGEuY291bnRCbG9ncyB8fCAwLFxuICAgICAgICAgICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgIGVycm9yOiBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdQUk9GSUxFX0VSUk9SJzpcbiAgICAgICAgICAgIHZhciBlcnJvclN0YXRlID0gX2V4dGVuZHMoe30sIHN0YXRlKTtcbiAgICAgICAgICAgIGVycm9yU3RhdGUuc3RhdHVzID0gJ2Vycm9yJztcbiAgICAgICAgICAgIGVycm9yU3RhdGUuZXJyb3IgPSBhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3JTdGF0ZTtcblxuICAgICAgICBjYXNlICdQUk9GSUxFX0VESVRfU0VORCc6XG4gICAgICAgICAgICBzdGF0ZSA9IF9leHRlbmRzKHt9LCBzdGF0ZSk7XG4gICAgICAgICAgICBzdGF0ZS5sb2dpbiA9IGFjdGlvbi5sb2dpbjtcbiAgICAgICAgICAgIHN0YXRlLmVtYWlsID0gYWN0aW9uLmVtYWlsO1xuICAgICAgICAgICAgc3RhdGUuc3RhdHVzID0gJ3NlbmQnO1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICBjYXNlICdQUk9GSUxFX0VESVRfU1VDQ0VTUyc6XG4gICAgICAgICAgICBkYXRhID0gX2V4dGVuZHMoe30sIGFjdGlvbi5kYXRhLmVkaXRQcm9maWxlKTtcbiAgICAgICAgICAgIHN0YXRlID0gX2V4dGVuZHMoe30sIHN0YXRlKTtcbiAgICAgICAgICAgIHN0YXRlLmxvZ2luID0gZGF0YS5sb2dpbjtcbiAgICAgICAgICAgIHN0YXRlLmVtYWlsID0gZGF0YS5lbWFpbDtcbiAgICAgICAgICAgIHN0YXRlLnN0YXR1cyA9ICdlZGl0X3N1Y2Nlc3MnO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICBjYXNlICdQUk9GSUxFX0VESVRfRVJST1InOlxuICAgICAgICAgICAgc3RhdGUgPSBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xuICAgICAgICAgICAgc3RhdGUuc3RhdHVzID0gJ2VkaXRfZXJyb3InO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gcHJvZmlsZTtcblxuLyoqKi8gfSlcblxufSxbMzE1XSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHByb2ZpbGUuanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyByZW5kZXIgfSBmcm9tICdyZWFjdC1kb20nXG5pbXBvcnQgeyBQcm92aWRlciB9IGZyb20gJ3JlYWN0LXJlZHV4J1xuXG5pbXBvcnQgJ2Jvb3RzdHJhcC9kaXN0L2Nzcy9ib290c3RyYXAuY3NzJztcbmltcG9ydCAnLi9zdHlsZXMvaW5kZXguc2NzcydcblxuaW1wb3J0IHtsYXlvdXR9IGZyb20gJy4vaGVscGVycy9jb21wb25lbnQnXG5pbXBvcnQgUHJvZmlsZUNvbXAgZnJvbSAnLi9wcm9maWxlL1Byb2ZpbGVDb21wJ1xuXG5pbXBvcnQgYXV0aCBmcm9tICcuL2F1dGgvTG9naW5SZWQnXG5pbXBvcnQgcHJvZmlsZSBmcm9tICcuL3Byb2ZpbGUvUHJvZmlsZVJlZCdcblxuaW1wb3J0IHtjb25maWd1cmVTdG9yZX0gZnJvbSAnLi9oZWxwZXJzL2NvbmZpZ3VyZVN0b3JlJ1xuXG5sZXQgc3RvcmUgPSBjb25maWd1cmVTdG9yZSh7XG5cdGF1dGg6IGF1dGgsXG5cdHByb2ZpbGU6IHByb2ZpbGUsXG59KTtcblxubGV0IENvbXAgPSBsYXlvdXQoe2NvbXA6IFByb2ZpbGVDb21wLCBmb3JBdXRoOiB0cnVlfSk7XG5yZW5kZXIoXG5cdDxQcm92aWRlciBzdG9yZT17c3RvcmV9PlxuXHRcdDxDb21wIC8+XG5cdDwvUHJvdmlkZXI+LFxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpXG4pXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3RhdGljX3NyYy9wcm9maWxlLmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4J1xuXG5pbXBvcnQge2FwaSwgZ3JhcGhxbH0gZnJvbSAnLi4vaGVscGVycy9hY3Rpb24nXG5pbXBvcnQge0FsZXJ0TWVzc2FnZX0gZnJvbSAnLi4vaGVscGVycy9jb21wb25lbnQnXG5cblxuY2xhc3MgTnVtSW5mbyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgcmVuZGVyICgpIHtcbiAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zbS0zXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbCBwYW5lbC1kZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtaGVhZGluZ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1ib29rbWFya1wiPjwvc3Bhbj4mbmJzcDsmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvbXktYmxvZy1saXN0XCI+TXkgYmxvZ3M8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnByb2ZpbGUuY291bnRCbG9nc31cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tM1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwgcGFuZWwtZGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWhlYWRpbmdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tdXNlclwiPjwvc3Bhbj4mbmJzcDsmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCI+TXkgZnJpZW5kczwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgRnJpZW5kcyA6IHt0aGlzLnByb3BzLnByb2ZpbGUuZnJpZW5kc31cbiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICBSZXF1ZXN0cyA6IHt0aGlzLnByb3BzLnByb2ZpbGUuZnJpZW5kUmVxdWVzdHN9XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgTXkgUmVxdWVzdHMgOiB7dGhpcy5wcm9wcy5wcm9maWxlLnNlbGZGcmllbmRSZXF1ZXN0c31cbiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNtLTNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsIHBhbmVsLWRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1oZWFkaW5nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLWVudmVsb3BlXCI+PC9zcGFuPiZuYnNwOyZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9jaGF0c1wiPk15IGNoYXRzPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5wcm9maWxlLmNvdW50Q2hhdHN9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIH1cbn1cblxuLyoqXG4gKiBDbGFzcyB3aXRoIHVzZXIgaW5mbyBhbmQgZm9yIHRvIGVkaXQgcHJvZmlsZVxuICogQHBhcmFtIHtzdHJpbmd9IGxvZ2luXG4gKiBAcGFyYW0ge3N0cmluZ30gZW1haWxcbiAqL1xuY2xhc3MgVXNlckluZm8gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGxvZ2luOiB0aGlzLnByb3BzLnByb2ZpbGUubG9naW4sXG4gICAgICAgICAgICBlbWFpbDogdGhpcy5wcm9wcy5wcm9maWxlLmVtYWlsLFxuICAgICAgICAgICAgZWRpdDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZm9ybVN1Ym1pdCAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goZ3JhcGhxbCh7XG4gICAgICAgICAgICB0eXBlOiAnUFJPRklMRV9FRElUJyxcbiAgICAgICAgICAgIGxvZ2luOiB0aGlzLnN0YXRlLmxvZ2luLFxuICAgICAgICAgICAgZW1haWw6IHRoaXMuc3RhdGUuZW1haWwsXG4gICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBmaWVsZENoYW5nZSAoZSkge1xuICAgICAgICBsZXQgc3RhdGVPYmogPSB7fTtcbiAgICAgICAgc3RhdGVPYmpbZS50YXJnZXQuaWRdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGVPYmopO1xuICAgIH1cblxuICAgIHNldE1vZGUgKGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBlZGl0OiAhIHRoaXMuc3RhdGUuZWRpdCxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyAobmV3UHJvcHMpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBsb2dpbjogbmV3UHJvcHMucHJvZmlsZS5sb2dpbixcbiAgICAgICAgICAgIGVtYWlsOiBuZXdQcm9wcy5wcm9maWxlLmVtYWlsLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIgKCkge1xuICAgICAgICBsZXQgaW5mb0NsYXNzID0gXCJcIjtcbiAgICAgICAgbGV0IGZvcm1DbGFzcyA9IFwiXCI7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmVkaXQpIHtcbiAgICAgICAgICAgIGluZm9DbGFzcyA9IFwiaGlkZGVuXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3JtQ2xhc3MgPSBcImhpZGRlblwiXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJwYW5lbCBwYW5lbC1kZWZhdWx0XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWhlYWRpbmdcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT17XCJidG4gYnRuLWRlZmF1bHQgXCIgKyBmb3JtQ2xhc3N9IG9uQ2xpY2s9ezo6dGhpcy5zZXRNb2RlfSA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tdXNlclwiPjwvc3Bhbj4mbmJzcDsmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgVmlldyBwcm9maWxlXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9e1wiYnRuIGJ0bi1kZWZhdWx0IFwiICsgaW5mb0NsYXNzfSBvbkNsaWNrPXs6OnRoaXMuc2V0TW9kZX0gPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNvZ1wiPjwvc3Bhbj4mbmJzcDsmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgRWRpdCBwcm9maWxlXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtYm9keVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtpbmZvQ2xhc3N9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tMlwiPjxsYWJlbD5Mb2dpbjwvbGFiZWw+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zbS0xMFwiPnt0aGlzLnN0YXRlLmxvZ2lufTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tMlwiPjxsYWJlbD5FbWFpbDwvbGFiZWw+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zbS0xMFwiPnt0aGlzLnN0YXRlLmVtYWlsfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtmb3JtQ2xhc3N9PlxuICAgICAgICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17Ojp0aGlzLmZvcm1TdWJtaXR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJsb2dpblwiPkxvZ2luPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZvcm0tY29udHJvbFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cImxvZ2luXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTG9naW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5sb2dpbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9ezo6dGhpcy5maWVsZENoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImVtYWlsXCI+RW1haWwgYWRkcmVzczwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiZW1haWxcIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZm9ybS1jb250cm9sXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiZW1haWxcIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbWFpbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmVtYWlsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17Ojp0aGlzLmZpZWxkQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tZmxvcHB5LWRpc2tcIj48L3NwYW4+Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3VibWl0XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICB9XG59O1xuXG5cbmNsYXNzIFByb2ZpbGVDb21wIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb21wb25lbnRXaWxsTW91bnQgKCkge1xuICAgICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKGdyYXBocWwoe1xuICAgICAgICAgICAgdHlwZTogJ1BST0ZJTEUnLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJlbmRlciAoKSB7XG4gICAgICAgIGxldCBhbGVydE9wdHMgPSBudWxsO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnByb3BzLnByb2ZpbGUuc3RhdHVzID09PSAnZXJyb3InIHx8XG4gICAgICAgICAgICB0aGlzLnByb3BzLnByb2ZpbGUuc3RhdHVzID09PSAnZWRpdF9lcnJvcidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZGFuZ2VyJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnByb3BzLnByb2ZpbGUuZXJyb3IgfHwgdGhpcy5wcm9wcy5wcm9maWxlLmVycm9yXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLnN0YXR1cyA9PT0gJ3NlbmQnKSB7XG4gICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnaW5mbycsXG4gICAgICAgICAgICAgICAgdGV4dDogJ0xvYWRpbmcsIHBsZWFzZSB3YWl0JyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2ZpbGUuc3RhdHVzID09PSAnZWRpdF9zdWNjZXNzJykge1xuICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdUaGUgcHJvZmlsZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiA8ZGl2PlxuICAgICAgICAgICAgPEFsZXJ0TWVzc2FnZSBvcHRzPXthbGVydE9wdHN9IC8+XG4gICAgICAgICAgICA8VXNlckluZm8gcHJvZmlsZT17dGhpcy5wcm9wcy5wcm9maWxlfSBkaXNwYXRjaD17dGhpcy5wcm9wcy5kaXNwYXRjaH0gLz5cbiAgICAgICAgICAgIDxOdW1JbmZvIHByb2ZpbGU9e3RoaXMucHJvcHMucHJvZmlsZX0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgfVxufVxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHsuLi5zdGF0ZX1cbn1cblByb2ZpbGVDb21wID0gY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMpKFByb2ZpbGVDb21wKVxuXG5leHBvcnQgZGVmYXVsdCBQcm9maWxlQ29tcFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3N0YXRpY19zcmMvcHJvZmlsZS9Qcm9maWxlQ29tcC5qcyIsImxldCBpbml0U3RhdGUgPSB7XG4gICAgaWQ6ICcnLFxuICAgIGxvZ2luOiAnJyxcbiAgICBlbWFpbDogJycsXG4gICAgZnJpZW5kczogJycsXG4gICAgZnJpZW5kUmVxdWVzdHM6IDAsXG4gICAgc2VsZkZyaWVuZFJlcXVlc3RzOiAwLFxuICAgIGNvdW50Q2hhdHM6IDAsXG4gICAgY291bnRCbG9nczogMCxcbiAgICBzdGF0dXM6IG51bGwsXG4gICAgZXJyb3I6IG51bGwsXG59O1xuY29uc3QgcHJvZmlsZSA9IChzdGF0ZSA9IGluaXRTdGF0ZSwgYWN0aW9uKSA9PiB7XG4gICAgbGV0IGRhdGEgPSBudWxsO1xuICAgIFxuXG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgICBjYXNlICdQUk9GSUxFX1NFTkQnOlxuICAgICAgICAgICAgbGV0IHNlbmRTdGF0ZSA9IHsuLi5zdGF0ZX07XG4gICAgICAgICAgICBzZW5kU3RhdGUuc3RhdHVzID0gJ3NlbmQnO1xuICAgICAgICAgICAgcmV0dXJuIHNlbmRTdGF0ZTtcbiAgICAgICAgY2FzZSAnUFJPRklMRV9TVUNDRVNTJzpcbiAgICAgICAgICAgIGRhdGEgPSB7Li4uYWN0aW9uLmRhdGEucHJvZmlsZX07XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIF9pZDogZGF0YS5faWQsXG4gICAgICAgICAgICAgICAgbG9naW46IGRhdGEubG9naW4sXG4gICAgICAgICAgICAgICAgZW1haWw6IGRhdGEuZW1haWwsXG4gICAgICAgICAgICAgICAgZnJpZW5kczogZGF0YS5mcmllbmRzIHx8IDAsXG4gICAgICAgICAgICAgICAgZnJpZW5kUmVxdWVzdHM6IGRhdGEuZnJpZW5kUmVxdWVzdHMgfHwgMCxcbiAgICAgICAgICAgICAgICBzZWxmRnJpZW5kUmVxdWVzdHM6IGRhdGEuc2VsZkZyaWVuZFJlcXVlc3RzIHx8IDAsXG4gICAgICAgICAgICAgICAgY291bnRDaGF0czogZGF0YS5jb3VudENoYXRzIHx8IDAsXG4gICAgICAgICAgICAgICAgY291bnRCbG9nczogZGF0YS5jb3VudEJsb2dzIHx8IDAsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdQUk9GSUxFX0VSUk9SJzpcbiAgICAgICAgICAgIGxldCBlcnJvclN0YXRlID0gey4uLnN0YXRlfTtcbiAgICAgICAgICAgIGVycm9yU3RhdGUuc3RhdHVzID0gJ2Vycm9yJztcbiAgICAgICAgICAgIGVycm9yU3RhdGUuZXJyb3IgPSBhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3JTdGF0ZTtcbiAgICAgICAgXG4gICAgICAgIGNhc2UgJ1BST0ZJTEVfRURJVF9TRU5EJzpcbiAgICAgICAgICAgIHN0YXRlID0gey4uLnN0YXRlfTtcbiAgICAgICAgICAgIHN0YXRlLmxvZ2luID0gYWN0aW9uLmxvZ2luO1xuICAgICAgICAgICAgc3RhdGUuZW1haWwgPSBhY3Rpb24uZW1haWw7XG4gICAgICAgICAgICBzdGF0ZS5zdGF0dXMgPSAnc2VuZCc7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIGNhc2UgJ1BST0ZJTEVfRURJVF9TVUNDRVNTJzpcbiAgICAgICAgICAgIGRhdGEgPSB7Li4uYWN0aW9uLmRhdGEuZWRpdFByb2ZpbGV9O1xuICAgICAgICAgICAgc3RhdGUgPSB7Li4uc3RhdGV9O1xuICAgICAgICAgICAgc3RhdGUubG9naW4gPSBkYXRhLmxvZ2luO1xuICAgICAgICAgICAgc3RhdGUuZW1haWwgPSBkYXRhLmVtYWlsO1xuICAgICAgICAgICAgc3RhdGUuc3RhdHVzID0gJ2VkaXRfc3VjY2Vzcyc7XG4gICAgICAgICAgICBzdGF0ZS5lcnJvciA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIGNhc2UgJ1BST0ZJTEVfRURJVF9FUlJPUic6XG4gICAgICAgICAgICBzdGF0ZSA9IHsuLi5zdGF0ZX07XG4gICAgICAgICAgICBzdGF0ZS5zdGF0dXMgPSAnZWRpdF9lcnJvcic7XG4gICAgICAgICAgICBzdGF0ZS5lcnJvciA9IGFjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgcHJvZmlsZVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3N0YXRpY19zcmMvcHJvZmlsZS9Qcm9maWxlUmVkLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==
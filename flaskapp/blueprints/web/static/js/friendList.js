webpackJsonp([6],{352:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=a(1),s=r(n),o=a(10),l=a(6);a(14),a(15);var u=a(7),i=a(353),c=r(i),d=a(16),f=r(d),p=a(354),m=r(p),h=a(17),v=(0,h.configureStore)({auth:f.default,friendList:m.default}),g=(0,u.layout)({comp:c.default,forAuth:!0});(0,o.render)(s.default.createElement(l.Provider,{store:v},s.default.createElement(g,null)),document.getElementById("root"))},353:function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(1),i=function(e){return e&&e.__esModule?e:{default:e}}(u),c=a(6),d=a(20),f=a(22),p=a(7);a(319);a(11);var m=function(t){function a(e){r(this,a);var t=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={user:null},t}return s(a,t),l(a,[{key:"showRemove",value:function(){console.log("UserRemoveModal",this.props.show),!0===this.props.show?e(".user-remove-modal").modal("show"):e(".user-remove-modal").modal("hide")}},{key:"componentDidMount",value:function(){this.showRemove()}},{key:"componentDidUpdate",value:function(e,t){console.log("prevProps",e,"prevState",t),this.showRemove()}},{key:"render",value:function(){return i.default.createElement("div",{className:"user-remove-modal modal fade",tabindex:"-1",role:"dialog"},i.default.createElement("div",{className:"modal-dialog modal-sm",role:"document"},i.default.createElement("div",{className:"modal-content"},i.default.createElement("div",{className:"modal-header"},i.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},i.default.createElement("span",{"aria-hidden":"true"},"×")),i.default.createElement("h4",{className:"modal-title"},"Modal title")),i.default.createElement("div",{className:"modal-body"},i.default.createElement("p",null,"One fine body…")),i.default.createElement("div",{className:"modal-footer"},i.default.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Close"),i.default.createElement("button",{type:"button",className:"btn btn-primary"},"Save changes")))))}}]),a}(i.default.Component),h=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"showRemove",value:function(e){e.preventDefault(),console.log("UserItemComp showRemove"),this.props.showRemove()}},{key:"render",value:function(){var e=this.props.user.online?"success":"active",t=null,a=null;return null!==this.props.user.selfFriendId&&null!==this.props.user.friendUserId?(t=i.default.createElement("button",{className:"btn btn-default",onClick:this.showRemove.bind(this)},i.default.createElement("span",{className:"glyphicon glyphicon-minus"}),"  Remove from friends"),a=i.default.createElement("a",{className:"btn btn-default",href:"/chat-private/"+this.props.user.id},i.default.createElement("span",{className:"glyphicon glyphicon-envelope"}),"  Send message")):t=i.default.createElement("button",{className:"btn btn-default"},i.default.createElement("span",{className:"glyphicon glyphicon-plus"}),"  Add to friends"),i.default.createElement("tr",{className:e},i.default.createElement("td",null,i.default.createElement("span",{className:"glyphicon glyphicon-user"})," ",i.default.createElement("span",null,this.props.user.login)),i.default.createElement("td",null,this.props.user.dtActive),i.default.createElement("td",{className:"text-right"},t," ",a))}}]),t}(i.default.Component),v=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={start:a.props.friendList.start,friends:a.props.friendList.friends,showRemove:!1},a}return s(t,e),l(t,[{key:"componentWillMount",value:function(){this.changePage(this.props.friendList.start)}},{key:"changePage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.props.dispatch((0,d.graphql)({type:"FRIEND_LIST",start:e,perpage:this.props.friendList.perpage}))}},{key:"showRemove",value:function(){console.log("FriendListComp showRemove"),this.setState({showRemove:!0})}},{key:"getUserItems",value:function(){var e=this,t=(0,f.map)(this.props.friendList.friends,function(t){return i.default.createElement(h,{user:t,showRemove:e.showRemove.bind(e)})});return i.default.createElement("table",{className:"table table-hover"},i.default.createElement("tbody",null,t))}},{key:"render",value:function(){var e=null;"error"==this.props.friendList.status?e={className:"danger",text:this.props.friendList.error}:"send"===this.props.friendList.status&&(e={className:"info",text:"Loading, please wait"});var t={start:this.props.friendList.start,perpage:this.props.friendList.perpage,count:this.props.friendList.count,items:this.getUserItems(),changePage:this.changePage.bind(this)};return i.default.createElement("div",null,i.default.createElement(p.AlertMessage,{opts:e}),i.default.createElement(p.PaginatorLayout,{param:t}),i.default.createElement(m,{show:this.state.showRemove}))}}]),t}(i.default.Component),g=function(e){return o({},e)};v=(0,c.connect)(g)(v),t.default=v}).call(t,a(11))},354:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=(a(22),{start:window.localParams.start?parseInt(window.localParams.start):0,perpage:window.localParams.perpage?parseInt(window.localParams.perpage):9,friends:[],count:0,status:null,error:null}),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1],a=r({},e);switch(t.type){case"FRIEND_LIST_SEND":return a.start=t.start,a.status="send",a;case"FRIEND_LIST_SUCCESS":return a.status="success",a.friends=t.data.getFriendList.friends,a.count=t.data.getFriendList.count,a;case"FRIEND_LIST_ERROR":return a.status="error",a.error=t.error,a;case"FRIEND_REMOVE_SEND":return a.status="send",a;case"FRIEND_REMOVE_SUCCESS":return a.status="success",a;case"FRIEND_REMOVE_ERROR":return a.status="error",a;default:return e}};t.default=s}},[352]);
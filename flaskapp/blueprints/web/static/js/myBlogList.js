webpackJsonp([3],{325:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=a(2),l=r(n),s=a(12),o=a(8);a(24),a(25);var u=a(9),c=a(326),i=r(c),p=a(26),d=r(p),f=a(327),m=r(f),g=a(27),h=(0,g.configureStore)({auth:d.default,myBlogList:m.default}),y=(0,u.layout)({comp:i.default,forAuth:!0});(0,s.render)(l.default.createElement(o.Provider,{store:h},l.default.createElement(y,null)),document.getElementById("root"))},326:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(2),c=function(e){return e&&e.__esModule?e:{default:e}}(u),i=a(8),p=a(29),d=a(48),f=a(9),m=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={start:a.props.myBlogList.start,blogs:a.props.myBlogList.blogs},a}return l(t,e),o(t,[{key:"componentWillMount",value:function(){this.props.dispatch((0,p.graphql)({type:"MY_BLOG_LIST",start:this.props.myBlogList.start,perpage:this.props.myBlogList.perpage}))}},{key:"changePage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.props.dispatch((0,p.graphql)({type:"MY_BLOG_LIST",start:e,perpage:this.props.myBlogList.perpage}))}},{key:"publicBlog",value:function(e){this.props.dispatch((0,p.graphql)({type:"MY_BLOG_PUBLIC",id:e.id,public:e.public}))}},{key:"getBlogItems",value:function(){var e=this,t=(0,d.chunk)(this.props.myBlogList.blogs,3);return(0,d.map)(t,function(t){var a=(0,d.map)(t,function(t){function a(a){return a.preventDefault(),e.publicBlog({id:t.id,public:!t.public})}var r=null;return r=t.public?c.default.createElement("btn",{className:"btn btn-default",onClick:a,"data-id":t.id},c.default.createElement("span",{className:"glyphicon glyphicon-remove"}),"  hide"):c.default.createElement("btn",{className:"btn btn-default",onClick:a,"data-id":t.id},c.default.createElement("span",{className:"glyphicon glyphicon-ok"}),"  show"),c.default.createElement("div",{className:"col-md-4"},c.default.createElement("div",{className:"panel panel-default"},c.default.createElement("div",{className:"panel-heading"},c.default.createElement("h4",{className:"panel-title"},c.default.createElement("a",{href:"/my-blog-detail/"+t.id},t.title))),c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",{dangerouslySetInnerHTML:{__html:t.text}})),c.default.createElement("div",{className:"panel-footer"},c.default.createElement("p",null,c.default.createElement("span",{className:"glyphicon glyphicon-user"})," ",t.userName),c.default.createElement("p",null,c.default.createElement("span",{className:"glyphicon glyphicon-calendar"})," ",t.date),c.default.createElement("p",null,c.default.createElement("a",{href:"/blog-edit/"+t.id,className:"btn btn-default"},c.default.createElement("span",{className:"glyphicon glyphicon-pencil"}),"  edit")," ",r," ",c.default.createElement("a",{href:"/post-edit/"+t.id+"/-1",className:"btn btn-default"},c.default.createElement("span",{className:"glyphicon glyphicon-plus"}),"  Add post")))))});return c.default.createElement("div",{className:"row"},a)})}},{key:"render",value:function(){var e=null;"error"===this.props.myBlogList.status?e={className:"danger",text:this.props.myBlogList.error}:"send"===this.props.status&&(e={className:"info",text:"Loading, please wait"});var t={start:this.props.myBlogList.start,perpage:this.props.myBlogList.perpage,count:this.props.myBlogList.count,items:this.getBlogItems(),changePage:this.changePage.bind(this)};return c.default.createElement("div",null,c.default.createElement(f.AlertMessage,{opts:e}),c.default.createElement(f.PaginatorLayout,{param:t}))}}]),t}(c.default.Component),g=function(e){return s({},e)};m=(0,i.connect)(g)(m),t.default=m},327:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(48),l={userId:window.localParams.userId?parseInt(window.localParams.userId):null,start:window.localParams.start?parseInt(window.localParams.start):0,perpage:window.localParams.perpage?parseInt(window.localParams.perpage):9,blogs:[],count:0,status:null},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1],a=r({},e);switch(t.type){case"MY_BLOG_LIST_SEND":return a.start=t.start,a.status="send",a;case"MY_BLOG_LIST_SUCCESS":return a.status="success",a.blogs=t.data.getMyBlogList.blogs,a.count=t.data.getMyBlogList.count,a;case"MY_BLOG_LIST_ERROR":return a.status="error",a.error=t.error,a;case"MY_BLOG_PUBLIC_SEND":return a.start=t.start,a.status="send",a;case"MY_BLOG_PUBLIC_SUCCESS":return a.status="success",(0,n.forEach)(a.blogs,function(e){e.id==t.data.publicMyBlog.id&&(e.public=t.data.publicMyBlog.public)}),a;case"MY_BLOG_PUBLIC_ERROR":return a.status="error",a.error=t.error,a;default:return e}};t.default=s}},[325]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbXlCbG9nTGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWNfc3JjL215QmxvZ0xpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljX3NyYy9ibG9nL015TGlzdENvbXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljX3NyYy9ibG9nL015TGlzdFJlZC5qcyJdLCJuYW1lcyI6WyJ3ZWJwYWNrSnNvbnAiLCIzMjUiLCJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9yZWFjdCIsIl9yZWFjdDIiLCJfcmVhY3REb20iLCJfcmVhY3RSZWR1eCIsIl9jb21wb25lbnQiLCJfTXlMaXN0Q29tcCIsIl9NeUxpc3RDb21wMiIsIl9Mb2dpblJlZCIsIl9Mb2dpblJlZDIiLCJfTXlMaXN0UmVkIiwiX015TGlzdFJlZDIiLCJfY29uZmlndXJlU3RvcmUiLCJzdG9yZSIsImNvbmZpZ3VyZVN0b3JlIiwiYXV0aCIsIm15QmxvZ0xpc3QiLCJDb21wIiwibGF5b3V0IiwiY29tcCIsIk15TGlzdENvbXAiLCJmb3JBdXRoIiwicmVuZGVyIiwiY3JlYXRlRWxlbWVudCIsIlByb3ZpZGVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIjMyNiIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJjYWxsIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJkZWZpbmVQcm9wZXJ0eSIsIl9leHRlbmRzIiwiYXNzaWduIiwidGFyZ2V0IiwiaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInNvdXJjZSIsImtleSIsImhhc093blByb3BlcnR5IiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInByb3BzIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9hY3Rpb24iLCJfbG9kYXNoIiwiQmxvZ0xpc3RDb21wIiwiX1JlYWN0JENvbXBvbmVudCIsInRoaXMiLCJfdGhpcyIsImdldFByb3RvdHlwZU9mIiwic3RhdGUiLCJzdGFydCIsImJsb2dzIiwiZGlzcGF0Y2giLCJncmFwaHFsIiwidHlwZSIsInBlcnBhZ2UiLCJ1bmRlZmluZWQiLCJwIiwiaWQiLCJwdWJsaWMiLCJjaHVua2VkSXRlbXMiLCJjaHVuayIsIm1hcCIsInBhcnRpdGlvbiIsImJsb2ciLCJwdWJCbG9nIiwiZSIsInByZXZlbnREZWZhdWx0IiwicHVibGljQmxvZyIsImhpZGVCdG4iLCJjbGFzc05hbWUiLCJvbkNsaWNrIiwiZGF0YS1pZCIsImhyZWYiLCJ0aXRsZSIsImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiwiX19odG1sIiwidGV4dCIsInVzZXJOYW1lIiwiZGF0ZSIsImFsZXJ0T3B0cyIsInN0YXR1cyIsImVycm9yIiwicGFnZXJQYXJhbSIsImNvdW50IiwiaXRlbXMiLCJnZXRCbG9nSXRlbXMiLCJjaGFuZ2VQYWdlIiwiYmluZCIsIkFsZXJ0TWVzc2FnZSIsIm9wdHMiLCJQYWdpbmF0b3JMYXlvdXQiLCJwYXJhbSIsIlJlYWN0IiwiQ29tcG9uZW50IiwibWFwU3RhdGVUb1Byb3BzIiwiY29ubmVjdCIsIjMyNyIsImluaXRTdGF0ZSIsInVzZXJJZCIsIndpbmRvdyIsImxvY2FsUGFyYW1zIiwicGFyc2VJbnQiLCJhY3Rpb24iLCJkYXRhIiwiZ2V0TXlCbG9nTGlzdCIsImZvckVhY2giLCJwdWJsaWNNeUJsb2ciXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLElB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QkFTRCxNQVJBQSxHQUFLdkIsT0FBUyxXQUNkLEVBQUF0QyxFQUFBK0QsU0FBUUYsRUFBS3JELE1BQU8sU0FBQ2EsR0FDYkEsRUFBS04sSUFBTTZDLEVBQU9DLEtBQUtHLGFBQWFqRCxLQUNwQ00sRUFBS0wsT0FBUzRDLEVBQU9DLEtBQUtHLGFBQWFoRCxVQUt4QzZDLENBQ1gsS0FBSyx1QkFHRCxNQUZBQSxHQUFLdkIsT0FBUyxRQUNkdUIsRUFBS3RCLE1BQVFxQixFQUFPckIsTUFDYnNCLENBRVgsU0FDSSxNQUFPdkQsSUhtVG5CN0UsR0FBUUssUUcvU09nQixLSG1UWiIsImZpbGUiOiJteUJsb2dMaXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsid2VicGFja0pzb25wKFszXSx7XG5cbi8qKiovIDMyNTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbnZhciBfcmVhY3RSZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbl9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblxudmFyIF9jb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXG52YXIgX015TGlzdENvbXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyNik7XG5cbnZhciBfTXlMaXN0Q29tcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NeUxpc3RDb21wKTtcblxudmFyIF9Mb2dpblJlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXG52YXIgX0xvZ2luUmVkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xvZ2luUmVkKTtcblxudmFyIF9NeUxpc3RSZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyNyk7XG5cbnZhciBfTXlMaXN0UmVkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX015TGlzdFJlZCk7XG5cbnZhciBfY29uZmlndXJlU3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHN0b3JlID0gKDAsIF9jb25maWd1cmVTdG9yZS5jb25maWd1cmVTdG9yZSkoe1xuXHRhdXRoOiBfTG9naW5SZWQyLmRlZmF1bHQsXG5cdG15QmxvZ0xpc3Q6IF9NeUxpc3RSZWQyLmRlZmF1bHRcbn0pO1xuXG52YXIgQ29tcCA9ICgwLCBfY29tcG9uZW50LmxheW91dCkoeyBjb21wOiBfTXlMaXN0Q29tcDIuZGVmYXVsdCwgZm9yQXV0aDogdHJ1ZSB9KTtcbigwLCBfcmVhY3REb20ucmVuZGVyKShfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0X3JlYWN0UmVkdXguUHJvdmlkZXIsXG5cdHsgc3RvcmU6IHN0b3JlIH0sXG5cdF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KENvbXAsIG51bGwpXG4pLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDMyNjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3RSZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbnZhciBfYWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cbnZhciBfbG9kYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG5cbnZhciBfY29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgQmxvZ0xpc3RDb21wID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoQmxvZ0xpc3RDb21wLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIEJsb2dMaXN0Q29tcChwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQmxvZ0xpc3RDb21wKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQmxvZ0xpc3RDb21wLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQmxvZ0xpc3RDb21wKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc3RhcnQ6IF90aGlzLnByb3BzLm15QmxvZ0xpc3Quc3RhcnQsXG4gICAgICAgICAgICBibG9nczogX3RoaXMucHJvcHMubXlCbG9nTGlzdC5ibG9nc1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEJsb2dMaXN0Q29tcCwgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goKDAsIF9hY3Rpb24uZ3JhcGhxbCkoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdNWV9CTE9HX0xJU1QnLFxuICAgICAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnByb3BzLm15QmxvZ0xpc3Quc3RhcnQsXG4gICAgICAgICAgICAgICAgcGVycGFnZTogdGhpcy5wcm9wcy5teUJsb2dMaXN0LnBlcnBhZ2VcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY2hhbmdlUGFnZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VQYWdlKCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAwO1xuXG4gICAgICAgICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKCgwLCBfYWN0aW9uLmdyYXBocWwpKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnTVlfQkxPR19MSVNUJyxcbiAgICAgICAgICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgICAgICAgICAgcGVycGFnZTogdGhpcy5wcm9wcy5teUJsb2dMaXN0LnBlcnBhZ2VcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogbWFrZSB0aGUgYmxvZyBwdWJsaWMgb3IgaGlkZGVuXG4gICAgICAgICAqIEBwYXJhbSAge051bWJlcn0gcC5pZCBpZCBvZiBibG9nXG4gICAgICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IHAucHVibGljIHRydWUgLSBzaG93IGJsb2csIGZhbHNlIC0gaGlkZSBibG9nXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdwdWJsaWNCbG9nJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHB1YmxpY0Jsb2cocCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5kaXNwYXRjaCgoMCwgX2FjdGlvbi5ncmFwaHFsKSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ01ZX0JMT0dfUFVCTElDJyxcbiAgICAgICAgICAgICAgICBpZDogcC5pZCxcbiAgICAgICAgICAgICAgICBwdWJsaWM6IHAucHVibGljXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldEJsb2dJdGVtcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRCbG9nSXRlbXMoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY2h1bmtlZEl0ZW1zID0gKDAsIF9sb2Rhc2guY2h1bmspKHRoaXMucHJvcHMubXlCbG9nTGlzdC5ibG9ncywgMyk7XG4gICAgICAgICAgICB2YXIgYmxvZ3MgPSAoMCwgX2xvZGFzaC5tYXApKGNodW5rZWRJdGVtcywgZnVuY3Rpb24gKGJsb2dzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnRpdGlvbiA9ICgwLCBfbG9kYXNoLm1hcCkoYmxvZ3MsIGZ1bmN0aW9uIChibG9nKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoaWRlQnRuID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcHViQmxvZyhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5wdWJsaWNCbG9nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogYmxvZy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWM6ICFibG9nLnB1YmxpY1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2cucHVibGljKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlQnRuID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J0bicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnLCBvbkNsaWNrOiBwdWJCbG9nLCAnZGF0YS1pZCc6IGJsb2cuaWQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmUnIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMCBoaWRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVCdG4gPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnRuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2J0biBidG4tZGVmYXVsdCcsIG9uQ2xpY2s6IHB1YkJsb2csICdkYXRhLWlkJzogYmxvZy5pZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLW9rJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXFx4QTAgc2hvdydcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLW1kLTQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsIHBhbmVsLWRlZmF1bHQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWhlYWRpbmcnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2g0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtdGl0bGUnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBocmVmOiBcIi9teS1ibG9nLWRldGFpbC9cIiArIGJsb2cuaWQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9nLnRpdGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1ib2R5JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBkYW5nZXJvdXNseVNldElubmVySFRNTDogeyBfX2h0bWw6IGJsb2cudGV4dCB9IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtZm9vdGVyJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi11c2VyJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9nLnVzZXJOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLWNhbGVuZGFyJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcXHhBMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9nLmRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHJlZjogXCIvYmxvZy1lZGl0L1wiICsgYmxvZy5pZCwgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLXBlbmNpbCcgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwIGVkaXQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xceEEwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVCdG4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXFx4QTAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHJlZjogXCIvcG9zdC1lZGl0L1wiICsgYmxvZy5pZCArIFwiLy0xXCIsIGNsYXNzTmFtZTogJ2J0biBidG4tZGVmYXVsdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVzJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXFx4QTAgQWRkIHBvc3QnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JvdycgfSxcbiAgICAgICAgICAgICAgICAgICAgcGFydGl0aW9uXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gYmxvZ3M7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgYWxlcnRPcHRzID0gbnVsbCxcbiAgICAgICAgICAgICAgICBibG9ncyA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm15QmxvZ0xpc3Quc3RhdHVzID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdkYW5nZXInLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnByb3BzLm15QmxvZ0xpc3QuZXJyb3JcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnN0YXR1cyA9PT0gJ3NlbmQnKSB7XG4gICAgICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdpbmZvJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0xvYWRpbmcsIHBsZWFzZSB3YWl0J1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwYWdlclBhcmFtID0ge1xuICAgICAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnByb3BzLm15QmxvZ0xpc3Quc3RhcnQsXG4gICAgICAgICAgICAgICAgcGVycGFnZTogdGhpcy5wcm9wcy5teUJsb2dMaXN0LnBlcnBhZ2UsXG4gICAgICAgICAgICAgICAgY291bnQ6IHRoaXMucHJvcHMubXlCbG9nTGlzdC5jb3VudCxcbiAgICAgICAgICAgICAgICBpdGVtczogdGhpcy5nZXRCbG9nSXRlbXMoKSxcbiAgICAgICAgICAgICAgICBjaGFuZ2VQYWdlOiB0aGlzLmNoYW5nZVBhZ2UuYmluZCh0aGlzKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NvbXBvbmVudC5BbGVydE1lc3NhZ2UsIHsgb3B0czogYWxlcnRPcHRzIH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb21wb25lbnQuUGFnaW5hdG9yTGF5b3V0LCB7IHBhcmFtOiBwYWdlclBhcmFtIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEJsb2dMaXN0Q29tcDtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbnZhciBtYXBTdGF0ZVRvUHJvcHMgPSBmdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUpIHtcbiAgICByZXR1cm4gX2V4dGVuZHMoe30sIHN0YXRlKTtcbn07XG5CbG9nTGlzdENvbXAgPSAoMCwgX3JlYWN0UmVkdXguY29ubmVjdCkobWFwU3RhdGVUb1Byb3BzKShCbG9nTGlzdENvbXApO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBCbG9nTGlzdENvbXA7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMjc6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9sb2Rhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcblxudmFyIGluaXRTdGF0ZSA9IHtcbiAgICB1c2VySWQ6IHdpbmRvdy5sb2NhbFBhcmFtcy51c2VySWQgPyBwYXJzZUludCh3aW5kb3cubG9jYWxQYXJhbXMudXNlcklkKSA6IG51bGwsXG4gICAgc3RhcnQ6IHdpbmRvdy5sb2NhbFBhcmFtcy5zdGFydCA/IHBhcnNlSW50KHdpbmRvdy5sb2NhbFBhcmFtcy5zdGFydCkgOiAwLFxuICAgIHBlcnBhZ2U6IHdpbmRvdy5sb2NhbFBhcmFtcy5wZXJwYWdlID8gcGFyc2VJbnQod2luZG93LmxvY2FsUGFyYW1zLnBlcnBhZ2UpIDogOSxcbiAgICBibG9nczogW10sXG4gICAgY291bnQ6IDAsXG4gICAgc3RhdHVzOiBudWxsXG59O1xuXG52YXIgbXlCbG9nTGlzdCA9IGZ1bmN0aW9uIG15QmxvZ0xpc3QoKSB7XG4gICAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBpbml0U3RhdGU7XG4gICAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50c1sxXTtcblxuICAgIHZhciBkYXRhID0gX2V4dGVuZHMoe30sIHN0YXRlKTtcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ01ZX0JMT0dfTElTVF9TRU5EJzpcbiAgICAgICAgICAgIGRhdGEuc3RhcnQgPSBhY3Rpb24uc3RhcnQ7XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzZW5kJztcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBjYXNlICdNWV9CTE9HX0xJU1RfU1VDQ0VTUyc6XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzdWNjZXNzJztcbiAgICAgICAgICAgIGRhdGEuYmxvZ3MgPSBhY3Rpb24uZGF0YS5nZXRNeUJsb2dMaXN0LmJsb2dzO1xuICAgICAgICAgICAgZGF0YS5jb3VudCA9IGFjdGlvbi5kYXRhLmdldE15QmxvZ0xpc3QuY291bnQ7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgY2FzZSAnTVlfQkxPR19MSVNUX0VSUk9SJzpcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ2Vycm9yJztcbiAgICAgICAgICAgIGRhdGEuZXJyb3IgPSBhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcblxuICAgICAgICBjYXNlICdNWV9CTE9HX1BVQkxJQ19TRU5EJzpcbiAgICAgICAgICAgIGRhdGEuc3RhcnQgPSBhY3Rpb24uc3RhcnQ7XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzZW5kJztcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBjYXNlICdNWV9CTE9HX1BVQkxJQ19TVUNDRVNTJzpcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3N1Y2Nlc3MnO1xuICAgICAgICAgICAgKDAsIF9sb2Rhc2guZm9yRWFjaCkoZGF0YS5ibG9ncywgZnVuY3Rpb24gKGJsb2cpIHtcbiAgICAgICAgICAgICAgICBpZiAoYmxvZy5pZCA9PSBhY3Rpb24uZGF0YS5wdWJsaWNNeUJsb2cuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxvZy5wdWJsaWMgPSBhY3Rpb24uZGF0YS5wdWJsaWNNeUJsb2cucHVibGljO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgY2FzZSAnTVlfQkxPR19QVUJMSUNfRVJST1InOlxuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnZXJyb3InO1xuICAgICAgICAgICAgZGF0YS5lcnJvciA9IGFjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gbXlCbG9nTGlzdDtcblxuLyoqKi8gfSlcblxufSxbMzI1XSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG15QmxvZ0xpc3QuanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyByZW5kZXIgfSBmcm9tICdyZWFjdC1kb20nXG5pbXBvcnQgeyBQcm92aWRlciB9IGZyb20gJ3JlYWN0LXJlZHV4J1xuXG5pbXBvcnQgJ2Jvb3RzdHJhcC9kaXN0L2Nzcy9ib290c3RyYXAuY3NzJztcbmltcG9ydCAnLi9zdHlsZXMvaW5kZXguc2NzcydcblxuaW1wb3J0IHtsYXlvdXR9IGZyb20gJy4vaGVscGVycy9jb21wb25lbnQnXG5pbXBvcnQgTXlMaXN0Q29tcCBmcm9tICcuL2Jsb2cvTXlMaXN0Q29tcCdcblxuaW1wb3J0IGF1dGggZnJvbSAnLi9hdXRoL0xvZ2luUmVkJ1xuaW1wb3J0IG15QmxvZ0xpc3QgZnJvbSAnLi9ibG9nL015TGlzdFJlZCdcblxuaW1wb3J0IHtjb25maWd1cmVTdG9yZX0gZnJvbSAnLi9oZWxwZXJzL2NvbmZpZ3VyZVN0b3JlJ1xuXG5sZXQgc3RvcmUgPSBjb25maWd1cmVTdG9yZSh7XG5cdGF1dGg6IGF1dGgsXG5cdG15QmxvZ0xpc3Q6IG15QmxvZ0xpc3QsXG59KTtcblxubGV0IENvbXAgPSBsYXlvdXQoe2NvbXA6IE15TGlzdENvbXAsIGZvckF1dGg6IHRydWV9KTtcbnJlbmRlcihcblx0PFByb3ZpZGVyIHN0b3JlPXtzdG9yZX0+XG5cdFx0PENvbXAgLz5cblx0PC9Qcm92aWRlcj4sXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290JylcbilcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zdGF0aWNfc3JjL215QmxvZ0xpc3QuanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7IGdyYXBocWwgfSBmcm9tICcuLi9oZWxwZXJzL2FjdGlvbic7XG5pbXBvcnQge2ZvckVhY2gsIGNodW5rLCBtYXB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQge0FsZXJ0TWVzc2FnZSwgUGFnaW5hdG9yTGF5b3V0fSBmcm9tICcuLi9oZWxwZXJzL2NvbXBvbmVudCc7XG5cbmNsYXNzIEJsb2dMaXN0Q29tcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzdGFydDogdGhpcy5wcm9wcy5teUJsb2dMaXN0LnN0YXJ0LFxuICAgICAgICAgICAgYmxvZ3M6IHRoaXMucHJvcHMubXlCbG9nTGlzdC5ibG9ncyxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxNb3VudCAoKSB7XG4gICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goZ3JhcGhxbCh7XG4gICAgICAgICAgICB0eXBlOiAnTVlfQkxPR19MSVNUJyxcbiAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnByb3BzLm15QmxvZ0xpc3Quc3RhcnQsXG4gICAgICAgICAgICBwZXJwYWdlOiB0aGlzLnByb3BzLm15QmxvZ0xpc3QucGVycGFnZSxcbiAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIGNoYW5nZVBhZ2UgKHN0YXJ0ID0gMCkge1xuICAgICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKGdyYXBocWwoe1xuICAgICAgICAgICAgdHlwZTogJ01ZX0JMT0dfTElTVCcsXG4gICAgICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgICAgICBwZXJwYWdlOiB0aGlzLnByb3BzLm15QmxvZ0xpc3QucGVycGFnZSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBtYWtlIHRoZSBibG9nIHB1YmxpYyBvciBoaWRkZW5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHAuaWQgaWQgb2YgYmxvZ1xuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IHAucHVibGljIHRydWUgLSBzaG93IGJsb2csIGZhbHNlIC0gaGlkZSBibG9nXG4gICAgICovXG4gICAgcHVibGljQmxvZyAocCkge1xuICAgICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKGdyYXBocWwoe1xuICAgICAgICAgICAgdHlwZTogJ01ZX0JMT0dfUFVCTElDJyxcbiAgICAgICAgICAgIGlkOiBwLmlkLFxuICAgICAgICAgICAgcHVibGljOiBwLnB1YmxpY1xuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgZ2V0QmxvZ0l0ZW1zICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBsZXQgY2h1bmtlZEl0ZW1zID0gY2h1bmsodGhpcy5wcm9wcy5teUJsb2dMaXN0LmJsb2dzLCAzKTtcbiAgICAgICAgbGV0IGJsb2dzID0gbWFwKGNodW5rZWRJdGVtcywgYmxvZ3MgPT4ge1xuICAgICAgICAgICAgbGV0IHBhcnRpdGlvbiA9IG1hcChibG9ncywgYmxvZyA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGhpZGVCdG4gPSBudWxsO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHB1YkJsb2cgKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5wdWJsaWNCbG9nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBibG9nLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljOiAhIGJsb2cucHVibGljXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYmxvZy5wdWJsaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZUJ0biA9IDxidG4gY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17cHViQmxvZ30gZGF0YS1pZD17YmxvZy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXJlbW92ZVwiPjwvc3Bhbj4mbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVcbiAgICAgICAgICAgICAgICAgICAgPC9idG4+XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZUJ0biA9IDxidG4gY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17cHViQmxvZ30gZGF0YS1pZD17YmxvZy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLW9rXCI+PC9zcGFuPiZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1xuICAgICAgICAgICAgICAgICAgICA8L2J0bj5cbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC00XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwgcGFuZWwtZGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1oZWFkaW5nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInBhbmVsLXRpdGxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWYgPSB7XCIvbXktYmxvZy1kZXRhaWwvXCIgKyBibG9nLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtibG9nLnRpdGxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogYmxvZy50ZXh0fX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1mb290ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi11c2VyXCI+PC9zcGFuPiZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YmxvZy51c2VyTmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tY2FsZW5kYXJcIj48L3NwYW4+Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtibG9nLmRhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtcIi9ibG9nLWVkaXQvXCIgKyBibG9nLmlkfSBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tcGVuY2lsXCI+PC9zcGFuPiZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aGlkZUJ0bn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e1wiL3Bvc3QtZWRpdC9cIiArIGJsb2cuaWQgKyBcIi8tMVwifSBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tcGx1c1wiPjwvc3Bhbj4mbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZCBwb3N0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJyb3dcIj57cGFydGl0aW9ufTwvZGl2PlxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYmxvZ3M7XG4gICAgfVxuXG5cblxuICAgIHJlbmRlciAoKSB7XG4gICAgICAgIGxldCBhbGVydE9wdHMgPSBudWxsLFxuICAgICAgICAgICAgYmxvZ3MgPSBudWxsO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm15QmxvZ0xpc3Quc3RhdHVzID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZGFuZ2VyJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnByb3BzLm15QmxvZ0xpc3QuZXJyb3JcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnN0YXR1cyA9PT0gJ3NlbmQnKSB7XG4gICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnaW5mbycsXG4gICAgICAgICAgICAgICAgdGV4dDogJ0xvYWRpbmcsIHBsZWFzZSB3YWl0JyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwYWdlclBhcmFtID0ge1xuICAgICAgICAgICAgc3RhcnQ6IHRoaXMucHJvcHMubXlCbG9nTGlzdC5zdGFydCxcbiAgICAgICAgICAgIHBlcnBhZ2U6IHRoaXMucHJvcHMubXlCbG9nTGlzdC5wZXJwYWdlLFxuICAgICAgICAgICAgY291bnQ6IHRoaXMucHJvcHMubXlCbG9nTGlzdC5jb3VudCxcbiAgICAgICAgICAgIGl0ZW1zOiB0aGlzLmdldEJsb2dJdGVtcygpLFxuICAgICAgICAgICAgY2hhbmdlUGFnZTogOjp0aGlzLmNoYW5nZVBhZ2UsXG4gICAgICAgIH07XG5cblxuICAgICAgICByZXR1cm4gPGRpdj5cbiAgICAgICAgICAgIDxBbGVydE1lc3NhZ2Ugb3B0cz17YWxlcnRPcHRzfSAvPlxuICAgICAgICAgICAgPFBhZ2luYXRvckxheW91dCBwYXJhbT17cGFnZXJQYXJhbX0gLz5cbiAgICAgICAgPC9kaXY+XG5cbiAgICB9XG59XG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSAoc3RhdGUpID0+IHtcbiAgICByZXR1cm4gey4uLnN0YXRlfVxufVxuQmxvZ0xpc3RDb21wID0gY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMpKEJsb2dMaXN0Q29tcClcblxuZXhwb3J0IGRlZmF1bHQgQmxvZ0xpc3RDb21wXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zdGF0aWNfc3JjL2Jsb2cvTXlMaXN0Q29tcC5qcyIsImltcG9ydCB7Zm9yRWFjaH0gZnJvbSAnbG9kYXNoJztcbmxldCBpbml0U3RhdGUgPSB7XG4gICAgdXNlcklkOiB3aW5kb3cubG9jYWxQYXJhbXMudXNlcklkID8gcGFyc2VJbnQod2luZG93LmxvY2FsUGFyYW1zLnVzZXJJZCkgOiBudWxsLFxuICAgIHN0YXJ0OiB3aW5kb3cubG9jYWxQYXJhbXMuc3RhcnQgPyBwYXJzZUludCh3aW5kb3cubG9jYWxQYXJhbXMuc3RhcnQpIDogMCxcbiAgICBwZXJwYWdlOiB3aW5kb3cubG9jYWxQYXJhbXMucGVycGFnZSA/IHBhcnNlSW50KHdpbmRvdy5sb2NhbFBhcmFtcy5wZXJwYWdlKSA6IDksXG4gICAgYmxvZ3M6IFtdLFxuICAgIGNvdW50OiAwLFxuICAgIHN0YXR1czogbnVsbCxcbn07XG5cbmNvbnN0IG15QmxvZ0xpc3QgPSAoc3RhdGUgPSBpbml0U3RhdGUsIGFjdGlvbikgPT4ge1xuICAgIGxldCBkYXRhID0gey4uLnN0YXRlfTtcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ01ZX0JMT0dfTElTVF9TRU5EJzpcbiAgICAgICAgICAgIGRhdGEuc3RhcnQgPSBhY3Rpb24uc3RhcnQ7XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzZW5kJztcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBjYXNlICdNWV9CTE9HX0xJU1RfU1VDQ0VTUyc6XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzdWNjZXNzJztcbiAgICAgICAgICAgIGRhdGEuYmxvZ3MgPSBhY3Rpb24uZGF0YS5nZXRNeUJsb2dMaXN0LmJsb2dzO1xuICAgICAgICAgICAgZGF0YS5jb3VudCA9IGFjdGlvbi5kYXRhLmdldE15QmxvZ0xpc3QuY291bnQ7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgY2FzZSAnTVlfQkxPR19MSVNUX0VSUk9SJzpcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ2Vycm9yJztcbiAgICAgICAgICAgIGRhdGEuZXJyb3IgPSBhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcblxuICAgICAgICBjYXNlICdNWV9CTE9HX1BVQkxJQ19TRU5EJzpcbiAgICAgICAgICAgIGRhdGEuc3RhcnQgPSBhY3Rpb24uc3RhcnQ7XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzZW5kJztcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICBjYXNlICdNWV9CTE9HX1BVQkxJQ19TVUNDRVNTJzpcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3N1Y2Nlc3MnO1xuICAgICAgICAgICAgZm9yRWFjaChkYXRhLmJsb2dzLCAoYmxvZykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChibG9nLmlkID09IGFjdGlvbi5kYXRhLnB1YmxpY015QmxvZy5pZCkge1xuICAgICAgICAgICAgICAgICAgICBibG9nLnB1YmxpYyA9IGFjdGlvbi5kYXRhLnB1YmxpY015QmxvZy5wdWJsaWM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIGNhc2UgJ01ZX0JMT0dfUFVCTElDX0VSUk9SJzpcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ2Vycm9yJztcbiAgICAgICAgICAgIGRhdGEuZXJyb3IgPSBhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBteUJsb2dMaXN0XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zdGF0aWNfc3JjL2Jsb2cvTXlMaXN0UmVkLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==
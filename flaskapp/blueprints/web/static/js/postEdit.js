webpackJsonp([1],{417:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=a(2),o=r(i),s=a(12),l=a(8);a(24),a(145),a(25);var n=a(9),d=a(418),u=r(d),c=a(26),p=r(c),f=a(419),m=r(f),h=a(27),E=(0,h.configureStore)({auth:p.default,postEdit:m.default}),b=(0,n.layout)({comp:u.default,forAuth:!0});(0,s.render)(o.default.createElement(l.Provider,{store:E},o.default.createElement(b,null)),document.getElementById("root"))},418:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),d=a(2),u=r(d),c=a(8),p=a(29),f=a(9),m=a(40),h=a(171),E=r(h),b=a(172),g=r(b),y=a(173),v=function(t){function e(t){i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.state=l({},t.postEdit),a.state.editorState=m.EditorState.createEmpty(),a}return s(e,t),n(e,[{key:"componentWillMount",value:function(){-1!==this.state.id&&this.props.dispatch((0,p.graphql)({type:"MY_POST_GET",id:this.state.id,blogId:this.state.blogId}))}},{key:"componentWillReceiveProps",value:function(t){if("success_get"==t.postEdit.status){var e=(0,g.default)(t.postEdit.text),a=m.ContentState.createFromBlockArray(e.contentBlocks,e.entityMap);this.setState({userId:t.postEdit.userId,userName:t.postEdit.userName,userEmail:t.postEdit.userEmail,title:t.postEdit.title,description:t.postEdit.description,text:t.postEdit.text,date:t.postEdit.date,public:t.postEdit.public,editorState:m.EditorState.createWithContent(a)})}}},{key:"fieldChange",value:function(t){var e={},a="public"==t.target.id?t.target.checked:t.target.value;e[t.target.id]=a,this.setState(e)}},{key:"onEditorStateChange",value:function(t){this.setState({editorState:t})}},{key:"formSubmit",value:function(t){t.preventDefault();var e=(0,E.default)((0,m.convertToRaw)(this.state.editorState.getCurrentContent()));this.props.dispatch((0,p.graphql)({type:"POST_EDIT",id:this.state.id,blogId:this.state.blogId,title:this.state.title,description:this.state.description,text:e,public:this.state.public}))}},{key:"render",value:function(){var t=this,e=null;return"error"===this.props.postEdit.status?e={className:"danger",text:this.props.postEdit.error||"Error, wrong post data"}:"send"===this.props.postEdit.status?e={className:"info",text:"Loading, please wait"}:"success_edit"===this.props.postEdit.status&&(e={className:"success",text:"Post saved successfully"},setTimeout(function(){window.location="/post-edit/"+t.props.postEdit.blogId+"/"+t.props.postEdit.id},1e3)),u.default.createElement("div",null,u.default.createElement("ol",{className:"breadcrumb"},u.default.createElement("li",null,u.default.createElement("a",{href:"/my-blog-list"},"My blogs")),u.default.createElement("li",null,u.default.createElement("a",{href:"/my-blog-detail/"+this.props.postEdit.blogId},"Blog")),u.default.createElement("li",{className:"active"},this.state.title||"Edit post")),u.default.createElement("form",{onSubmit:this.formSubmit.bind(this)},u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{htmlFor:"title"},"Title"),u.default.createElement("input",{required:!0,type:"text",className:"form-control",id:"title",placeholder:"Title",onChange:this.fieldChange.bind(this),value:this.state.title})),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{htmlFor:"description"},"Description"),u.default.createElement("input",{required:!0,type:"text",className:"form-control",id:"description",placeholder:"Description",onChange:this.fieldChange.bind(this),value:this.state.description})),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{htmlFor:"text"},"Text"),u.default.createElement(y.Editor,{editorState:this.state.editorState,editorClassName:"form-control",onEditorStateChange:this.onEditorStateChange.bind(this),toolbar:{options:["inline","list","fontSize","fontFamily","textAlign","link","history","colorPicker"]}})),u.default.createElement("div",{className:"checkbox"},u.default.createElement("label",null,u.default.createElement("input",{type:"checkbox",id:"public",onChange:this.fieldChange.bind(this),checked:!!this.state.public})," Public")),u.default.createElement(f.AlertMessage,{opts:e}),u.default.createElement("hr",null),u.default.createElement("div",null,u.default.createElement("button",{type:"submit",className:"btn btn-primary"},u.default.createElement("span",{className:"glyphicon glyphicon-floppy-disk"}),"Â  Save")),u.default.createElement("br",null)))}}]),e}(u.default.Component),P=function(t){return l({},t)};v=(0,c.connect)(P)(v),e.default=v},419:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},i=window.localParams.blogId,o=window.localParams.postId||"-1",s={id:parseInt(o),blogId:parseInt(i),userId:0,userName:"",userEmail:"",title:"",description:"",text:"",date:"",public:!1,status:null},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments[1],a=null;switch(e.type){case"MY_POST_GET_SEND":return r({status:"send"},t);case"MY_POST_GET_SUCCESS":return a=r({},t),a.status="success_get",a.id=e.data.getMyPost.id,a.blogId=e.data.getMyPost.blogId,a.userId=e.data.getMyPost.userId,a.userName=e.data.getMyPost.userName,a.userEmail=e.data.getMyPost.userEmail,a.title=e.data.getMyPost.title,a.description=e.data.getMyPost.description,a.text=e.data.getMyPost.text,a.date=e.data.getMyPost.date,a.public=!!e.data.getMyPost.public,a;case"MY_POST_GET_ERROR":return r({status:"error",error:e.error},t);case"POST_EDIT_SEND":return a=r({},t),a.status="send",a.id=e.id,a.blogId=e.blogId,a.title=e.title,a.description=e.description,a.text=e.text,a.public=e.public,a;case"POST_EDIT_SUCCESS":return a=r({},t),a.status="success_edit",a.id=e.data.editPost.id,a.blogId=e.data.editPost.blogId,a.title=e.data.editPost.title,a.description=e.data.editPost.description,a.text=e.data.editPost.text,a.date=e.data.editPost.date,a.public=e.data.editPost.public,a;case"POST_EDIT_ERROR":return a=r({},t),a.status="error",a.error=e.error,a;default:return t}};e.default=l}},[417]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vcG9zdEVkaXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljX3NyYy9wb3N0RWRpdC5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWNfc3JjL3Bvc3QvRWRpdENvbXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljX3NyYy9wb3N0L0VkaXRSZWQuanMiXSwibmFtZXMiOlsid2VicGFja0pzb25wIiwiNDE3IiwibW9kdWxlIiwiZXhwb3J0cyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfcmVhY3QiLCJfcmVhY3QyIiwiX3JlYWN0RG9tIiwiX3JlYWN0UmVkdXgiLCJfY29tcG9uZW50IiwiX0VkaXRDb21wIiwiX0VkaXRDb21wMiIsIl9Mb2dpblJlZCIsIl9Mb2dpblJlZDIiLCJfRWRpdFJlZCIsIl9FZGl0UmVkMiIsIl9jb25maWd1cmVTdG9yZSIsInN0b3JlIiwiY29uZmlndXJlU3RvcmUiLCJhdXRoIiwicG9zdEVkaXQiLCJDb21wIiwibGF5b3V0IiwiY29tcCIsIkVkaXRDb21wIiwiZm9yQXV0aCIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJQcm92aWRlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCI0MTgiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJzZWxmIiwiY2FsbCIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwicHJvdG90eXBlIiwiT2JqZWN0IiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJ2YWx1ZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGVmaW5lUHJvcGVydHkiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfYWN0aW9uIiwiX2RyYWZ0SnMiLCJfZHJhZnRqc1RvSHRtbCIsIl9kcmFmdGpzVG9IdG1sMiIsIl9odG1sVG9EcmFmdGpzIiwiX2h0bWxUb0RyYWZ0anMyIiwiX3JlYWN0RHJhZnRXeXNpd3lnIiwiX1JlYWN0JENvbXBvbmVudCIsInRoaXMiLCJfdGhpcyIsImdldFByb3RvdHlwZU9mIiwic3RhdGUiLCJlZGl0b3JTdGF0ZSIsIkVkaXRvclN0YXRlIiwiY3JlYXRlRW1wdHkiLCJpZCIsImRpc3BhdGNoIiwiZ3JhcGhxbCIsInR5cGUiLCJibG9nSWQiLCJuZXh0UHJvcHMiLCJzdGF0dXMiLCJibG9ja3NGcm9tSFRNTCIsInRleHQiLCJjb250ZW50IiwiQ29udGVudFN0YXRlIiwiY3JlYXRlRnJvbUJsb2NrQXJyYXkiLCJjb250ZW50QmxvY2tzIiwiZW50aXR5TWFwIiwic2V0U3RhdGUiLCJ1c2VySWQiLCJ1c2VyTmFtZSIsInVzZXJFbWFpbCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkYXRlIiwicHVibGljIiwiY3JlYXRlV2l0aENvbnRlbnQiLCJlIiwic3RhdGVPYmoiLCJ2YWwiLCJjaGVja2VkIiwicHJldmVudERlZmF1bHQiLCJjb252ZXJ0VG9SYXciLCJnZXRDdXJyZW50Q29udGVudCIsIl90aGlzMiIsImFsZXJ0T3B0cyIsImNsYXNzTmFtZSIsImVycm9yIiwic2V0VGltZW91dCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsIm9uU3VibWl0IiwiZm9ybVN1Ym1pdCIsImJpbmQiLCJodG1sRm9yIiwicmVxdWlyZWQiLCJwbGFjZWhvbGRlciIsIm9uQ2hhbmdlIiwiZmllbGRDaGFuZ2UiLCJFZGl0b3IiLCJlZGl0b3JDbGFzc05hbWUiLCJvbkVkaXRvclN0YXRlQ2hhbmdlIiwidG9vbGJhciIsIm9wdGlvbnMiLCJBbGVydE1lc3NhZ2UiLCJvcHRzIiwiUmVhY3QiLCJDb21wb25lbnQiLCJtYXBTdGF0ZVRvUHJvcHMiLCJjb25uZWN0IiwiNDE5IiwibG9jYWxQYXJhbXMiLCJwb3N0SWQiLCJpbml0U3RhdGUiLCJwYXJzZUludCIsInVuZGVmaW5lZCIsImFjdGlvbiIsImRhdGEiLCJnZXRNeVBvc3QiLCJlZGl0UG9zdCJdLCJtYXBwaW5ncyI6IkFBQUFBLGNBQWMsSUFFUkMsSUFDQSxTQUFVQyxFQUFRQyxFQUFTQyxHQUVqQyxZQWlDQSxTQUFTQyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQ3RDdkYsR0FBQUcsR0FBQUwsRUFBQSxHRFVJTSxFQUFVTCxFQUF1QkksR0NUckNFLEVBQUFQLEVBQUEsSUFDQVEsRUFBQVIsRUFBQSxFQUVBQSxHQUFBLElBQ0FBLEVBQUEsS0FDQUEsRUFBQSxHQUVBLElBQUFTLEdBQUFULEVBQUEsR0FDQVUsRUFBQVYsRUFBQSxLRGlCSVcsRUFBYVYsRUFBdUJTLEdDZnhDRSxFQUFBWixFQUFBLElEbUJJYSxFQUFhWixFQUF1QlcsR0NsQnhDRSxFQUFBZCxFQUFBLEtEc0JJZSxFQUFZZCxFQUF1QmEsR0NwQnZDRSxFQUFBaEIsRUFBQSxJQUdJaUIsR0FBUSxFQUFBRCxFQUFBRSxpQkFDWEMsS0FBTUEsVUFDTkMsU0FBVUEsWUFHUEMsR0FBTyxFQUFBWixFQUFBYSxTQUFRQyxLQUFNQyxVQUFVQyxTQUFTLEtBQzVDLEVBQUFsQixFQUFBbUIsUUFDQ3BCLEVBQUFGLFFBQUF1QixjQUFDbkIsRUFBQW9CLFVBQVNYLE1BQU9BLEdBQ2hCWCxFQUFBRixRQUFBdUIsY0FBQ04sRUFBRCxPQUVEUSxTQUFTQyxlQUFlLFVEMkJuQkMsSUFDQSxTQUFVakMsRUFBUUMsRUFBU0MsR0FFakMsWUFpQ0EsU0FBU0MsR0FBdUJDLEdBQU8sTUFBT0EsSUFB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akM0QyxFQUFLM0MsT0FBUzBDLEVBQU9DLEtBQUtFLFNBQVM3QyxPQUM1QjJDLENBRVgsS0FBSyxrQkFJRCxNQUhBQSxRQUFXcEUsR0FDWG9FLEVBQUsxRCxPQUFTLFFBQ2QwRCxFQUFLL0IsTUFBUThCLEVBQU85QixNQUNiK0IsQ0FHWCxTQUNJLE1BQU9wRSxJSDJWbkJqRixHQUFRSyxRR3ZWT2dCLEtIMlZaIiwiZmlsZSI6InBvc3RFZGl0LmpzIiwic291cmNlc0NvbnRlbnQiOlsid2VicGFja0pzb25wKFsxXSx7XG5cbi8qKiovIDQxNzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbnZhciBfcmVhY3RSZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbl9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDE0NSk7XG5cbl9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXG52YXIgX2NvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cbnZhciBfRWRpdENvbXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxOCk7XG5cbnZhciBfRWRpdENvbXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRWRpdENvbXApO1xuXG52YXIgX0xvZ2luUmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cbnZhciBfTG9naW5SZWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTG9naW5SZWQpO1xuXG52YXIgX0VkaXRSZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxOSk7XG5cbnZhciBfRWRpdFJlZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9FZGl0UmVkKTtcblxudmFyIF9jb25maWd1cmVTdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgc3RvcmUgPSAoMCwgX2NvbmZpZ3VyZVN0b3JlLmNvbmZpZ3VyZVN0b3JlKSh7XG5cdGF1dGg6IF9Mb2dpblJlZDIuZGVmYXVsdCxcblx0cG9zdEVkaXQ6IF9FZGl0UmVkMi5kZWZhdWx0XG59KTtcblxudmFyIENvbXAgPSAoMCwgX2NvbXBvbmVudC5sYXlvdXQpKHsgY29tcDogX0VkaXRDb21wMi5kZWZhdWx0LCBmb3JBdXRoOiB0cnVlIH0pO1xuKDAsIF9yZWFjdERvbS5yZW5kZXIpKF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHRfcmVhY3RSZWR1eC5Qcm92aWRlcixcblx0eyBzdG9yZTogc3RvcmUgfSxcblx0X3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQ29tcCwgbnVsbClcbiksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290JykpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gNDE4OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdFJlZHV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxudmFyIF9hY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblxudmFyIF9jb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXG52YXIgX2RyYWZ0SnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblxudmFyIF9kcmFmdGpzVG9IdG1sID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzEpO1xuXG52YXIgX2RyYWZ0anNUb0h0bWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZHJhZnRqc1RvSHRtbCk7XG5cbnZhciBfaHRtbFRvRHJhZnRqcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcyKTtcblxudmFyIF9odG1sVG9EcmFmdGpzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2h0bWxUb0RyYWZ0anMpO1xuXG52YXIgX3JlYWN0RHJhZnRXeXNpd3lnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBFZGl0Q29tcCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKEVkaXRDb21wLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIEVkaXRDb21wKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFZGl0Q29tcCk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEVkaXRDb21wLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRWRpdENvbXApKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSBfZXh0ZW5kcyh7fSwgcHJvcHMucG9zdEVkaXQpO1xuICAgICAgICBfdGhpcy5zdGF0ZS5lZGl0b3JTdGF0ZSA9IF9kcmFmdEpzLkVkaXRvclN0YXRlLmNyZWF0ZUVtcHR5KCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoRWRpdENvbXAsIFt7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudFdpbGxNb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5pZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goKDAsIF9hY3Rpb24uZ3JhcGhxbCkoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdNWV9QT1NUX0dFVCcsXG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuc3RhdGUuaWQsXG4gICAgICAgICAgICAgICAgYmxvZ0lkOiB0aGlzLnN0YXRlLmJsb2dJZFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICAgICAgICBpZiAobmV4dFByb3BzLnBvc3RFZGl0LnN0YXR1cyA9PSAnc3VjY2Vzc19nZXQnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJsb2Nrc0Zyb21IVE1MID0gKDAsIF9odG1sVG9EcmFmdGpzMi5kZWZhdWx0KShuZXh0UHJvcHMucG9zdEVkaXQudGV4dCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBfZHJhZnRKcy5Db250ZW50U3RhdGUuY3JlYXRlRnJvbUJsb2NrQXJyYXkoYmxvY2tzRnJvbUhUTUwuY29udGVudEJsb2NrcywgYmxvY2tzRnJvbUhUTUwuZW50aXR5TWFwKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IG5leHRQcm9wcy5wb3N0RWRpdC51c2VySWQsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJOYW1lOiBuZXh0UHJvcHMucG9zdEVkaXQudXNlck5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbmV4dFByb3BzLnBvc3RFZGl0LnVzZXJFbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IG5leHRQcm9wcy5wb3N0RWRpdC50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG5leHRQcm9wcy5wb3N0RWRpdC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogbmV4dFByb3BzLnBvc3RFZGl0LnRleHQsXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IG5leHRQcm9wcy5wb3N0RWRpdC5kYXRlLFxuICAgICAgICAgICAgICAgICAgICBwdWJsaWM6IG5leHRQcm9wcy5wb3N0RWRpdC5wdWJsaWMsXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvclN0YXRlOiBfZHJhZnRKcy5FZGl0b3JTdGF0ZS5jcmVhdGVXaXRoQ29udGVudChjb250ZW50KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdmaWVsZENoYW5nZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaWVsZENoYW5nZShlKSB7XG4gICAgICAgICAgICB2YXIgc3RhdGVPYmogPSB7fTtcbiAgICAgICAgICAgIHZhciB2YWwgPSBlLnRhcmdldC5pZCA9PSAncHVibGljJyA/IGUudGFyZ2V0LmNoZWNrZWQgOiBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgIHN0YXRlT2JqW2UudGFyZ2V0LmlkXSA9IHZhbDtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGVPYmopO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdvbkVkaXRvclN0YXRlQ2hhbmdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uRWRpdG9yU3RhdGVDaGFuZ2UoZWRpdG9yU3RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGVkaXRvclN0YXRlOiBlZGl0b3JTdGF0ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2Zvcm1TdWJtaXQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZm9ybVN1Ym1pdChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgdGV4dCA9ICgwLCBfZHJhZnRqc1RvSHRtbDIuZGVmYXVsdCkoKDAsIF9kcmFmdEpzLmNvbnZlcnRUb1JhdykodGhpcy5zdGF0ZS5lZGl0b3JTdGF0ZS5nZXRDdXJyZW50Q29udGVudCgpKSk7XG5cbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goKDAsIF9hY3Rpb24uZ3JhcGhxbCkoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUX0VESVQnLFxuICAgICAgICAgICAgICAgIGlkOiB0aGlzLnN0YXRlLmlkLFxuICAgICAgICAgICAgICAgIGJsb2dJZDogdGhpcy5zdGF0ZS5ibG9nSWQsXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuc3RhdGUudGl0bGUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuc3RhdGUuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgdGV4dDogdGV4dCxcbiAgICAgICAgICAgICAgICBwdWJsaWM6IHRoaXMuc3RhdGUucHVibGljXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGFsZXJ0T3B0cyA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnBvc3RFZGl0LnN0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgICAgIGFsZXJ0T3B0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZGFuZ2VyJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5wcm9wcy5wb3N0RWRpdC5lcnJvciB8fCAnRXJyb3IsIHdyb25nIHBvc3QgZGF0YSdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnBvc3RFZGl0LnN0YXR1cyA9PT0gJ3NlbmQnKSB7XG4gICAgICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdpbmZvJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0xvYWRpbmcsIHBsZWFzZSB3YWl0J1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucG9zdEVkaXQuc3RhdHVzID09PSAnc3VjY2Vzc19lZGl0Jykge1xuICAgICAgICAgICAgICAgIGFsZXJ0T3B0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdQb3N0IHNhdmVkIHN1Y2Nlc3NmdWxseSdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnL3Bvc3QtZWRpdC8nICsgX3RoaXMyLnByb3BzLnBvc3RFZGl0LmJsb2dJZCArICcvJyArIF90aGlzMi5wcm9wcy5wb3N0RWRpdC5pZDtcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdvbCcsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnYnJlYWRjcnVtYicgfSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGhyZWY6ICcvbXktYmxvZy1saXN0JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNeSBibG9ncydcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGhyZWY6IFwiL215LWJsb2ctZGV0YWlsL1wiICsgdGhpcy5wcm9wcy5wb3N0RWRpdC5ibG9nSWQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQmxvZydcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdhY3RpdmUnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnRpdGxlIHx8ICdFZGl0IHBvc3QnXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZm9ybScsXG4gICAgICAgICAgICAgICAgICAgIHsgb25TdWJtaXQ6IHRoaXMuZm9ybVN1Ym1pdC5iaW5kKHRoaXMpIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Zvcm0tZ3JvdXAnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHRtbEZvcjogJ3RpdGxlJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdUaXRsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2Zvcm0tY29udHJvbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICd0aXRsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdUaXRsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuZmllbGRDaGFuZ2UuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS50aXRsZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZm9ybS1ncm91cCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBodG1sRm9yOiAnZGVzY3JpcHRpb24nIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Rlc2NyaXB0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZm9ybS1jb250cm9sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogJ2Rlc2NyaXB0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ0Rlc2NyaXB0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5maWVsZENoYW5nZS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLmRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdmb3JtLWdyb3VwJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGh0bWxGb3I6ICd0ZXh0JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdUZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdERyYWZ0V3lzaXd5Zy5FZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3JTdGF0ZTogdGhpcy5zdGF0ZS5lZGl0b3JTdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3JDbGFzc05hbWU6ICdmb3JtLWNvbnRyb2wnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRWRpdG9yU3RhdGVDaGFuZ2U6IHRoaXMub25FZGl0b3JTdGF0ZUNoYW5nZS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogWydpbmxpbmUnLCAnbGlzdCcsICdmb250U2l6ZScsICdmb250RmFtaWx5JywgJ3RleHRBbGlnbicsICdsaW5rJywgJ2hpc3RvcnknLCAnY29sb3JQaWNrZXInXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NoZWNrYm94JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdwdWJsaWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5maWVsZENoYW5nZS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiAhIXRoaXMuc3RhdGUucHVibGljXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBQdWJsaWMnXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb21wb25lbnQuQWxlcnRNZXNzYWdlLCB7IG9wdHM6IGFsZXJ0T3B0cyB9KSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2hyJywgbnVsbCksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnc3VibWl0JywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1wcmltYXJ5JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLWZsb3BweS1kaXNrJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXFx4QTAgU2F2ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2JyJywgbnVsbClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEVkaXRDb21wO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxudmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSkge1xuICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xufTtcbkVkaXRDb21wID0gKDAsIF9yZWFjdFJlZHV4LmNvbm5lY3QpKG1hcFN0YXRlVG9Qcm9wcykoRWRpdENvbXApO1xuZXhwb3J0cy5kZWZhdWx0ID0gRWRpdENvbXA7XG5cbi8qKiovIH0pLFxuXG4vKioqLyA0MTk6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuLypcblxuXCJpZFwiIFNFUklBTCBQUklNQVJZIEtFWSxcblwidXNlcl9pZFwiIFNFUklBTCBOT1QgTlVMTCxcblwiYmxvZ19pZFwiIFNFUklBTCBOT1QgTlVMTCxcblwidGl0bGVcIiB2YXJjaGFyKDEyOCkgREVGQVVMVCBOVUxMLFxuXCJkZXNjcmlwdGlvblwiIHZhcmNoYXIoMjU2KSBERUZBVUxUIE5VTEwsXG5cInRleHRcIiB0ZXh0LFxuXCJkYXRlXCIgdGltZXN0YW1wIERFRkFVTFQgTlVMTFxuXG4qL1xuXG52YXIgYmxvZ0lkID0gd2luZG93LmxvY2FsUGFyYW1zLmJsb2dJZDtcbnZhciBwb3N0SWQgPSB3aW5kb3cubG9jYWxQYXJhbXMucG9zdElkIHx8ICctMSc7XG52YXIgaW5pdFN0YXRlID0ge1xuICAgIGlkOiBwYXJzZUludChwb3N0SWQpLFxuICAgIGJsb2dJZDogcGFyc2VJbnQoYmxvZ0lkKSxcbiAgICB1c2VySWQ6IDAsXG4gICAgdXNlck5hbWU6ICcnLFxuICAgIHVzZXJFbWFpbDogJycsXG4gICAgdGl0bGU6ICcnLFxuICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICB0ZXh0OiAnJyxcbiAgICBkYXRlOiAnJyxcbiAgICBwdWJsaWM6IGZhbHNlLFxuXG4gICAgLy8gdGVjaG5pY2FsIGluZm9cbiAgICBzdGF0dXM6IG51bGxcbn07XG5cbnZhciBwb3N0RWRpdCA9IGZ1bmN0aW9uIHBvc3RFZGl0KCkge1xuICAgIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogaW5pdFN0YXRlO1xuICAgIHZhciBhY3Rpb24gPSBhcmd1bWVudHNbMV07XG5cbiAgICB2YXIgZGF0YSA9IG51bGw7XG5cbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ01ZX1BPU1RfR0VUX1NFTkQnOlxuICAgICAgICAgICAgcmV0dXJuIF9leHRlbmRzKHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdzZW5kJ1xuICAgICAgICAgICAgfSwgc3RhdGUpO1xuXG4gICAgICAgIGNhc2UgJ01ZX1BPU1RfR0VUX1NVQ0NFU1MnOlxuICAgICAgICAgICAgZGF0YSA9IF9leHRlbmRzKHt9LCBzdGF0ZSk7XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzdWNjZXNzX2dldCc7XG4gICAgICAgICAgICBkYXRhLmlkID0gYWN0aW9uLmRhdGEuZ2V0TXlQb3N0LmlkO1xuICAgICAgICAgICAgZGF0YS5ibG9nSWQgPSBhY3Rpb24uZGF0YS5nZXRNeVBvc3QuYmxvZ0lkO1xuICAgICAgICAgICAgZGF0YS51c2VySWQgPSBhY3Rpb24uZGF0YS5nZXRNeVBvc3QudXNlcklkO1xuICAgICAgICAgICAgZGF0YS51c2VyTmFtZSA9IGFjdGlvbi5kYXRhLmdldE15UG9zdC51c2VyTmFtZTtcbiAgICAgICAgICAgIGRhdGEudXNlckVtYWlsID0gYWN0aW9uLmRhdGEuZ2V0TXlQb3N0LnVzZXJFbWFpbDtcbiAgICAgICAgICAgIGRhdGEudGl0bGUgPSBhY3Rpb24uZGF0YS5nZXRNeVBvc3QudGl0bGU7XG4gICAgICAgICAgICBkYXRhLmRlc2NyaXB0aW9uID0gYWN0aW9uLmRhdGEuZ2V0TXlQb3N0LmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgZGF0YS50ZXh0ID0gYWN0aW9uLmRhdGEuZ2V0TXlQb3N0LnRleHQ7XG4gICAgICAgICAgICBkYXRhLmRhdGUgPSBhY3Rpb24uZGF0YS5nZXRNeVBvc3QuZGF0ZTtcbiAgICAgICAgICAgIGRhdGEucHVibGljID0gISFhY3Rpb24uZGF0YS5nZXRNeVBvc3QucHVibGljO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICAgICAgY2FzZSAnTVlfUE9TVF9HRVRfRVJST1InOlxuICAgICAgICAgICAgcmV0dXJuIF9leHRlbmRzKHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGFjdGlvbi5lcnJvclxuICAgICAgICAgICAgfSwgc3RhdGUpO1xuXG4gICAgICAgIGNhc2UgJ1BPU1RfRURJVF9TRU5EJzpcbiAgICAgICAgICAgIGRhdGEgPSBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnc2VuZCc7XG4gICAgICAgICAgICBkYXRhLmlkID0gYWN0aW9uLmlkO1xuICAgICAgICAgICAgZGF0YS5ibG9nSWQgPSBhY3Rpb24uYmxvZ0lkO1xuICAgICAgICAgICAgZGF0YS50aXRsZSA9IGFjdGlvbi50aXRsZTtcbiAgICAgICAgICAgIGRhdGEuZGVzY3JpcHRpb24gPSBhY3Rpb24uZGVzY3JpcHRpb247XG4gICAgICAgICAgICBkYXRhLnRleHQgPSBhY3Rpb24udGV4dDtcbiAgICAgICAgICAgIGRhdGEucHVibGljID0gYWN0aW9uLnB1YmxpYztcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgICAgIGNhc2UgJ1BPU1RfRURJVF9TVUNDRVNTJzpcbiAgICAgICAgICAgIGRhdGEgPSBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnc3VjY2Vzc19lZGl0JztcbiAgICAgICAgICAgIGRhdGEuaWQgPSBhY3Rpb24uZGF0YS5lZGl0UG9zdC5pZDtcbiAgICAgICAgICAgIGRhdGEuYmxvZ0lkID0gYWN0aW9uLmRhdGEuZWRpdFBvc3QuYmxvZ0lkO1xuICAgICAgICAgICAgZGF0YS50aXRsZSA9IGFjdGlvbi5kYXRhLmVkaXRQb3N0LnRpdGxlO1xuICAgICAgICAgICAgZGF0YS5kZXNjcmlwdGlvbiA9IGFjdGlvbi5kYXRhLmVkaXRQb3N0LmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgZGF0YS50ZXh0ID0gYWN0aW9uLmRhdGEuZWRpdFBvc3QudGV4dDtcbiAgICAgICAgICAgIGRhdGEuZGF0ZSA9IGFjdGlvbi5kYXRhLmVkaXRQb3N0LmRhdGU7XG4gICAgICAgICAgICBkYXRhLnB1YmxpYyA9IGFjdGlvbi5kYXRhLmVkaXRQb3N0LnB1YmxpYztcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgICAgIGNhc2UgJ1BPU1RfRURJVF9FUlJPUic6XG4gICAgICAgICAgICBkYXRhID0gX2V4dGVuZHMoe30sIHN0YXRlKTtcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ2Vycm9yJztcbiAgICAgICAgICAgIGRhdGEuZXJyb3IgPSBhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IHBvc3RFZGl0O1xuXG4vKioqLyB9KVxuXG59LFs0MTddKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gcG9zdEVkaXQuanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyByZW5kZXIgfSBmcm9tICdyZWFjdC1kb20nXG5pbXBvcnQgeyBQcm92aWRlciB9IGZyb20gJ3JlYWN0LXJlZHV4J1xuXG5pbXBvcnQgJ2Jvb3RzdHJhcC9kaXN0L2Nzcy9ib290c3RyYXAuY3NzJztcbmltcG9ydCAncmVhY3QtZHJhZnQtd3lzaXd5Zy9kaXN0L3JlYWN0LWRyYWZ0LXd5c2l3eWcuY3NzJztcbmltcG9ydCAnLi9zdHlsZXMvaW5kZXguc2NzcydcblxuaW1wb3J0IHtsYXlvdXR9IGZyb20gJy4vaGVscGVycy9jb21wb25lbnQnXG5pbXBvcnQgRWRpdENvbXAgZnJvbSAnLi9wb3N0L0VkaXRDb21wJ1xuXG5pbXBvcnQgYXV0aCBmcm9tICcuL2F1dGgvTG9naW5SZWQnXG5pbXBvcnQgcG9zdEVkaXQgZnJvbSAnLi9wb3N0L0VkaXRSZWQnXG5cbmltcG9ydCB7Y29uZmlndXJlU3RvcmV9IGZyb20gJy4vaGVscGVycy9jb25maWd1cmVTdG9yZSdcblxuXG5sZXQgc3RvcmUgPSBjb25maWd1cmVTdG9yZSh7XG5cdGF1dGg6IGF1dGgsXG5cdHBvc3RFZGl0OiBwb3N0RWRpdCxcbn0pO1xuXG5sZXQgQ29tcCA9IGxheW91dCh7Y29tcDogRWRpdENvbXAsIGZvckF1dGg6IHRydWV9KTtcbnJlbmRlcihcblx0PFByb3ZpZGVyIHN0b3JlPXtzdG9yZX0+XG5cdFx0PENvbXAgLz5cblx0PC9Qcm92aWRlcj4sXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290JylcbilcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3N0YXRpY19zcmMvcG9zdEVkaXQuanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnXG5pbXBvcnQge2FwaSwgZ3JhcGhxbH0gZnJvbSAnLi4vaGVscGVycy9hY3Rpb24nXG5pbXBvcnQge0FsZXJ0TWVzc2FnZX0gZnJvbSAnLi4vaGVscGVycy9jb21wb25lbnQnXG5cbmltcG9ydCB7IEVkaXRvclN0YXRlLCBjb252ZXJ0VG9SYXcsIENvbnRlbnRTdGF0ZSB9IGZyb20gJ2RyYWZ0LWpzJztcbmltcG9ydCBkcmFmdFRvSHRtbCBmcm9tICdkcmFmdGpzLXRvLWh0bWwnO1xuaW1wb3J0IGh0bWxUb0RyYWZ0IGZyb20gJ2h0bWwtdG8tZHJhZnRqcyc7XG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICdyZWFjdC1kcmFmdC13eXNpd3lnJztcblxuY2xhc3MgRWRpdENvbXAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHsuLi5wcm9wcy5wb3N0RWRpdH07XG4gICAgICAgIHRoaXMuc3RhdGUuZWRpdG9yU3RhdGUgPSBFZGl0b3JTdGF0ZS5jcmVhdGVFbXB0eSgpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxNb3VudCAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmlkID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKGdyYXBocWwoe1xuICAgICAgICAgICAgdHlwZTogJ01ZX1BPU1RfR0VUJyxcbiAgICAgICAgICAgIGlkOiB0aGlzLnN0YXRlLmlkLFxuICAgICAgICAgICAgYmxvZ0lkOiB0aGlzLnN0YXRlLmJsb2dJZFxuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgICAgaWYgKG5leHRQcm9wcy5wb3N0RWRpdC5zdGF0dXMgPT0gJ3N1Y2Nlc3NfZ2V0Jykge1xuICAgICAgICAgICAgY29uc3QgYmxvY2tzRnJvbUhUTUwgPSBodG1sVG9EcmFmdChuZXh0UHJvcHMucG9zdEVkaXQudGV4dCk7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gQ29udGVudFN0YXRlLmNyZWF0ZUZyb21CbG9ja0FycmF5KFxuICAgICAgICAgICAgICAgIGJsb2Nrc0Zyb21IVE1MLmNvbnRlbnRCbG9ja3MsXG4gICAgICAgICAgICAgICAgYmxvY2tzRnJvbUhUTUwuZW50aXR5TWFwXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICB1c2VySWQ6IG5leHRQcm9wcy5wb3N0RWRpdC51c2VySWQsXG4gICAgICAgICAgICAgICAgdXNlck5hbWU6IG5leHRQcm9wcy5wb3N0RWRpdC51c2VyTmFtZSxcbiAgICAgICAgICAgICAgICB1c2VyRW1haWw6IG5leHRQcm9wcy5wb3N0RWRpdC51c2VyRW1haWwsXG4gICAgICAgICAgICAgICAgdGl0bGU6IG5leHRQcm9wcy5wb3N0RWRpdC50aXRsZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbmV4dFByb3BzLnBvc3RFZGl0LmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIHRleHQ6IG5leHRQcm9wcy5wb3N0RWRpdC50ZXh0LFxuICAgICAgICAgICAgICAgIGRhdGU6IG5leHRQcm9wcy5wb3N0RWRpdC5kYXRlLFxuICAgICAgICAgICAgICAgIHB1YmxpYzogbmV4dFByb3BzLnBvc3RFZGl0LnB1YmxpYyxcbiAgICAgICAgICAgICAgICBlZGl0b3JTdGF0ZTogRWRpdG9yU3RhdGUuY3JlYXRlV2l0aENvbnRlbnQoY29udGVudCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpZWxkQ2hhbmdlIChlKSB7XG4gICAgICAgIGxldCBzdGF0ZU9iaiA9IHt9O1xuICAgICAgICBsZXQgdmFsID0gKGUudGFyZ2V0LmlkID09ICdwdWJsaWMnKSA/IGUudGFyZ2V0LmNoZWNrZWQgOiBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgc3RhdGVPYmpbZS50YXJnZXQuaWRdID0gdmFsO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlT2JqKTtcbiAgICB9XG5cbiAgICBvbkVkaXRvclN0YXRlQ2hhbmdlIChlZGl0b3JTdGF0ZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGVkaXRvclN0YXRlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZvcm1TdWJtaXQgKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsZXQgdGV4dCA9IGRyYWZ0VG9IdG1sKGNvbnZlcnRUb1Jhdyh0aGlzLnN0YXRlLmVkaXRvclN0YXRlLmdldEN1cnJlbnRDb250ZW50KCkpKTtcblxuICAgICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKGdyYXBocWwoe1xuICAgICAgICAgICAgdHlwZTogJ1BPU1RfRURJVCcsXG4gICAgICAgICAgICBpZDogdGhpcy5zdGF0ZS5pZCxcbiAgICAgICAgICAgIGJsb2dJZDogdGhpcy5zdGF0ZS5ibG9nSWQsXG4gICAgICAgICAgICB0aXRsZTogdGhpcy5zdGF0ZS50aXRsZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnN0YXRlLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgdGV4dDogdGV4dCxcbiAgICAgICAgICAgIHB1YmxpYzogdGhpcy5zdGF0ZS5wdWJsaWMsXG4gICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICByZW5kZXIgKCkge1xuICAgICAgICBsZXQgYWxlcnRPcHRzID0gbnVsbDtcbiAgICBcbiAgICAgICAgaWYgKHRoaXMucHJvcHMucG9zdEVkaXQuc3RhdHVzID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICBhbGVydE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZGFuZ2VyJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnByb3BzLnBvc3RFZGl0LmVycm9yIHx8ICdFcnJvciwgd3JvbmcgcG9zdCBkYXRhJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucG9zdEVkaXQuc3RhdHVzID09PSAnc2VuZCcpIHtcbiAgICAgICAgICAgIGFsZXJ0T3B0cyA9IHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdpbmZvJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiAnTG9hZGluZywgcGxlYXNlIHdhaXQnLFxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucG9zdEVkaXQuc3RhdHVzID09PSAnc3VjY2Vzc19lZGl0Jykge1xuICAgICAgICAgICAgYWxlcnRPcHRzID0ge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdQb3N0IHNhdmVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBgL3Bvc3QtZWRpdC8ke3RoaXMucHJvcHMucG9zdEVkaXQuYmxvZ0lkfS8ke3RoaXMucHJvcHMucG9zdEVkaXQuaWR9YDtcbiAgICAgICAgICAgIH0sIDEwMDApXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gPGRpdj5cbiAgICAgICAgICAgIDxvbCBjbGFzc05hbWU9XCJicmVhZGNydW1iXCI+XG4gICAgICAgICAgICAgICAgPGxpPjxhIGhyZWY9XCIvbXktYmxvZy1saXN0XCI+TXkgYmxvZ3M8L2E+PC9saT5cbiAgICAgICAgICAgICAgICA8bGk+PGEgaHJlZj17XCIvbXktYmxvZy1kZXRhaWwvXCIgKyB0aGlzLnByb3BzLnBvc3RFZGl0LmJsb2dJZH0+QmxvZzwvYT48L2xpPlxuICAgICAgICAgICAgICAgIDxsaSBjbGFzc05hbWU9XCJhY3RpdmVcIj57dGhpcy5zdGF0ZS50aXRsZSB8fCAnRWRpdCBwb3N0J308L2xpPlxuICAgICAgICAgICAgPC9vbD5cblxuICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9ezo6dGhpcy5mb3JtU3VibWl0fSA+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwidGl0bGVcIj5UaXRsZTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZm9ybS1jb250cm9sXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD1cInRpdGxlXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlRpdGxlXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17Ojp0aGlzLmZpZWxkQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudGl0bGV9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiZGVzY3JpcHRpb25cIj5EZXNjcmlwdGlvbjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZm9ybS1jb250cm9sXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD1cImRlc2NyaXB0aW9uXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkRlc2NyaXB0aW9uXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17Ojp0aGlzLmZpZWxkQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwidGV4dFwiPlRleHQ8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8RWRpdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3JTdGF0ZT17dGhpcy5zdGF0ZS5lZGl0b3JTdGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvckNsYXNzTmFtZT1cImZvcm0tY29udHJvbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkVkaXRvclN0YXRlQ2hhbmdlPXs6OnRoaXMub25FZGl0b3JTdGF0ZUNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXI9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBbJ2lubGluZScsICdsaXN0JywgJ2ZvbnRTaXplJywgJ2ZvbnRGYW1pbHknLCAndGV4dEFsaWduJywgJ2xpbmsnLCAnaGlzdG9yeScsICdjb2xvclBpY2tlciddLFxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hlY2tib3hcIj5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdwdWJsaWMnIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXs6OnRoaXMuZmllbGRDaGFuZ2V9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQgPSB7ISEgdGhpcy5zdGF0ZS5wdWJsaWN9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPiBQdWJsaWNcbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxBbGVydE1lc3NhZ2Ugb3B0cz17YWxlcnRPcHRzfSAvPlxuXG4gICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgPGRpdiA+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzTmFtZT1cImJ0biBidG4tcHJpbWFyeVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdnbHlwaGljb24gZ2x5cGhpY29uLWZsb3BweS1kaXNrJz48L3NwYW4+Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICBTYXZlXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxiciAvPlxuICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICB9XG59XG5cbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IChzdGF0ZSkgPT4ge1xuICAgIHJldHVybiB7Li4uc3RhdGV9XG59XG5FZGl0Q29tcCA9IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzKShFZGl0Q29tcClcbmV4cG9ydCBkZWZhdWx0IEVkaXRDb21wXG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3N0YXRpY19zcmMvcG9zdC9FZGl0Q29tcC5qcyIsIi8qXG5cblwiaWRcIiBTRVJJQUwgUFJJTUFSWSBLRVksXG5cInVzZXJfaWRcIiBTRVJJQUwgTk9UIE5VTEwsXG5cImJsb2dfaWRcIiBTRVJJQUwgTk9UIE5VTEwsXG5cInRpdGxlXCIgdmFyY2hhcigxMjgpIERFRkFVTFQgTlVMTCxcblwiZGVzY3JpcHRpb25cIiB2YXJjaGFyKDI1NikgREVGQVVMVCBOVUxMLFxuXCJ0ZXh0XCIgdGV4dCxcblwiZGF0ZVwiIHRpbWVzdGFtcCBERUZBVUxUIE5VTExcblxuKi9cblxubGV0IGJsb2dJZCA9IHdpbmRvdy5sb2NhbFBhcmFtcy5ibG9nSWQ7XG5sZXQgcG9zdElkID0gd2luZG93LmxvY2FsUGFyYW1zLnBvc3RJZCB8fCAnLTEnO1xubGV0IGluaXRTdGF0ZSA9IHtcbiAgICBpZDogcGFyc2VJbnQocG9zdElkKSxcbiAgICBibG9nSWQ6IHBhcnNlSW50KGJsb2dJZCksXG4gICAgdXNlcklkOiAwLFxuICAgIHVzZXJOYW1lOiAnJyxcbiAgICB1c2VyRW1haWw6ICcnLFxuICAgIHRpdGxlOiAnJyxcbiAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgdGV4dDogJycsXG4gICAgZGF0ZTogJycsXG4gICAgcHVibGljOiBmYWxzZSxcblxuICAgIC8vIHRlY2huaWNhbCBpbmZvXG4gICAgc3RhdHVzOiBudWxsLFxufTtcblxuXG5jb25zdCBwb3N0RWRpdCA9IChzdGF0ZSA9IGluaXRTdGF0ZSwgYWN0aW9uKSA9PiB7XG4gICAgbGV0IGRhdGEgPSBudWxsO1xuXG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgICBjYXNlICdNWV9QT1NUX0dFVF9TRU5EJzpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnc2VuZCcsXG4gICAgICAgICAgICAgICAgLi4uc3RhdGVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgY2FzZSAnTVlfUE9TVF9HRVRfU1VDQ0VTUyc6XG4gICAgICAgICAgICBkYXRhID0gey4uLnN0YXRlfTtcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ3N1Y2Nlc3NfZ2V0JztcbiAgICAgICAgICAgIGRhdGEuaWQgPSBhY3Rpb24uZGF0YS5nZXRNeVBvc3QuaWQ7XG4gICAgICAgICAgICBkYXRhLmJsb2dJZCA9IGFjdGlvbi5kYXRhLmdldE15UG9zdC5ibG9nSWQ7XG4gICAgICAgICAgICBkYXRhLnVzZXJJZCA9IGFjdGlvbi5kYXRhLmdldE15UG9zdC51c2VySWQ7XG4gICAgICAgICAgICBkYXRhLnVzZXJOYW1lID0gYWN0aW9uLmRhdGEuZ2V0TXlQb3N0LnVzZXJOYW1lO1xuICAgICAgICAgICAgZGF0YS51c2VyRW1haWwgPSBhY3Rpb24uZGF0YS5nZXRNeVBvc3QudXNlckVtYWlsO1xuICAgICAgICAgICAgZGF0YS50aXRsZSA9IGFjdGlvbi5kYXRhLmdldE15UG9zdC50aXRsZTtcbiAgICAgICAgICAgIGRhdGEuZGVzY3JpcHRpb24gPSBhY3Rpb24uZGF0YS5nZXRNeVBvc3QuZGVzY3JpcHRpb247XG4gICAgICAgICAgICBkYXRhLnRleHQgPSBhY3Rpb24uZGF0YS5nZXRNeVBvc3QudGV4dDtcbiAgICAgICAgICAgIGRhdGEuZGF0ZSA9IGFjdGlvbi5kYXRhLmdldE15UG9zdC5kYXRlO1xuICAgICAgICAgICAgZGF0YS5wdWJsaWMgPSAhISBhY3Rpb24uZGF0YS5nZXRNeVBvc3QucHVibGljO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICAgICAgY2FzZSAnTVlfUE9TVF9HRVRfRVJST1InOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGFjdGlvbi5lcnJvcixcbiAgICAgICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgY2FzZSAnUE9TVF9FRElUX1NFTkQnOlxuICAgICAgICAgICAgZGF0YSA9IHsuLi5zdGF0ZX07XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzZW5kJztcbiAgICAgICAgICAgIGRhdGEuaWQgPSBhY3Rpb24uaWQ7XG4gICAgICAgICAgICBkYXRhLmJsb2dJZCA9IGFjdGlvbi5ibG9nSWQ7XG4gICAgICAgICAgICBkYXRhLnRpdGxlID0gYWN0aW9uLnRpdGxlO1xuICAgICAgICAgICAgZGF0YS5kZXNjcmlwdGlvbiA9IGFjdGlvbi5kZXNjcmlwdGlvbjtcbiAgICAgICAgICAgIGRhdGEudGV4dCA9IGFjdGlvbi50ZXh0O1xuICAgICAgICAgICAgZGF0YS5wdWJsaWMgPSBhY3Rpb24ucHVibGljO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICAgICAgY2FzZSAnUE9TVF9FRElUX1NVQ0NFU1MnOlxuICAgICAgICAgICAgZGF0YSA9IHsuLi5zdGF0ZX07XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9ICdzdWNjZXNzX2VkaXQnO1xuICAgICAgICAgICAgZGF0YS5pZCA9IGFjdGlvbi5kYXRhLmVkaXRQb3N0LmlkO1xuICAgICAgICAgICAgZGF0YS5ibG9nSWQgPSBhY3Rpb24uZGF0YS5lZGl0UG9zdC5ibG9nSWQ7XG4gICAgICAgICAgICBkYXRhLnRpdGxlID0gYWN0aW9uLmRhdGEuZWRpdFBvc3QudGl0bGU7XG4gICAgICAgICAgICBkYXRhLmRlc2NyaXB0aW9uID0gYWN0aW9uLmRhdGEuZWRpdFBvc3QuZGVzY3JpcHRpb247XG4gICAgICAgICAgICBkYXRhLnRleHQgPSBhY3Rpb24uZGF0YS5lZGl0UG9zdC50ZXh0O1xuICAgICAgICAgICAgZGF0YS5kYXRlID0gYWN0aW9uLmRhdGEuZWRpdFBvc3QuZGF0ZTtcbiAgICAgICAgICAgIGRhdGEucHVibGljID0gYWN0aW9uLmRhdGEuZWRpdFBvc3QucHVibGljO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICBcbiAgICAgICAgY2FzZSAnUE9TVF9FRElUX0VSUk9SJzpcbiAgICAgICAgICAgIGRhdGEgPSB7Li4uc3RhdGV9O1xuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnZXJyb3InO1xuICAgICAgICAgICAgZGF0YS5lcnJvciA9IGFjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgcG9zdEVkaXQ7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3RhdGljX3NyYy9wb3N0L0VkaXRSZWQuanMiXSwic291cmNlUm9vdCI6IiJ9